function PreAjax(e, t) { if (isSet(e) && isSet(t) && isSet(ReqObj.Form[t].ServiceSequence)) { var r = RemoveObjFromService(e, t, ReqObj.Form[t].ServiceSequence); if (isSet(ReqObj.Form[t].HitArray) && ReqObj.Form[t].HitArray.push(r), isSet(r) && "" !== r) return r } } function SpliceObject(e, t) { if (isSet(e) && isSet(t)) { for (var r = "", o = 0; o < t.length; o++)if (e.toLowerCase() === ConstructorName(t[o].fn).toLowerCase()) { r = t.splice(o, 1)[0]; break } return r } } function RemoveObjFromService(e, t) { var r = ""; return isSet(t) && (r = RemoveObjFromArray(e, t, ReqObj.Form[t].ServiceSequence)), r } function RemoveObjFromHit(e, t) { var r = ""; return isSet(t) && isSet(ReqObj.Form[t].HitArray) && (r = RemoveObjFromArray(ConstructorName(e.fn), t, ReqObj.Form[t].HitArray)), r } function RemoveObjFromArray(e, t, r) { if (isSet(e) && isSet(t) && isSet(r)) { var o = SpliceObject(e, r); if (isSet(o)) return o } } function Ajaxfailure(e, t) { isSet(e) && isSet(t) && isSet(ReqObj.Form[t].ServiceSequence) && (RemoveObjFromHit(e, t), ReqObj.Form[t].ServiceSequence.push(e)) } function PostAjax(e, t) { if (isSet(e)) { if (isSet(ReqObj.Form[t].HitArray)) { var r = RemoveObjFromHit(e, t); "" !== r && (e = r) } SubmitCallback(e.cb, t); for (var o = 0; o < e.post.length; o++)PrePostService(e.post[o], t) } } function SubmitCallback(e, t) { if (isSet(t) && isSet(ReqObj.Form[t].ServiceSequence) && isSet(e)) for (var r = 0; r < e.length; r++)ReqObj.Form[t].ServiceSequence.push(e[r]), e[r].fn.onSubmit(t) } function PrePostService(e, t) { RemoveButton(t), isSet(e) && "" !== e && (addBlLoader(t, "left"), e.call(ReqObj.Form[t].FormSequence, t)) } function UpdateChatName(e) { if (notEmpty(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn")) || isSet(ReqObj.UserDetail) && notEmpty(ReqObj.UserDetail.fn)) { var t = usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn"); notEmpty(t) || (t = ReqObj.UserDetail.fn), "inline" === chatBlPopupInline(e) ? $("#t" + e + "_chatScroll > div.chat-blbody > div.message-left > div.message-text").text("Hi " + t) : "popup" === chatBlPopupInline(e) && $("#t" + e + "_chatScroll > div.chat-blbody1 > div.message-left1 > div.message-text2").text("Hi " + t) } else "inline" === chatBlPopupInline(e) ? $("#t" + e + "_chatScroll > div.chat-blbody > div.message-left > div.message-text").text("Hi") : "popup" === chatBlPopupInline(e) && $("#t" + e + "_chatScroll > div.chat-blbody1 > div.message-left1 > div.message-text2").text("Hi") } function BlStaticQues(e) { this.StaticHtml = "", this.uploadfiles = 0, this.files = "", this.deleteId = 0, this.className = "BlStaticQues", this.attachmentCalled = !1, this.staticCalled = !1 } function InlineDefault(e) { $("#t" + e + "_allBtn").html(""), $("#t" + e + "_thankDiv").html("").addClass("bedsnone"), $("#t" + e + "_mcont").css({ display: "table" }) } function ShowSkip(e, t) { var r = ["Isq", "BlStaticQues"]; if (isSet(e)) { for (var o = 0; o < e.length; o++)if (-1 !== $.inArray(ConstructorName(e[o].Obj), r)) return !1; return !0 } return !0 } function ShowButton(e, t) { var r = ["ThankYou", "UserVerification", "ProductNameQuestion", "UserLogin", "ProductName", "MoreDetails", "ContactDetail", "TermsConditions", "CountrySugg"]; if (isSet(e)) { for (var o = 0; o < e.length; o++)if (-1 !== $.inArray(ConstructorName(e[o].Obj), r)) return !1; return !0 } return !0 } function submitclass(e, t) { var r = "", o = 0; if ("popup" === chatBlPopupInline(e)) { for (var i = 0; i < t.length; i++)if ("RequirementDtl" === ConstructorName(t[i].Obj)) { o = 1; break } 1 === o ? r += returnButton("t" + e, "_submit", "Next", "blchat-btn3") : (r += '<div class="betxtc">', r += returnButton("t" + e, "_submit", "Next", "blchat-btn3"), r += "</div>") } else "inline" === chatBlPopupInline(e) && (r += returnButton("t" + e, "_submit", "Next &gt;", "chat-txt1")); return r } function buttonName(e, t) { if (IsChatbl(t)) { if (ShowButton(e, t)) { var r = "inline" === chatBlPopupInline(t) ? "<div class='betxtc' id='t" + t + "_btnHtml'>" : "popup" === chatBlPopupInline(t) ? "<div class='be-btnctr' id='t" + t + "_btnHtml'>" : ""; ShowSkip(e, t) && (r += "<button class='chat-txt' id='t" + t + "_notSure' > Not sure</button>"), r += submitclass(t, e), $("#t" + t + "_bl_form").append(r) } } else { var o = { order: 3e5, text: "Next", class: "form-btn", parent: "befstgo2" }; if (isSet(e)) for (var i = 0; i < e.length; i++) { (isSet(BtnType[ConstructorName(e[i].Obj)]) ? BtnType[ConstructorName(e[i].Obj)].order : 3e5) < o.order && (o = BtnType[ConstructorName(e[i].Obj)]) } var a = currentISO(); o = JSON.parse(JSON.stringify(o)), 0 === ReqObj.Form[t].FormSequence.StepCounter && !0 !== ReqObj.Form[t].OnCloseStep && ("IN" !== a && "09" === t.substring(0, 2) && (o.parent = "befstgo1"), "09" !== t.substring(0, 2) && (o.text = "Submit Requirement", "01" === t.substring(0, 2) ? (o.parent = "be-mdl", o.class = "be_btmm") : (o.parent = "betxtc", o.class = "penqbt")), isSet(ReqObj.Form[t].BtnText) && "" !== ReqObj.Form[t].BtnText && "09" !== t.substring(0, 2) && (o.text = ReqObj.Form[t].BtnText)), $("#t" + t + "_submit").removeClass().addClass(o.class).prop("value", o.text).parent().removeClass().addClass(o.parent) } } function RemoveButton(e) { isSet(e) && (IsChatbl(e) ? $("#t" + e + "_btnHtml").each(function () { $(this).remove() }) : "09" === e.substring(0, 2) && $("#t" + e + "_submit").removeClass().parent().addClass("bedsnone")) } function ContactDetail(e, t, r) { this.setName = "", this.setEmail = "", this.setCity = "", this.imeshCookie = "", this.iplocCookie = "", this.usercountry = "", this.geoip_country_iso = "", this.name = e, this.email = t, this.city = r, this.contactdetailhtml = "", this.className = "ContactDetail", this.ContactDetailHtmlNameObj = { Label: "", UserInput: "", OuterWrapper: "", ClosingWrapper: "" }, this.ContactDetailHtmlEmailObj = { Label: "", UserInput: "", OuterWrapper: "", ClosingWrapper: "" }, this.ContactDetailHtmlCityObj = { Label: "", UserInput: "", OuterWrapper: "", ClosingWrapper: "" }, this.ContactDetailHtmlObjArray = [], this.nonMandatory = !1 } function CountrySugg() { this.countrysugghtml = "", this.CountrySuggHtmlObj = { Label: "", UserInput: "", OuterWrapper: "", ClosingWrapper: "" }, this.CountrySuggHtmlObjArray = [], this.className = "CountrySugg" } function FinishEnquiryService(e) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads", r = ReqObj.Form[e].generationId, o = ReqObj.Form[e].query_destination, i = ReqObj.Form[e].modId; $.ajax({ cache: !1, url: appsServerName + "index.php?r=Newreqform/FinishEnqService", type: "GET", crossorigin: !0, dataType: "json", data: { ofr_id: r, rfq_queryDestination: o, modId: i }, success: function (r) { isSet(r) ? isSet(r.RESP) || "failure" != r.RESP ? blenqGATracking(t, "service:FinishEnqService:success", r.RESULT, 1, e) : blenqGATracking(t, "service:FinishEnqService:failure", r.ERROR_MESSAGE, 1, e) : blenqGATracking(t, "service:FinishEnqService:failure", r, 1, e) }, error: function (r) { r = isSet(r) ? r : "response undefined", blenqGATracking(t, "service:FinishEnqService:failure", r, 1, e) } }) } function FlagSuggestor() { this.flaghit = {}, this.countryiso = {}, this.toupdate = {}, this.tmpId = "" } function setCountryISO(e, t) { var r = flagsugg; !0 === r.isChangeFromSuggestor(e, t) && r.changeToUpdateStatus("changeflag"), r.toupdate[r.tmpId] ? r.sequenceUpdate(e, t) : r.setCountry(e, t) } function UpdateISO(e, t) { ReqObj.changeUserIso = e, ReqObj.changeUserCountry = t } function FormCloseStep(e) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads", r = ReqObj.Form[e].FormSequence || {}, o = $("#t" + e + "_thankDiv").hasClass("bedsnone"), i = "CloseStep:"; if (ReqObj.Form[e].generationCalled && o) if (isSet(ReqObj.Form[e].OnCloseStep) && !ReqObj.Form[e].OnCloseStep) { if (i += r.StepCounter + 1 + ":", isSet(ReqObj.Form[e].UiArray[r.StepCounter])) for (a = 0; a < ReqObj.Form[e].UiArray[r.StepCounter].length; a++)a < ReqObj.Form[e].UiArray[r.StepCounter].length && a > 0 && (i += "-"), i += ConstructorName(ReqObj.Form[e].UiArray[r.StepCounter][a].Obj); blenqGATracking(t, i, getEventLabel(), 0, e), ReqObj.Form[e].FormSequence.OnCloseSeq(e) } else { if (i += r.StepCounter + 1 + (r.OnCloseCounter + 1) + ":", isSet(ReqObj.Form[e].OnCloseArray) && isSet(ReqObj.Form[e].OnCloseArray[r.OnCloseCounter]) && isSet(ReqObj.Form[e].OnCloseArray[r.OnCloseCounter])) for (a = 0; a < ReqObj.Form[e].OnCloseArray[r.OnCloseCounter].length; a++)a < ReqObj.Form[e].OnCloseArray[r.OnCloseCounter].length && a > 0 && (i += "-"), i += ConstructorName(ReqObj.Form[e].OnCloseArray[r.OnCloseCounter][a].Obj); blenqGATracking(t, i, getEventLabel(), 0, e), ReqObj.Form[e].FormSequence.OnClosegetStep(e) } else if (ReqObj.Form[e].generationCalled) { if (!o) if (r.OnCloseCounter = parseInt(r.OnCloseCounter, 10), r.StepCounter = parseInt(r.StepCounter, 10), r.OnCloseCounter > -1) { if (i += r.StepCounter + 1 + (r.OnCloseCounter + 1) + ":", isSet(ReqObj.Form[e].OnCloseArray) && isSet(ReqObj.Form[e].OnCloseArray[r.OnCloseCounter])) for (var a = 0; a < ReqObj.Form[e].OnCloseArray[r.OnCloseCounter].length; a++)a < ReqObj.Form[e].OnCloseArray[r.OnCloseCounter].length && a > 0 && (i += "-"), i += ConstructorName(ReqObj.Form[e].OnCloseArray[r.OnCloseCounter][a].Obj); blenqGATracking(t, i, getEventLabel(), 0, e), CloseForm(e) } else i += r.StepCounter + 1 + 1 + ":ThankYou", CloseForm(e) } else if (r.StepCounter > -1) { if (i += r.StepCounter + 1 + ":", isSet(ReqObj.Form[e].UiArray[r.StepCounter])) for (var a = 0; a < ReqObj.Form[e].UiArray[r.StepCounter].length; a++)a < ReqObj.Form[e].UiArray[r.StepCounter].length && a > 0 && (i += "-"), i += ConstructorName(ReqObj.Form[e].UiArray[r.StepCounter][a].Obj); blenqGATracking(t, i, getEventLabel(), 0, e), CloseForm(e) } else CloseForm(e) } function Generation(e) { this.v4iilexCookie = "", this.imeshCookie = "", this.iplocCookie = "", this.imEqGlCookie = "", this.siteEntryPage = "", this.adcampCookie = "", this.emktgCookie = "", this.geoLocCookie = "", this.iso = "", this.arg = e, this.className = "Generation" } function GenerateIntent(e) { var t = isSet(e.form_type) && "" !== e.form_type ? e.form_type : ""; e.form_type = ""; var r = 0 !== parseInt(e.tmpId) && isSet(e.tmpId) ? e.tmpId : 0; e.tmpId = "", e = ObjectTrim(e), "" !== usercookie.getCookie("ImeshVisitor") && $.ajax({ cache: !1, url: appsServerName + "index.php?r=Newreqform/IntentGeneration", type: "GET", dataType: "json", data: e, success: function (o) { isSet(o) && isSet(o.success) && 1 === parseInt(o.success) ? 12 === parseInt(e.flag) && 0 !== r && blenqGATracking(t, "service:IntentGeneration:success", getEventLabel(), 1, r) : 0 !== r && blenqGATracking(t, "service:IntentGeneration:failure", o, 1, r) }, error: function (e) { e = isSet(e) ? e : "response undefined", 0 !== r && blenqGATracking(t, "service:IntentGeneration:failure", e, 1, r) } }) } FormSeq.prototype.BLChatEvents = function (e) { var t = $("#t" + e + "_bl_form_wrapper "); $("#t" + e + "_bl_form_wrapper").off("click.Chatbl").on("click.Chatbl", function (t) { OpenCloseChatbl(e, !1) }), t.off("mouseenter.Chatbl").on("mouseenter.Chatbl", function (e) { disable_scroll() }), t.off("mouseleave.Chatbl").on("mouseleave.Chatbl", function (e) { enable_scroll() }), $(document).off("mouseenter.Chatbl").on("mouseenter.Chatbl", ".be-chat", function (e) { disable_scroll() }), $(document).off("mouseleave.Chatbl").on("mouseleave.Chatbl", ".be-chat", function (e) { enable_scroll() }), $("#t" + e + "_chatScroll").off("mouseenter.Chatbl").on("mouseenter.Chatbl", function (e) { null !== e.relatedTarget ? $(".chat-bl").css({ "overflow-y": "auto" }) : e.stopPropagation() }), $("#t" + e + "_chatScroll").off("mouseleave.Chatbl").on("mouseleave.Chatbl", function (e) { null !== e.relatedTarget ? $(".chat-bl").css({ "overflow-y": "hidden" }) : e.stopPropagation() }) }, FormSeq.prototype.BLChat = function (e) { this.BLChatEvents(e), ReqObj.Form[e].IsqStep1 = ReturnCorrectVal(ReqObj.Form[e].IsqStep1, 1), ReqObj.Form[e].IsqStepN = ReturnCorrectVal(ReqObj.Form[e].IsqStepN, 1), this.BLChatProdNameQuestion(e) }, FormSeq.prototype.BLChatProdNameQuestion = function (e) { UpdateChatName(e); this.NumberofClassCalled = 1; var t = { pre: [], post: [this.BLChatProdName], current: [this.BLChatProdNameQuestion] }, r = { UiArray: [], ServiceArray: [] }; if (CreateSeq({ object: { obj: new ProductNameQuestion(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }), usercookie.getCookie("ImeshVisitor") && ("IN" === currentISO() || "IN" !== currentISO() && usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn"))) { t = { pre: [], post: [], current: [] }; var o = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o) } }, FormSeq.prototype.BLChatProdName = function (e) { this.NumberofClassCalled = 1; var t = { pre: [], post: [this.BLChatLogin], current: [this.BLChatProdName] }, r = { UiArray: [], ServiceArray: [] }; if (ReqObj.Form[e].UserInputs.IsProduct === "Change the product".trim()) { if (CreateSeq({ object: { obj: new ProductName(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }), usercookie.getCookie("ImeshVisitor") && "IN" === currentISO()) { t = { pre: [], post: [], current: [] }; var o = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o) } } else this.BLChatLogin(e) }, FormSeq.prototype.BLChatCountry = function (e) { this.NumberofClassCalled = 1; var t = { pre: [this.BLChatCountryName], post: [], current: [this.BLChatCountry] }; usercookie.getCookie("ImeshVisitor") ? this.BLChatName(e) : CreateSeq({ object: { obj: new MoreDetails, toReplace: !1, isService: !1, array: { UiArray: [], ServiceArray: [] }, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) }, FormSeq.prototype.BLChatCountryName = function (e) { this.NumberofClassCalled = 1; var t = { pre: [this.BLChatTNC], post: [], current: [this.BLChatCountryName] }; ReqObj.Form[e].UserInputs.toChange === "Change your country".trim() ? usercookie.getCookie("ImeshVisitor") ? this.BLChatName(e) : CreateSeq({ object: { obj: new CountrySugg, toReplace: !1, isService: !1, array: { UiArray: [], ServiceArray: [] }, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) : this.BLChatTNC(e) }, FormSeq.prototype.BLChatTNC = function (e) { var t = { UiArray: [], ServiceArray: [] }, r = { pre: [this.BLChatLogin], post: [], current: [this.BLChatTNC] }; if (this.NumberofClassCalled = 1, "IN" === currentISO() || IsTncAlreadyFilled(e)) this.BLChatLogin(e); else { CreateSeq({ object: { obj: new TermsConditions(e), toReplace: !1, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }), r = { pre: [], post: [] }; var o = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o) } }, FormSeq.prototype.BLChatLogin = function (e) { if (this.NumberofClassCalled = 1, usercookie.getCookie("ImeshVisitor")) this.BLChatName(e); else { var t = { pre: [], post: [this.BLChatCountryName], current: [this.BLChatLogin] }, r = { UiArray: [], ServiceArray: [] }; if (CreateSeq({ object: { obj: new UserLogin(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }), "IN" === currentISO()) { t = { pre: [], post: [] }; var o = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o) } } }, FormSeq.prototype.BLChatName = function (e) { if (this.NumberofClassCalled = 1, notEmpty(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn")) || isSet(ReqObj.UserDetail) && notEmpty(ReqObj.UserDetail.fn)) this.BLChatCity(e); else { var t = { UiArray: [], ServiceArray: [] }, r = { pre: [this.BLChatCity], post: [], current: [this.BLChatName] }; if (CallGeneration(e)) { var o = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o), r = { pre: [], post: [], current: [] } } var i = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; CreateSeq({ object: { obj: new ContactDetail(1, 0, 0), toReplace: !1, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [i], hasFallback: !1, FallbackObj: null }) } }, FormSeq.prototype.BLChatCity = function (e) { this.NumberofClassCalled = 1; var t = { pre: [this.BLChatOtp], post: [], current: [this.BLChatCity] }, r = { UiArray: [], ServiceArray: [] }; if (CallGeneration(e)) { t = { pre: [], post: [] }; var o = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o), t = { pre: [], post: [], current: [] } } if (usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "ctid") || "IN" !== currentISO()) CallGeneration(e) ? "IN" === currentISO() ? this.BLChatIsq(e) : this.BLChatStaticQuestion(e) : this.BLChatOtp(e); else { var i = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; CreateSeq({ object: { obj: new ContactDetail(0, 0, 1), toReplace: !1, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [i], hasFallback: !1, FallbackObj: null }) } }, FormSeq.prototype.BLChatOtp = function (e) { if ("IN" === currentISO()) var t = { pre: [], post: [this.BLChatIsq], current: [this.BLChatOtp] }; else t = { pre: [], post: [this.BLChatRd], current: [this.BLChatOtp] }; t = { pre: [], post: [this.BLChatIsq], current: [this.BLChatOtp] }; (this.NumberofClassCalled = 1, ShowOtp()) ? CreateSeq({ object: { obj: new UserVerification(e), toReplace: !1, isService: !1, array: { UiArray: [], ServiceArray: [] }, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) : "IN" === currentISO() ? this.BLChatIsqSubsequent(e) : this.BLChatStaticQuestion(e) }, FormSeq.prototype.BLChatIsq = function (e) { this.NumberofClassCalled = 1; var t = { UiArray: [], ServiceArray: [] }, r = { pre: [this.BLChatIsqSubsequent], post: [], current: [this.BLChatIsq] }; if (CallGeneration(e)) { r = { pre: [this.BLChatOtp], post: [], current: [this.BLChatIsq] }; var o = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o), r = { pre: [], post: [], current: [this.BLChatIsq] } } if (ShowIsq(e)) { if (ShowReqBox(e)) var i = { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; else i = { object: { obj: new ThankYou(e), toReplace: !1, objHtmlId: e + "_thankDiv", isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, array: t, hooks: r, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: i }) } else this.BLChatRd(e) }, FormSeq.prototype.BLChatIsqSubsequent = function (e) { this.NumberofClassCalled = 1; var t = { UiArray: [], ServiceArray: [] }, r = { pre: [this.BLChatIsqSubsequent], post: [], current: [this.BLChatIsqSubsequent] }; if ("" === ReqObj.Form[e].IsqArray || ReqObj.Form[e].prevCount < ReqObj.Form[e].IsqLength) { if (ReqObj.Form[e].flags.isDescDivShown) o = { object: { obj: new ThankYou(e), toReplace: !1, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; else var o = { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, array: t, hooks: r, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: o }) } else this.BLChatRd(e) }, FormSeq.prototype.BLChatStaticQuestion = function (e) { this.NumberofClassCalled = 1; var t = { pre: [this.BLChatRd], post: [], current: [this.BLChatStaticQuestion] }; returnIsEnrichShownKeyVal(e) && "product" === ReqObj.Form[e].modrefType ? CreateSeq({ object: { obj: new BlStaticQues(e), toReplace: !0, isService: !1, array: { UiArray: [], ServiceArray: [] }, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) : this.BLChatRd(e) }, FormSeq.prototype.BLChatRd = function (e) { this.NumberofClassCalled = 1; var t = { UiArray: [], ServiceArray: [] }, r = { pre: [this.BLChatThankYou], post: [], current: [this.BLChatRd] }; if (CallGeneration(e)) { r = { pre: [this.BLChatThankYou], post: [], current: [this.BLChatRd] }; var o = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o), r = { pre: [], post: [], current: [this.BLChatRd] } } ShowReqBox(e) ? CreateSeq({ object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) : this.BLChatThankYou(e) }, FormSeq.prototype.BLChatThankYou = function (e) { this.NumberofClassCalled = 1; var t = { pre: [], post: [], current: [this.BLChatThankYou] }, r = { object: { obj: new ThankYou(e), toReplace: !1, objHtmlId: e + "_thankDiv", isService: !1, array: { UiArray: [], ServiceArray: [] }, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(r) }, BlStaticQues.prototype.hasHtml = function (e) { if (isSet(e)) { var t = e.tmpId; this.getHtml(t), "" !== this.StaticHtml ? this.ifHtmlPresent(e, t) : this.ifHtmlNotPresent(e, t) } }, BlStaticQues.prototype.getHtml = function (e) { if (this.StaticHtml += "<div class='bemt15' id='t" + e + "_isqStatic'>", this.StaticData = { DATA: [] }, StaticQuesForeignUser(e)) { if (ReqObj.Form[e].EnrichmentVal = "", StaticQuesForeignUser(e) && (this.isStaticCalled = !0, "product" === ReqObj.Form[e].modrefType.toLowerCase())) { var t = []; t = ["Unit(s)", "Piece(s)", "Kilogram(s)", "Ton", "Box(es)", "Meter(s)"].concat(["Kilogram", "Nos", "Tons", "20' Container", "40' Container", "Bags", "Bag", "Barrel", "Barrels", "Bottles", "Boxes", "Bushel", "Bushels", "Cartons", "Dozens", "Foot", "Gallon", "Grams", "Hectare", "Kilometer", "Kilowatt", "Litre", "Litres", "Long Ton", "Metric Ton", "Metric Tons", "Ounce", "Packets", "Packs", "Pair", "Pairs", "Piece", "Pound", "Reams", "Rolls", "Sets", "Sheets", "Short Ton", "Square Feet", "Square Meters", "Watt"]); for (var r = [], o = 0; o < t.length; o++)r.push("1"); t.push("Other"), r.push("-99"), this.StaticData = { DATA: [[{ IM_SPEC_MASTER_FULL_DESC: "", IM_SPEC_MASTER_ID: "375782", IM_SPEC_MASTER_TYPE: "1", IM_SPEC_MASTER_DESC: "Quantity", IM_SPEC_OPTIONS_DESC: "None", IM_SPEC_OPTIONS_ID: "3433901" }, { IM_SPEC_MASTER_FULL_DESC: "", IM_SPEC_MASTER_ID: "376269", IM_SPEC_MASTER_TYPE: "3", IM_SPEC_MASTER_DESC: "Quantity Unit", IM_SPEC_OPTIONS_DESC: DataSeparator(t), IM_SPEC_OPTIONS_ID: DataSeparator(r) }]] } } } else ReqObj.Form[e].flags.isEnrichShown.isAttachmentShown || (this.isAttachmentCalled = !0, this.StaticHtml += this.attachFiles(e)), "IN" !== currentISO() || ReqObj.Form[e].flags.isEnrichShown.isStaticShown || (this.isStaticCalled = !0, this.StaticData = { DATA: [{ IM_SPEC_MASTER_FULL_DESC: "", IM_SPEC_MASTER_ID: "147968", IM_SPEC_MASTER_DESC: "Looking for suppliers", IM_SPEC_MASTER_TYPE: "2", IM_SPEC_OPTIONS_DESC: DataSeparator(["Anywhere in India", "Local Only", "Specific City"]), IM_SPEC_OPTIONS_ID: DataSeparator(["386611", "386612", "386613"]) }] }); ReqObj.Form[e].prevCount = 0, ReqObj.Form[e].stopper = 0, ReqObj.Form[e].stopper = Math.min(3, this.StaticData.DATA.length - ReqObj.Form[e].prevCount) + ReqObj.Form[e].prevCount, this.TraverseStaticQuestion(e), this.StaticHtml += "</div>" }, BlStaticQues.prototype.ifHtmlPresent = function (e, t) { if (!0 === this.isStaticCalled && (ReqObj.Form[e.tmpId].flags.isEnrichShown.isStaticShown = !0), !0 === this.isAttachmentCalled && (ReqObj.Form[e.tmpId].flags.isEnrichShown.isAttachmentShown = !0), e.that.NumberofClassCalled -= 1, AttachObject(e.object, t), isSet(e.AfterService)) for (var r = 0; r < e.AfterService.length; r++)e.that.MakeSeq(e.AfterService[r], t); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, t) }, BlStaticQues.prototype.ifHtmlNotPresent = function (e, t) { e.hasFallback && CreateSeq(e.FallbackObj) }, BlStaticQues.prototype.TraverseStaticQuestion = function (e) { ReqObj.Form[e].Isq.CurrentPageQuestions = []; for (var t = [], r = [], o = ReqObj.Form[e].prevCount; o < ReqObj.Form[e].stopper; o++)ReqObj.Form[e].Isq.Question = [], ReqObj.Form[e].toGetCurrentPagestring = !0, FindIsqObject(this.StaticData.DATA[o], e, 0, !1, t), FindIsqObjectQuestions(this.StaticData.DATA[o], e, 0, !1, r), ReqObj.Form[e].Isq.CurrentPageQuestions.push(ReqObj.Form[e].Isq.Question); ReqObj.Form[e].prevCount = ReqObj.Form[e].stopper; var i = { SuffixOuterHtml: "", SuffixClosingHtml: "", suffix: "" }; this.StaticHtml += MakeWrapper(t, e, i) }, BlStaticQues.prototype.displayHtml = function (e) { return [this.StaticHtml] }, BlStaticQues.prototype.attachFiles = function (e) { for (var t = '<div><ul class="be-att">', r = "", o = "", i = "", a = 1; a < 5; a++)!0 === ReqObj.Form[e].flags.isDescDivShown ? (i = 1 === a ? '<li class="attch_add"' : '<li class="attch_add bedsnone"', r = 1 === a ? 'style="clear:both;border-top:1px solid #dfd8d8"' : 'style="border-left:0px;border-top:1px solid #dfd8d8"') : (i = 1 === a ? '<li class="attch_add"' : '<li class="attch_add bedsnone"', r = 1 === a ? 'style="clear:both;"' : 'style="border-left:0px"'), a < 4 && (o = '<div id="t' + e + "attachaddmore" + a + '" class="add_More bedsnone">+</div>'), t += i + 'id="t' + e + "attachment_div_" + a + '"' + r + ">" + o + '<a href="#" id="t' + e + "add_attachment_" + a + '" class="att Be9"><div class="Be10">Attach Files</div></a><div class="posi flt-rgt pdz bedsnone" id="t' + e + "upload_indicator_" + a + '"><img src=""></div><a href="#" id="t' + e + "file_attached_" + a + '" class="att2 Be11 bedsnone" target="_blank"></a><div id="t' + e + "remove_attachment_" + a + '" class="blnewform_sprit Be12 bedsnone"></div><div class="attch_add bedsnone" style="height:150px;"><iframe id="t' + e + "add_attach_iframe_" + a + '" name="t' + e + "add_attach_iframe_" + a + '" style="width:100%;height:80px;" border="0" framespacing="0" allowtransparency="true"></iframe><input type="file" id="t' + e + "input_attach_" + a + '" style="height: 0px; width: 0px;visibility: hidden;" name="image"><input type="hidden" id="t' + e + "attachment_file_name_" + a + '"><input type="hidden" id="t' + e + "type_" + a + '"><input type="hidden" name="t' + e + "attachment_path_" + a + '" value="" id="t' + e + "attachment_path_" + a + '"><input type="hidden" name="t' + e + "attachment_file_name_" + a + '" value="" id="t' + e + "attachment_file_name_" + a + '"><input type="hidden" name="success-url" value= "$server_name/eto-upload-attachment.mp" id="t' + e + "success_url_" + a + '"><input type="hidden" name="failure-url" value="$server_name/eto-upload-attachment.mp" id="t' + e + "failure_url_" + a + '"><input type="hidden" name="t' + e + "img_small_ori_" + a + '" value="" id="t' + e + "img_small_ori_" + a + '"><input type="hidden" name="t' + e + "myfile_doc_" + a + '" value="" id="t' + e + "myfile_doc_" + a + '"></li>'; return t += "</ul></div>" }, BlStaticQues.prototype.SaveDetails = function (e) { SaveIsq(e, "static"), $("#spcity").length > 0 && (ReqObj.Form[e].Static.enrichCity1 = $("#t" + e + "_enrich_city1").val(), ReqObj.Form[e].Static.enrichCity2 = $("#t" + e + "_enrich_city2").val(), ReqObj.Form[e].Static.enrichCity3 = $("#t" + e + "_enrich_city3").val(), ReqObj.Form[e].Static.enrichCity1id = $("#t" + e + "_enrich_city1specificcity_hidden").val(), ReqObj.Form[e].Static.enrichCity2id = $("#t" + e + "_enrich_city2specificcity_hidden").val(), ReqObj.Form[e].Static.enrichCity3id = $("#t" + e + "_enrich_city3specificcity_hidden").val()); for (var t = 1; t < 5; t++)$("#t" + e + "file_attached_" + t).length > 0 ? (ReqObj.Form[e].Static["img_small_ori_" + t] = $("#t" + e + "img_small_ori_" + t).val(), ReqObj.Form[e].Static["myfile_doc_" + t] = $("#t" + e + "myfile_doc_" + t).val()) : (ReqObj.Form[e].Static["img_small_ori_" + t] = "", ReqObj.Form[e].Static["myfile_doc_" + t] = "") }, BlStaticQues.prototype.onSubmit = function (e) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads", r = PreAjax("BlStaticQues", e), o = ""; o = IsChatbl(e) ? "BL" : ReqObj.Form[e].formType; var i = { enrichDesc: "" }; if (isSet(ReqObj.Form[e].Static.optionsValue) && ReqObj.Form[e].Static.optionsValue.length > 0 && isSet(ReqObj.Form[e].Static.questionsDesc)) for (var a = 0; a < ReqObj.Form[e].Static.questionsDesc.length; a++)"Looking for suppliers" === ReqObj.Form[e].Static.questionsDesc[a] && (i.prefered_suppliers_location = ReqObj.Form[e].Static.optionsValue[a], isSet(ReqObj.Form[e].Static.optionsValue[a]) && "specific city" === trimVal(ReqObj.Form[e].Static.optionsValue[a].toLowerCase()) && (i.enrichCity1 = ReqObj.Form[e].Static.enrichCity1, i.enrichCity2 = ReqObj.Form[e].Static.enrichCity2, i.enrichCity3 = ReqObj.Form[e].Static.enrichCity3, i.enrichCity1id = ReqObj.Form[e].Static.enrichCity1id, i.enrichCity2id = ReqObj.Form[e].Static.enrichCity2id, i.enrichCity3id = ReqObj.Form[e].Static.enrichCity3id)), StaticQuesForeignUser(e) && ("quantity" !== ReqObj.Form[e].Static.questionsDesc[a].toLowerCase() && "quantity unit" !== ReqObj.Form[e].Static.questionsDesc[a].toLowerCase() || ("quantity" === ReqObj.Form[e].Static.questionsDesc[a].toLowerCase() ? i.enrichDesc += ReqObj.Form[e].Static.questionsDesc[a] + ": " + ReqObj.Form[e].Static.optionsValue[a] + " " : "quantity unit" === ReqObj.Form[e].Static.questionsDesc[a].toLowerCase() && (i.enrichDesc += ReqObj.Form[e].Static.optionsValue[a]))); for (a = 1; a < 5; a++)i["img_small_ori_" + a] = ReqObj.Form[e].Static["img_small_ori_" + a], i["myfile_doc_" + a] = ReqObj.Form[e].Static["myfile_doc_" + a]; "" === ReqObj.Form[e].ReqDtlBox && (i.enrichDesc = trimVal(i.enrichDesc), isSet(i.enrichDesc) && "" !== i.enrichDesc && (i.enrichDesc = "," === i.enrichDesc[i.enrichDesc.length - 1] ? i.enrichDesc.slice(0, -1) : i.enrichDesc)), ReqObj.Form[e].EnrichmentVal = i.enrichDesc, isSet(ReqObj.Form[e].ReqDtlBox) && ("" !== ReqObj.Form[e].ReqDtlBox ? i.enrichDesc = ReqObj.Form[e].ReqDtlBox + ", " + i.enrichDesc : i.enrichDesc = i.enrichDesc), "enq" === ReqObj.Form[e].formType.toLowerCase() && (i.r_glusrid = ReqObj.Form[e].rcvGlid, i.q_dest = ReqObj.Form[e].query_destination), isObjectEmpty(i) && ValidGenId(ReqObj.Form[e].generationId) ? (i.modid = ReqObj.Form[e].modId, i.offer_id = ReqObj.Form[e].generationId, i.s_glusrid = usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "glid"), i.blEnqFlag = o, i.updatevalue = "updatevalue", $.ajax({ cache: !1, url: appsServerName + "index.php?r=Newreqform/saveEnrichment", type: "GET", timeout: 3e3, dataType: "json", crossOrigin: !0, crossDomain: !0, data: i, success: function (o) { isSet(o) ? 200 === parseInt(o.CODE) ? (blenqGATracking(t, "service:saveEnrichment:success", getEventLabel(), 1, e), PostAjax(r, e)) : blenqGATracking(t, "service:saveEnrichment:failure", o, 1, e) : (blenqGATracking(t, "service:saveEnrichment:failure", "response undefined", 1, e), Ajaxfailure(r, e)) }, error: function (o) { o = isSet(o) ? JSON.stringify(o) : "response undefined", blenqGATracking(t, "service:saveEnrichment:failure", o, 1, e), Ajaxfailure(r, e) } })) : PostAjax(r, e) }, BlStaticQues.prototype.GetDetail = function (e) { }, BlStaticQues.prototype.displayAnswer = function (e) { var t = chatBlClass(e, "right"), r = "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : ""; return [ConversationRightWrapper(e, GetAnswer(e, "static"), { classtotest: t, leftright: r })] }, BlStaticQues.prototype.defaultEventsForAttach = function (e) { RadioClick(); for (var t = 1; t < 5; t++)$("#t" + e + "add_attachment_" + t).on("click", { tmpId: e, loop: t }, this.openWin), $("#t" + e + "input_attach_" + t).on("change", { tmpId: e, loop: t, modId: ReqObj.Form[e].modId, that: this }, this.uploadFile), $("#t" + e + "attachaddmore" + t).on("click", { tmpId: e, todo: "addMoreAttachments", loop: t }, this.handleUI), $("#t" + e + "remove_attachment_" + t).on("click", { tmpId: e, loop: t, that: this }, this.deleteFile) }, BlStaticQues.prototype.validate = function (e) { return !0 }, BlStaticQues.prototype.openWin = function (e) { var t = e.data.tmpId, r = e.data.loop; $("#t" + t + "input_attach_" + r).val(null), $("#t" + t + "input_attach_" + r).click() }, BlStaticQues.prototype.getData = function (e, t, r, o) { if (null === $("#t" + e + "input_attach_" + t).val()) return ""; if (isSet(o)) { var i = 0, a = $("#t" + e + "input_attach_" + t)[0]; o.file = a.files[0]; var s = new FormData; s.append("IMAGE", o.file); var n = o.file.name; n = n.replace(/\'+/g, "_"); var l, c = 0, u = ""; if (/\//.test(n)) c = (l = n.split("/"))[l.length - 1]; else c = (l = n.split("\\"))[l.length - 1]; (u = (u = c.replace(/\\s+/g, "-")).toLowerCase()).indexOf("\\") > -1 && (u = u.replace(/\\/g, "/")), u.indexOf(" ") > -1 && (u = u.replace(/ /g, "-")); var m = u.substr(u.lastIndexOf("/") + 1); $("#t" + e + "attachment_file_name_" + t).value = m, m.length > 65 && (i = 1, alert("Filename cannot have more than 65 characters")), m.split(".").length > 2 && (i = 1, alert("Filename cannot contain dot(.)")), m.lastIndexOf(" ") > -1 && (i = 1, alert("Filename can contain only alphabets (a-z A-Z) , numbers (0-9) , underscore (_) or hiphen (-)")); var p = u.substr(u.indexOf("."), u.length); return ".jpg" == (p = p.toLowerCase()) || ".gif" == p || ".png" == p || ".jpeg" == p ? $("#t" + e + "type_" + t).val("default") : ".pdf" == p || ".doc" == p || ".docx" == p || ".xls" == p || ".xlsx" == p || ".txt" == p || ".rtf" == p || ".ppt" == p || ".pptx" == p ? $("#t" + e + "type_" + t).val("doc") : (i = 1, alert("Attachment can be either of jpg / gif / png / pdf / doc / docx / xls / xlsx / txt / rtf / ppt / pptx file extensions only")), $("#t" + e + "upload_indicator_" + t).removeClass("bedsnone"), s.append("MODID", r), s.append("USR_ID", usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "glid")), s.append("IMAGE_TYPE", "Rfq"), s.append("UPLOADED_BY", "User"), 1 != i && s } }, BlStaticQues.prototype.defaultEvents = function (e) { this.defaultEventsForAttach(e), $("select.betextclr").off("change click").on("change click", function () { if ("" === $(this).val()) $(this).css("color", "#9e9e9e"); else { var e = $(this); e.css("color", "#333"), e.removeClass("highlight-err"), e.siblings("label").removeClass("redc"), e.siblings(".isq_error_block").remove() } }), $(".inpt_errorbx").off("click keydown").on("click keydown", function () { var e = $(this); e.removeClass("highlight-err"), e.siblings("label").removeClass("redc"), e.siblings(".isq_error_block").remove(), e.siblings("select.betextclr").removeClass("highlight-err") }), CheckBoxClick(), $(document).on("hover", ".info_icon", function () { $(this).children(".full_desc").removeClass("bedsnone") }), $(document).on("mouseout", ".info_icon", function () { $(this).children(".full_desc").addClass("bedsnone") }), RadioClick(), $(".t" + e + "other_radiotemp").off("click").on("click", function (t) { $(this).hasClass("t" + e + "be-radioboxtemp") && $(".t" + e + "be-radioboxtemp").each(function () { if ("block" === $(this).parent().css("display")) { var e = $(this); e.children("input").prop("checked", !1), e.children("input").removeClass("waschecked"), e.removeClass("sl-box chksl"), e.children().children(".bechk-in").children().hide() } }) }) }, BlStaticQues.prototype.validate = function (e) { return ValidateQuestions(e, !0) }, BlStaticQues.prototype.uploadFile = function (e) { var t = e.data.tmpId, r = e.data.loop, o = e.data.modId, i = e.data.that, a = i.getData(t, r, o, i); if ("" !== a && !1 !== a) { var s = ""; s = "https://uploading.imimg.com/uploadimage", isObjectEmpty(a) && ValidGenId(ReqObj.Form[t].generationId) && $.ajax({ url: s, type: "POST", data: a, processData: !1, contentType: !1, success: function (e) { if (isSet(e)) { if (200 !== parseInt(e.Code)) return alert(e.Reason), i.handleUI({ data: { todo: "uploadFailure", tmpId: t, loop: r } }), !1; i.uploadfiles++; var o = e.Data.AwsPath.Image_Original_Path, a = i.file.name, s = o.substring(o.lastIndexOf("/") + 1); if ("Success" !== e.Status) return alert(e.Reason), i.handleUI({ data: { todo: "uploadFailure", tmpId: t, loop: r } }), !1; $("#t" + t + "file_attached_" + r).attr("href", o), $("#t" + t + "file_attached_" + r).html(a), $("#t" + t + "attachment_path_" + r).val(o), $("#t" + t + "attachment_file_name_" + r).val(s), "default" === $("#t" + t + "type_" + r).val() ? $("#t" + t + "img_small_ori_" + r).val(o) : $("#t" + t + "myfile_doc_" + r).val(o), i.handleUI({ data: { todo: "uploadSuccess", tmpId: t, loop: r } }) } }, error: function () { return alert("File is not uploaded.Please try again..."), i.handleUI("uploadFailure", t, r), !1 } }) } }, BlStaticQues.prototype.handleUI = function (e) { var t = e.data.todo, r = e.data.tmpId, o = e.data.loop; ("uploadSuccess" === t && ($("#t" + r + "remove_attachment_" + o).removeClass("bedsnone"), $("#t" + r + "add_attachment_" + o).addClass("bedsnone"), $("#t" + r + "upload_indicator_" + o).addClass("bedsnone"), $("#t" + r + "file_attached_" + o).removeClass("bedsnone"), $("#t" + r + "attachaddmore" + o).removeClass("bedsnone")), "uploadFailure" === t && $("#t" + r + "upload_indicator_" + o).addClass("bedsnone"), "addMoreAttachments" === t) && ($("#t" + r + "attachment_div_" + (o + 1)).removeClass("bedsnone"), $("#t" + r + "attachaddmore" + o).addClass("bedsnone")); "deleteFile" === t && ($("#t" + r + "addmore_attachment" + o).addClass("bedsnone"), $("#t" + r + "file_attached_" + o).attr("href", ""), $("#t" + r + "file_attached_" + o).html(""), $("#t" + r + "file_attached_" + o).addClass("bedsnone"), $("#t" + r + "attachment_path_" + o).val(""), $("#t" + r + "attachment_file_name_" + o).val(""), $("#t" + r + "remove_attachment_" + o).addClass("bedsnone"), $("#t" + r + "add_attachment_" + o).removeClass("bedsnone"), $("#t" + r + "upload_indicator_" + o).removeClass("bedsnone"), $("#t" + r + "attachaddmore" + o).addClass("bedsnone"), $("#t" + r + "img_small_ori_" + o).val(""), $("#t" + r + "myfile_doc_" + o).val("")) }, BlStaticQues.prototype.deleteFile = function (e) { var t = e.data.tmpId, r = e.data.loop, o = e.data.that; $.ajax({ url: appsServerName + "index.php?r=enrichform/DeleteAttachment", data: { file: $("#t" + t + "attachment_file_name_" + r).val() }, dataType: "json", type: "GET", success: function (e) { isSet(e) && o.handleUI({ data: { tmpId: t, loop: r, todo: "deleteFile" } }) }, error: function (e) { } }) }, FormSeq.prototype.BLinline = function (e) { this.NumberofClassCalled = 3, ReqObj.Form[e].IsqStep1 = ReturnCorrectVal(ReqObj.Form[e].IsqStep1, 3), ReqObj.Form[e].IsqStepN = ReturnCorrectVal(ReqObj.Form[e].IsqStepN, 2), updateEnrichShownKey(e, !1, !1); var t = { UiArray: this.arraySeq, ServiceArray: this.ServiceSequence }, r = { pre: [], post: [] }; if (ShowProdName(e)) { usercookie.getCookie("ImeshVisitor") && (r = { pre: [], post: [this.InlineOpenForm, this.SubsequentStep] }), this.NumberofClassCalled += 1; var o = { object: { obj: new ProductName(e), toReplace: !0, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o), r = { pre: [], post: [] } } else r = { pre: [this.InlineOpenForm, this.SubsequentStep], post: [] }; if (usercookie.getCookie("ImeshVisitor")) this.NumberofClassCalled -= 1, $("#t" + e + "_byrinfoIn").html(get_buyer_info(e)).removeClass("bedsnone"), ShowProdName(e) || (r = { pre: [this.InlineOpenForm, this.SubsequentStep], post: [] }); else { r = { pre: [], post: [this.InlineOpenForm, this.SubsequentStep] }; var i = { object: { obj: new UserLogin(e), toReplace: !0, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(i), r = { pre: [], post: [] } } var a = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (this.MakeSeq(a), ShowNameField(e)) { r = { pre: [], post: [] }; var s = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null, nextStep: ReqObj.Form[e].SubsequentStep }, n = "IN" === currentISO(), l = { object: { obj: new ContactDetail(1, 0, 0), toReplace: !1, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [s], hasFallback: !1, FallbackObj: null, nonMandatory: { name: n } }; this.MakeSeq(l) } else this.NumberofClassCalled -= 1; if ("04" !== e.substring(0, 2) || 1 !== parseInt(ReqObj.Form[e].disableRd)) { r = { pre: [], post: [] }; var c = { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (ShowIsq(e)) CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, array: t, hooks: r, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: c }); else ShowReqBox(e) ? CreateSeq(c) : (this.NumberofClassCalled -= 1, this.FullServiceArray.push(t.ServiceArray), ReqObj.Form[e].UiArray.push(t.UiArray), this.getStep(e)) } else this.NumberofClassCalled -= 1, this.FullServiceArray.push(t.ServiceArray), ReqObj.Form[e].UiArray.push(t.UiArray), this.getStep(e) }, FormSeq.prototype.BLpopup = function (e) { updateEnrichShownKey(e, !1, !1), ReqObj.Form[e].IsqStep1 = ReturnCorrectVal(ReqObj.Form[e].IsqStep1, 3), ReqObj.Form[e].IsqStepN = ReturnCorrectVal(ReqObj.Form[e].IsqStepN, 2); var t = { pre: [], post: [] }, r = { UiArray: this.arraySeq, ServiceArray: this.ServiceSequence }; if (usercookie.getCookie("ImeshVisitor")) { if ($("#t" + e + "_byrinfo").html(get_buyer_info(e)).removeClass("bedsnone"), this.NumberofClassCalled = 2, ShowProdName(e)) { this.NumberofClassCalled += 1, t = { pre: [], post: [this.SubsequentStep] }; s = { object: { obj: new ProductName(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(s), t = { pre: [], post: [] } } else t = { pre: [this.SubsequentStep], post: [] }; l = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(l); c = currentISO(); if (usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn") || "IN" === c) this.NumberofClassCalled -= 1; else { t = { pre: [], post: [] }; u = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }, m = { object: { obj: new ContactDetail(1, 0, 0), toReplace: !1, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [u], hasFallback: !1, FallbackObj: null }; this.MakeSeq(m) } if (ShowIsq(e)) { t.pre = [], t.post = []; var o = { object: { obj: new RequirementDtl(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, array: r, hooks: t, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: o }) } else if (ShowStaticQuestionForeign(e)) if (returnIsEnrichShownKeyVal(e) || !ReqObj.Form[e].flags.isDescDivShown) { var i = { pre: [this.OnCloseSeq], post: [] }; t = { pre: [], post: [] }; if (returnIsEnrichShownKeyVal(e) && !ReqObj.Form[e].flags.isDescDivShown && (this.NumberofClassCalled += 1), returnIsEnrichShownKeyVal(e) && "bl" === ReqObj.Form[e].formType.toLowerCase()) { var a = { obj: new BlStaticQues(e), toReplace: !0, isService: !1, array: r }; 1 === this.NumberofClassCalled ? a.hooks = i : 2 === this.NumberofClassCalled && (a.hooks = t), CreateSeq({ object: a, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } if (!ReqObj.Form[e].flags.isDescDivShown) t.pre = [this.OnCloseSeq], t.post = [], CreateSeq(o = { object: { obj: new RequirementDtl(e, "isq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1 }, nextStep: ReqObj.Form[e].NextStep }) } else this.OnCloseSeq(e); else if (ShowReqBox(e)) { CreateSeq(o = { object: { obj: new RequirementDtl(e), toReplace: !1, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } } else { if (this.NumberofClassCalled = 2, ShowProdName(e)) { this.NumberofClassCalled += 1, t = { pre: [], post: [] }; var s = { object: { obj: new ProductName(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(s) } t = { pre: [], post: [this.SubsequentStep] }; var n = { object: { obj: new UserLogin(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(n), t = { pre: [], post: [] }; var l = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(l); var c = currentISO(); if (usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn") || "IN" === c) this.NumberofClassCalled -= 1, this.FullServiceArray.push(r.ServiceArray), ReqObj.Form[e].UiArray.push(r.UiArray), this.getStep(e); else { t = { pre: [], post: [] }; var u = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }, m = { object: { obj: new ContactDetail(1, 0, 0), toReplace: !1, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [u], hasFallback: !1, FallbackObj: null }; this.MakeSeq(m) } } }, ContactDetail.prototype.returnKey = function (e) { var t = ""; return 1 === this.name && 0 === this.email && 0 === this.city && (t = "Name"), 0 === this.name && 1 === this.email && 0 === this.city && (t = "IN" === currentISO() ? "Email" : "Mobile"), 0 === this.name && 0 === this.email && 1 === this.city && (t = "City"), t }, ContactDetail.prototype.displayAnswer = function (e) { var t = this.returnKey(e), r = ""; 1 === this.name && 0 === this.email && 0 === this.city && (r = ReturnBlUserName(e)); var o = chatBlClass(e, "right"), i = "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : ""; return [ConversationRightWrapper(e, returnAnswer(e, t), { classtotest: o, leftright: i }), r] }, ContactDetail.prototype.SaveDetails = function (e, t) { IsChatbl(e) && (ReqObj.Form[e].UserInputs.Name = $("#t" + e + "_q_first_nm").val(), ReqObj.Form[e].UserInputs.Mobile = $("#t" + e + "_q_mobile_f").val(), ReqObj.Form[e].UserInputs.Email = $("#t" + e + "_q_email_in").val(), ReqObj.Form[e].UserInputs.City = isSet(ReqObj.Form[e].UserInputs.City) && "" !== ReqObj.Form[e].UserInputs.City ? ReqObj.Form[e].UserInputs.City : $("#t" + e + "_q_city_oth").val()) }, ContactDetail.prototype.displayHtml = function (e) { return "09" === e.substring(0, 2) ? 1 === this.name && 1 === this.email && 1 === this.city && (ReqObj.Form[e].flags.isNECShown = !0) : ReqObj.Form[e].flags.isNECShown = !0, [this.contactdetailhtml] }, ContactDetail.prototype.addHtmlObjToArray = function (e) { isSet(e) && this.ContactDetailHtmlObjArray.push([e]) }, ContactDetail.prototype.getContactDetailHtml = function (e) { var t = currentISO(); if (this.imeshCookie && 1 === this.name && 1 === this.email && 1 === this.city ? ("" === this.setName && this.addHtmlObjToArray(this.showName(e)), ("" === this.setEmail && "IN" === t || "" === this.setMobile && "IN" !== t && !0 === ReqObj.Form[e].OnCloseStep) && this.addHtmlObjToArray(this.showEmailOrMobile(e)), (isSet(t) && "IN" === t || "IN" === this.usercountry) && "" === this.setCity && this.addHtmlObjToArray(this.showCity(e))) : 1 === this.name && 0 === this.email && 0 === this.city ? "" === this.setName && this.addHtmlObjToArray(this.showName(e)) : 1 === this.email && 0 === this.name && 0 === this.city ? this.addHtmlObjToArray(this.showEmailOrMobile(e)) : 0 === this.email && 0 === this.name && 1 === this.city && "IN" === t && this.addHtmlObjToArray(this.showCity(e)), this.ContactDetailHtmlObjArray.length > 0) { var r = { SuffixOuterHtml: "<div class='belft beW11' id='t" + e + "_contactinfo'><div id='t" + e + "_idcontactscreen' class='beW5'>", SuffixClosingHtml: "</div></div>", suffix: "_contactinfo" }; return MakeWrapper(this.ContactDetailHtmlObjArray, e, r) } return "" }, ContactDetail.prototype.hasHtml = function (e) { if (isSet(e)) { var t = e.tmpId; this.nonMandatory = void 0 !== e.nonMandatory ? e.nonMandatory : "", this.captureDetails(t), this.cookies(t), this.contactdetailhtml = this.getContactDetailHtml(t), e.that.NumberofClassCalled -= 1, "" !== this.contactdetailhtml ? this.ifHtmlPresent(e, t) : this.ifHtmlNotPresent(e, t) } }, ContactDetail.prototype.ifHtmlPresent = function (e, t) { if (AttachObject(e.object, t), isSet(e.AfterService)) for (var r = 0; r < e.AfterService.length; r++)e.that.MakeSeq(e.AfterService[r], t); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, t) }, ContactDetail.prototype.ifHtmlNotPresent = function (e, t) { e.hasFallback && CreateSeq(e.FallbackObj) }, ContactDetail.prototype.defaultEvents = function (e) { "-126" === ReqObj.Form[e].afflId && $("#t" + e + "_q_first_nm").attr("placeholder", "Enter your name"), this.handleUI({ data: { obj: this, todo: "nameUI", tmpId: e } }), !0 === ReqObj.Form[e].OnCloseStep && this.handleUI({ data: { obj: this, todo: "cityOthers", tmpId: e } }), IsChatbl(e) && this.handleUI({ data: { obj: this, todo: "focus", tmpId: e } }), this.handleEvents(this, e) }, ContactDetail.prototype.validate = function (e) { return this.cookies(e), this.captureDetails(e), this.validateUserDetails(e) }, ContactDetail.prototype.onSubmit = function (e) { var t = PreAjax("ContactDetail", e); this.sendRequest(t, e) }, ContactDetail.prototype.cookies = function (e) { this.imeshCookie = usercookie.getCookie("ImeshVisitor"), this.iplocCookie = usercookie.getCookie("iploc"), this.geoip_country_iso = usercookie.getParameterValue(this.iplocCookie, "gcniso"), "" !== this.imeshCookie && (this.setName = ReqObj.UserDetail.fn, this.setEmail = ReqObj.UserDetail.em, this.setCity = "" !== ReqObj.UserDetail.ctid ? ReqObj.UserDetail.ctid : "" !== ReqObj.UserDetail.cityname ? ReqObj.UserDetail.cityname : "" !== ReqObj.UserDetail.ctoth ? ReqObj.UserDetail.ctoth : "", this.setMobile = ReqObj.UserDetail.mb1, this.usercountry = usercookie.getParameterValue(this.imeshCookie, "iso")) }, ContactDetail.prototype.captureDetails = function (e) { if ("IN" === currentISO()) { var t = $("#t" + e + "_q_email_in").length > 0 ? $("#t" + e + "_q_email_in").val() : ReqObj.UserDetail.em; ReqObj.UserDetail.em = ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "em"), t), void 0 === ReqObj.UserDetail.em && (ReqObj.UserDetail.em = "") } else { var r = $("#t" + e + "_q_mobile_f").length > 0 ? $("#t" + e + "_q_mobile_f").val() : ReqObj.UserDetail.mb1; ReqObj.UserDetail.mb1 = ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "mb1"), r), void 0 === ReqObj.UserDetail.mb1 && (ReqObj.UserDetail.mb1 = "") } var o = $("#t" + e + "_q_first_nm").length > 0 ? $("#t" + e + "_q_first_nm").val() : ReqObj.UserDetail.fn; ReqObj.UserDetail.fn = ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn"), o), void 0 === ReqObj.UserDetail.fn && (ReqObj.UserDetail.fn = ""); var i = $("#t" + e + "city_id_sugg").length > 0 ? $("#t" + e + "city_id_sugg").val() : ReqObj.UserDetail.ctid; ReqObj.UserDetail.ctid = ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "ctid"), i), void 0 === ReqObj.UserDetail.ctid && (ReqObj.UserDetail.ctid = ""), ReqObj.UserDetail.cityname = $("#t" + e + "_q_city_oth").length > 0 ? $("#t" + e + "_q_city_oth").val() : ReqObj.UserDetail.cityname, void 0 === ReqObj.UserDetail.cityname && (ReqObj.UserDetail.cityname = ""), ReqObj.UserDetail.ctoth = "" === ReqObj.UserDetail.ctid ? ReqObj.UserDetail.cityname : "" }, ContactDetail.prototype.returnSubmitChatBl = function (e) { var t = t = returnContainer("", "", "chat-arrow", "", ""), r = ""; return r += returnButton("t" + e, "_submit", t += "</div>", "inline" === chatBlPopupInline(e) ? "chat-arowicon1" : "popup" === chatBlPopupInline(e) ? "chat-arowicon1" : "") }, ContactDetail.prototype.showName = function (e) { var t = ReqObj.Form[e].formType.toLowerCase(); return this.getLabelName(e, t), this.getInputName(e, t), this.ContactDetailHtmlNameObj.OuterWrapper = (IsChatbl(e), ""), this.ContactDetailHtmlNameObj.ClosingWrapper = (IsChatbl(e), ""), this.ContactDetailHtmlNameObj }, ContactDetail.prototype.getLabelName = function (e, t) { var r = returnSpan("t" + e, "login_span_bold", "Name", "befwt"), o = returnLabel("t" + e, IsChatbl(e) ? "By the time I process your information, please tell me your " + r : "Name", "_name-lb", IsChatbl(e) ? "" : "be-lbl"); this.ContactDetailHtmlNameObj.Label = o }, ContactDetail.prototype.getInputName = function (e, t) { var r = IsChatbl(e) ? "popup" === chatBlPopupInline(e) ? "Enter your Name" : "" : "Enter your name", o = IsChatbl(e) ? "blchat-inpt" : "be-slbox inpt_errorbx", i = (IsChatbl(e), ""), a = ""; (a += returnInput("t" + e, "_q_first_nm_hidden", "hidden", " ", " ", " ", " ", " ", " "), a += returnInput("t" + e, "_q_first_nm", "text", "q_first_nm", r, o, i, " ", " "), IsChatbl(e)) ? (a += this.returnSubmitChatBl(e), a += this.getChatblNameErrorDiv(e)) : a += this.getNameErrorDiv(e); this.ContactDetailHtmlNameObj.UserInput = a }, ContactDetail.prototype.getNameErrorDiv = function (e) { var t = ""; return t += returnContainer("t" + e, "_error_first_name", "beerrp1 be-erbx bedsnone", "", ""), t += returnContainer("t" + e, "_fname_errmsg", "", "content", ""), t += "</div >", t += '<a class="be-erarw" data-role="arrow"></a>', t += "</div >" }, ContactDetail.prototype.getChatblNameErrorDiv = function (e) { var t = ""; return t += returnContainer("t" + e, "_error_first_name", "redc bltperor", "", ""), t += returnContainer("t" + e, "_fname_errmsg", "", "content", ""), t += "</div >", t += "</div>" }, ContactDetail.prototype.showEmailOrMobile = function (e) { var t = currentISO(), r = ReqObj.Form[e].formType.toLowerCase(); return this.getLabelEmailMobile(e, r, t), this.getInputEmailMobile(e, r, t), this.ContactDetailHtmlEmailObj.OuterWrapper = (IsChatbl(e), ""), this.ContactDetailHtmlEmailObj.ClosingWrapper = (IsChatbl(e), ""), this.ContactDetailHtmlEmailObj }, ContactDetail.prototype.getLabelEmailMobile = function (e, t, r) { var o = ""; o = "IN" === r ? "Email" : StaticQuesForeignUser(e) ? "Phone Number" : "Mobile"; var i = "IN" === r ? "_email-lb" : "_mobile-lb", a = IsChatbl(e) ? "" : o, s = IsChatbl(e) ? "" : "be-lbl"; this.ContactDetailHtmlEmailObj.Label = returnLabel("t" + e, a, i, s) }, ContactDetail.prototype.getInputEmailMobile = function (e, t, r) { var o = "IN" === r ? "_q_email_in" : "_q_mobile_f", i = IsChatbl(e) ? "blchat-inpt" : "IN" === r ? "be-slbox inpt_errorbx" : "be-input benords beW3 beh32", a = ""; a = "IN" === r ? "Email" : StaticQuesForeignUser(e) ? "Phone" : "Mobile"; var s = ""; "IN" !== r && (ReqObj.isoFlag = "" !== ReqObj.isoFlag ? ReqObj.isoFlag : usercookie.getParameterValue(this.imeshCookie, "phcc"), ReqObj.isoFlag = "+" === ReqObj.isoFlag.substring(0, 1) ? ReqObj.isoFlag : "+" + ReqObj.isoFlag, s += returnIsoHtml(e, IsChatbl(e) ? "beiso" : "be-flisq iso", ReqObj.isoFlag)); if (s += returnInput("t" + e, o, "text", o, "Enter your " + a, i, "", "", ""), IsChatbl(e)) { s += this.returnSubmitChatBl(e); var n = this.getChatblEmailMobileErrorDiv(e, r); namehtml += n } else { s += n = this.getEmailMobileErrorDiv(e, r) } this.ContactDetailHtmlEmailObj.UserInput = s }, ContactDetail.prototype.getEmailMobileErrorDiv = function (e, t) { var r = "", o = "IN" === t ? "_err_email" : "_error_mobile"; return r += returnContainer("t" + e, o, "beerrp1 be-erbx bedsnone error_blck", "", ""), r += returnContainer("t" + e, o = "IN" === t ? "_email_errmsg" : "_mobile_errmsg", "", "content", ""), r += "</div>", r += '<a class="be-erarw" data-role="arrow"></a></div>' }, ContactDetail.prototype.getChatblEmailMobileErrorDiv = function (e, t) { var r = "", o = "IN" === t ? "_err_email" : "_error_mobile"; return r += returnContainer("t" + e, o, "beerrp1 be-erbx bedsnone error_blck", "", ""), r += returnContainer("t" + e, o = "IN" === t ? "_email_errmsg" : "_mobile_errmsg", "", "content", ""), r += "</div>", r += "</div>" }, ContactDetail.prototype.showCity = function (e) { if (!usercookie.getParameterValue(this.imeshCookie, "ctid")) { var t = ReqObj.Form[e].formType.toLowerCase(); return this.getLabelCity(e, t), this.getInputCity(e, t), this.ContactDetailHtmlCityObj.OuterWrapper = (IsChatbl(e), ""), this.ContactDetailHtmlCityObj.ClosingWrapper = (IsChatbl(e), ""), this.ContactDetailHtmlCityObj } }, ContactDetail.prototype.getPrefillCity = function (e, t) { return IsChatbl(e) ? "" : !0 !== ReqObj.Form[e].OnCloseStep ? "" !== ReqObj.UserDetail.ipcityname ? ReqObj.UserDetail.ipcityname : "" : "" !== ReqObj.Form[e].cityOth ? ReqObj.Form[e].cityOth : "" }, ContactDetail.prototype.getLabelCity = function (e, t) { var r = returnSpan("", "", "city", "befwt"), o = IsChatbl(e) ? "Tell me your " + r + " to connect you to nearby suppliers." : "City", i = IsChatbl(e) ? "" : "be-lbl"; this.ContactDetailHtmlCityObj.Label = returnLabel("t" + e, o, "_for-city-lb", i) }, ContactDetail.prototype.getInputCity = function (e, t) { var r = this.getPrefillCity(e, t), o = IsChatbl(e) ? "blchat-inpt" : "be-slbox inpt_errorbx ui-autocomplete-input", i = IsChatbl(e) ? "popup" === chatBlPopupInline(e) ? "Enter your City" : "Enter City Name" : "Enter Your City", a = IsChatbl(e) ? "" : "Change Your City", s = IsChatbl(e) ? "" : "beChtxt", n = ""; (n += '<input type="text" templateId="' + e + '" name="q_city_oth" id="t' + e + '_q_city_oth" placeholder="' + i + '"+ value="' + r + '" class="' + o + ' maxlength="100" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true"', IsChatbl(e) ? n += ">" : n += ' readonly="" disabled="disabled">', IsChatbl(e)) ? (n += this.returnSubmitChatBl(e), n += this.getChatblCityErrorDiv(e)) : (n += returnInput("t" + e, "city_id_sugg", "hidden", "", "", "", "", "", ""), n += returnSpan("t" + e, "_change_city", a, s), n += this.getChatblCityErrorDiv(e)); this.ContactDetailHtmlCityObj.UserInput = n }, ContactDetail.prototype.getCityErrorDiv = function (e) { var t = ""; return t += returnContainer("t" + e, "_error_city", "beerrp1 be-erbx bedsnone", "", ""), t += returnContainer("t" + e, "_city_errmsg", "", "content", ""), t += '<a class="be-erarw" data-role="arrow"></a></div></div>', t += "</div>" }, ContactDetail.prototype.getChatblCityErrorDiv = function (e) { var t = ""; return t += returnContainer("t" + e, "_error_city", "redc bltperor", "", ""), t += returnContainer("t" + e, "_city_errmsg", "", "content", ""), t += "</div></div>" }, ContactDetail.prototype.validateUserDetails = function (e) { isSet(validation) || createGlobalObject(); var t = "", r = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"; if (ReqObj.Form[e].OnCloseStep && isSet(ReqObj.Form[e].FormSequence)) var o = ReqObj.Form[e].FormSequence.StepCounter + 1 + ReqObj.Form[e].FormSequence.OnCloseCounter + 1; else o = ReqObj.Form[e].FormSequence.StepCounter + 1; if ($("#t" + e + "_q_first_nm").length > 0 && ("" === this.nonMandatory || !1 === this.nonMandatory.name) && !(t = validation.isNameValid($("#t" + e + "_q_first_nm").val())).type) return blenqGATracking(r, "Validation_Error_Name|" + o + "|ContactDetail", getEventLabel(), 0, e), $("#t" + e + "_fname_errmsg").html(t.error), $("#t" + e + "_error_first_name").removeClass("bedsnone"), $("#t" + e + "_q_first_nm").addClass("highlight-err"), "chatbl" !== ReqObj.Form[e].formType.toLowerCase() && $("#t" + e + "_name-lb").addClass("redc"), !1; if ("IN" === this.usercountry) { if ($("#t" + e + "_q_email_in").length > 0) { var i = $("#t" + e + "_q_email_in").val(); if (!(t = validation.isEmailValid(i)).type) return blenqGATracking(r, "Validation_Error_Email|" + o + "|ContactDetail", getEventLabel(), 0, e), $("#t" + e + "_email_errmsg").html(t.error), $("#t" + e + "_err_email").removeClass("bedsnone"), $("#t" + e + "_q_email_in").addClass("highlight-err"), "chatbl" !== ReqObj.Form[e].formType.toLowerCase() && $("#t" + e + "_email-lb").addClass("redc"), !1 } if ($("#t" + e + "_q_city_oth").length > 0 && !(t = validation.isCityValid($("#t" + e + "_q_city_oth").val())).type) return blenqGATracking(r, "Validation_Error_City |" + o + "|ContactDetail", getEventLabel(), 0, e), $("#t" + e + "_city_errmsg").html(t.error), $("#t" + e + "_error_city").removeClass("bedsnone"), $("#t" + e + "_q_city_oth").addClass("highlight-err"), "chatbl" !== ReqObj.Form[e].formType.toLowerCase() && $("#t" + e + "_for-city-lb").addClass("redc"), !1 } else if ($("#t" + e + "_q_mobile_f").length > 0 && !(t = validation.isMobileChValid($("#t" + e + "_q_mobile_f").val())).type) return $("#t" + e + "_mobile_errmsg").html(t.error), $("#t" + e + "_error_mobile").removeClass("bedsnone"), $("#t" + e + "_q_mobile_f").addClass("highlight-err"), $("#t" + e + "_mobile-lb").addClass("redc"), !1; return !0 }, ContactDetail.prototype.getData = function (e) { this.cookies(e); ReqObj.Form[e].formType.toLowerCase(); var t = {}, r = currentISO(), o = usercookie.getParameterValue(this.imeshCookie, "ctid"), i = IsChatbl(e) ? ReqObj.Form[e].UserInputs.CityId : ReqObj.UserDetail.ctid; t.s_city_id = isSet(i) && "" !== i ? i : o, isSet(t.s_city_id) && "" !== t.s_city_id || (ReqObj.Form[e].cityOth = IsChatbl(e) ? ReqObj.Form[e].UserInputs.City : ReqObj.UserDetail.ctoth); var a = IsChatbl(e) ? ReqObj.Form[e].UserInputs.Name : "" !== ReqObj.UserDetail.fn ? ReqObj.UserDetail.fn : $("#t" + e + "_q_first_nm").val(); if (a = isSet(a) ? a.trim() : "") if (-1 !== a.indexOf(" ")) { var s = a.substr(0, a.indexOf(" ")); s.trim(), $("#t" + e + "_q_first_nm_hidden").val(s); var n = a.substr(a.indexOf(" ") + 1) } else $("#t" + e + "_q_first_nm_hidden").val(a); if (t.s_first_name = isSet(s) && "" !== s ? s : a, t.s_last_name = isSet(n) && "" !== n ? n : "", "IN" === r) { t.s_email = IsChatbl(e) ? ReqObj.Form[e].UserInputs.Email : ReqObj.UserDetail.em, t.s_city_name = IsChatbl(e) ? ReqObj.Form[e].UserInputs.City : ReqObj.UserDetail.cityname; var l = usercookie.getParameterValue(this.imeshCookie, "mb1"); t.s_mobile = "" !== l ? l : IsChatbl(e) ? ReqObj.Form[e].UserInputs.PrimaryInfo : ReqObj.UserDetail.mb1 } else { t.s_mobile = IsChatbl(e) ? ReqObj.Form[e].UserInputs.Mobile : ReqObj.UserDetail.mb1; l = usercookie.getParameterValue(this.imeshCookie, "em"); t.s_email = "" !== l ? l : IsChatbl(e) ? ReqObj.Form[e].UserInputs.PrimaryInfo : ReqObj.UserDetail.em } return t.s_glusrid = usercookie.getParameterValue(this.imeshCookie, "glid"), t.curr_page_url = window.location.href, t.s_ip = usercookie.getParameterValue(this.iplocCookie, "gip"), t.s_ip_country = usercookie.getParameterValue(this.iplocCookie, "gcnnm"), t.s_ip_country_iso = this.geoip_country_iso, t.flag = ReqObj.Form[e].formType, t.modid = ReqObj.Form[e].modId, t.s_country_iso = "" !== r ? r : usercookie.getParameterValue(usercookie.getCookie("iploc"), "gcniso"), ObjectTrim(t) }, ContactDetail.prototype.sendRequest = function (e, t) { var r = this.getData(t), o = "Enq" === ReqObj.Form[t].formType ? "Send Enquiry" : "Post Buy Leads"; "" === r.s_first_name && "" === r.s_mobile && "" === r.s_email && "" === r.s_city_name || $.ajax({ cache: !1, url: appsServerName + "index.php?r=Newreqform/GlusrUpdate", type: "GET", data: r, dataType: "json", success: function (r) { if (isSet(r)) if (isSet(r.msg) && isSet(r.msg.MESSAGE) && 200 === parseInt(r.msg.MESSAGE.CODE)) { var i = new UserLogin; i.sendRequest({ data: { logObject: "", tmpId: t, userlogin: i, blureve: !1, todo: "glusrupdate" } }), blenqGATracking(o, "service:GlusrUpdate:success", getEventLabel(), 1, t), PostAjax(e, t) } else blenqGATracking(o, "service:GlusrUpdate:failure", r, 1, t), PostAjax(e, t); else blenqGATracking(o, "service:GlusrUpdate:failure", "response undefined", 1, t), Ajaxfailure(e, t) }, error: function (r) { r = isSet(r) ? JSON.stringify(r) : "response undefined", blenqGATracking(o, "service:GlusrUpdate:failure", r, 1, t), Ajaxfailure(e, t) } }) }, ContactDetail.prototype.handleEvents = function (e, t) { isSet(validation) || createGlobalObject(), $(document).ready(function () { IsChatbl(t) && e.enableCity({ data: { obj: e, tmpId: t } }), $("#t" + t + "_q_first_nm").off("focus keypress.Validation").on("focus keypress.Validation", { obj: e, todo: "removeError", tmpId: t }, e.handleUI), $("#t" + t + "_q_city_oth").off("focus keypress.Validation").on("focus keypress.Validation", { obj: e, todo: "removeError", tmpId: t }, e.handleUI), $("#t" + t + "_q_email_in").off("focus keypress.Validation").on("focus keypress.Validation", { obj: e, todo: "removeError", tmpId: t }, e.handleUI), $("#t" + t + "_change_city").off("click").on("click", { obj: e, tmpId: t }, e.enableCity), $("#t" + t + "_q_mobile_f").off("keypress.Validation").on("keypress.Validation", validation.isNumberKey), $("#t" + t + "_q_mobile_f").off("focus.Validation").on("focus.Validation", { obj: e, todo: "removeError", tmpId: t }, e.handleUI), IsChatbl(t) && $("#t" + t + "_q_first_nm").focus() }) }, ContactDetail.prototype.handleUI = function (e) { if (isSet(e) && isSet(e.data) && 13 !== (e.keyCode ? e.keyCode : e.which)) { e.data.obj; var t = e.data.todo, r = e.data.tmpId; if ("nameUI" === t && "" !== $("#t" + r + "_q_first_nm").val() && ($("#t" + r + "_q_first_nm").prop("disabled", !1), $("#t" + r + "_q_first_nm").prop("readonly", !0)), "focus" === t && ($("#t" + r + "_q_first_nm").focus(), $("#t" + r + "_q_city_oth").focus(), $("#t" + r + "_q_mobile_f").focus()), "removeError" === t && ($("#t" + r + "_error_first_name").addClass("bedsnone"), $("#t" + r + "_err_email").addClass("bedsnone"), $("#t" + r + "_error_city").addClass("bedsnone"), $("#t" + r + "_q_first_nm").removeClass("highlight-err"), $("#t" + r + "_q_email_in").removeClass("highlight-err"), $("#t" + r + "_q_city_oth").removeClass("highlight-err"), $("#t" + r + "_name-lb").removeClass("redc"), $("#t" + r + "_email-lb").removeClass("redc"), $("#t" + r + "_for-city-lb").removeClass("redc"), $("#t" + r + "_error_mobile").addClass("bedsnone"), $("#t" + r + "_q_mobile_f").removeClass("highlight-err"), $("#t" + r + "_mobile-lb").removeClass("redc")), "cityOthers" === t) { r = e.data.tmpId; $("#t" + r + "_q_city_oth").val(ReqObj.Form[r].cityOth), $("#t" + r + "_q_city_oth").prop("disabled", !1) } } }, ContactDetail.prototype.enableCity = function (e) { if (isSet(e) && isSet(e.data)) { var t = e.data.obj, r = e.data.tmpId; $("#t" + r + "_q_city_oth").val(""), $("#t" + r + "_q_city_oth").prop("disabled", !1), $("#t" + r + "_q_city_oth").prop("readonly", !1), $("#t" + r + "_q_city_oth").focus(), t.showCitySuggestions(t, r) } }, ContactDetail.prototype.showCitySuggestions = function (e, t) { var r = this, o = e.usercountry; if ("undefined" == typeof Suggester) setTimeout(function () { r.showCitySuggestions(e, t) }, 50); else if ("undefined" != typeof Suggester) { $(".t" + t + "_CitySuggestor").each(function () { $(this).remove() }); var i = BlAutoSuggRowNum(t), a = SetAutoCompleteClass(t, "_CitySuggestor"); main_city_sugg = new Suggester({ element: "t" + t + "_q_city_oth", onSelect: e.selectCity, type: "city", fields: "std,state,id,stateid", minStringLengthToDisplaySuggestion: 1, rowsToDisplay: i, autocompleteClass: a, displayFields: "value,state", displaySeparator: " >> ", filters: "iso:" + o, recentData: !1 }) } }, ContactDetail.prototype.selectCity = function (e, t) { var r = $(this).attr("templateId"); $("#t" + r + "_q_city_oth").val(t.item.value), $("#t" + r + "city_id_sugg").val(t.item.data.id), ReqObj.UserDetail.statename = t.item.data.state, ReqObj.UserDetail.stateid = t.item.data.stateid, ReqObj.UserDetail.ctid = t.item.data.id, ReqObj.UserDetail.cityname = t.item.value, IsChatbl(r) && (ReqObj.Form[r].UserInputs.City = t.item.value, ReqObj.Form[r].UserInputs.CityId = t.item.data.id) }, CountrySugg.prototype.displayAnswer = function (e) { var t = chatBlClass(e, "right"), r = "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : ""; return [ConversationRightWrapper(e, returnAnswer(e, "CountryName"), { classtotest: t, leftright: r })] }, CountrySugg.prototype.onSubmit = function (e) { isSet(e) && (ReqObj.selectFromCountrySugg = !0, UpdateISO(ReqObj.ChatBl.item.data.iso, ReqObj.ChatBl.item.data.cname), reloadFlagSuggestor("load"), GetIsqFromService(e), PostAjax(PreAjax("CountrySugg", e), e)) }, CountrySugg.prototype.defaultEvents = function (e) { this.handleEvents(e, "sugg"), this.handleUI(e, "default") }, CountrySugg.prototype.handleEvents = function (e, t) { "sugg" === t && this.setCountrySuggestor(e) }, CountrySugg.prototype.handleUI = function (e, t) { "default" === t && (IsChatbl(e) && $("#t" + e + "country_input").focus(), $("#t" + e + "_country_err").addClass("bedsnone"), $("#t" + e + "_country_errmsg").html("")) }, CountrySugg.prototype.SaveDetails = function (e, t) { ReqObj.changeUserCountry = ReqObj.ChatBl.item.label }, CountrySugg.prototype.displayHtml = function (e) { return [this.countrysugghtml] }, CountrySugg.prototype.addHtmlToArray = function (e) { this.CountrySuggHtmlObjArray.push(e) }, CountrySugg.prototype.validate = function (e) { if (isSet(e)) { var t = validation.isCountryValid(ReqObj.Form[e].UserInputs.CountryName, e); return !!t.type || ($("#t" + e + "_country_errmsg").html(t.error), $("#t" + e + "_country_err").removeClass("bedsnone"), !1) } }, CountrySugg.prototype.hasHtml = function (e) { var t = e.tmpId; this.addHtmlToArray(this.getHtml(t)); var r = { SuffixOuterHtml: "<div>", SuffixClosingHtml: "</div>", suffix: "" }; this.countrysugghtml = MakeWrapper([this.CountrySuggHtmlObjArray], t, r), "" !== this.countrysugghtml ? this.ifHtmlPresent(e, t) : this.ifHtmlNotPresent(e, t) }, CountrySugg.prototype.ifHtmlPresent = function (e, t) { if (e.that.NumberofClassCalled -= 1, AttachObject(e.object, t), isSet(e.AfterService)) for (var r = 0; r < e.AfterService.length; r++)e.that.MakeSeq(e.AfterService[r], t); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, t) }, CountrySugg.prototype.ifHtmlNotPresent = function (e, t) { e.hasFallback ? CreateSeq(e.FallbackObj) : e.that.NumberofClassCalled -= 1 }, CountrySugg.prototype.toUpdate = function (e, t) { return usercookie.getCookie("ImeshVisitor"), !0 }, CountrySugg.prototype.getCountryName = function (e, t) { var r = ""; r += "Please enter your Country", this.CountrySuggHtmlObj.Label = r, r = ""; var o = ""; return o = returnContainer("", "", "chat-arrow", "", ""), "chat-arowicon1", r += '<input type="text" templateId="' + e + '" name="country_input" id="t' + e + 'country_input" placeholder="" value="" class="blchat-inpt" maxlength="100" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true">', r += returnButton("t" + e, "_submit", o += "</div>", "chat-arowicon1"), r += returnContainer("t" + e, "_country_err", "bltperor bedsnone", "", ""), r += returnContainer("t" + e, "_country_errmsg", "", "content", ""), this.CountrySuggHtmlObj.UserInput += r, this.CountrySuggHtmlObj.OuterWrapper = (IsChatbl(e), ""), this.CountrySuggHtmlObj.ClosingWrapper = (IsChatbl(e), ""), this.CountrySuggHtmlObj }, CountrySugg.prototype.getHtml = function (e) { var t = ReqObj.Form[e].formType.toLowerCase(); return this.getCountryName(e, t) }, CountrySugg.prototype.setCountrySuggestor = function (e) { var t = this; if ("undefined" == typeof Suggester) setTimeout(function () { t.setCountrySuggestor(e) }, 50); else if ("undefined" != typeof Suggester) { var r = SetAutoCompleteClass(e, "_CountrySugg"), o = BlAutoSuggRowNum(e); country_sugg = new Suggester({ element: "t" + e + "country_input", onSelect: t.selectCountry, placeholder: "Enter Country", classPlaceholder: "ui-placeholder-input", minStringLengthToFetchSuggestion: 1, updateCache: !1, type: "country", fields: "isd,iso", minStringLengthToDisplaySuggestion: 1, rowsToDisplay: o, autocompleteClass: r }) } }, CountrySugg.prototype.selectCountry = function (e, t) { var r = $(this).attr("templateId"); ReqObj.ChatBl.item = t.item, ReqObj.Form[r].UserInputs.CountryName = t.item.label, ReqObj.selectFromCountrySugg = !0, $("#t" + r + "_country_err").addClass("bedsnone"), $("#t" + r + "_country_errmsg").html("") }, FormSeq.prototype.Enqinline = function (e) { this.NumberofClassCalled = 2, ReqObj.Form[e].IsqStep1 = ReturnCorrectVal(ReqObj.Form[e].IsqStep1, 3), ReqObj.Form[e].IsqStepN = ReturnCorrectVal(ReqObj.Form[e].IsqStepN, 2), updateEnrichShownKey(e, !0, !1); var t = { pre: [], post: [] }, r = { UiArray: this.arraySeq, ServiceArray: this.ServiceSequence }; if ("product" === ReqObj.Form[e].modrefType.toLowerCase() && "-126" === ReqObj.Form[e].afflId && ($("#t" + e + "_q_comp_sec").removeClass("bedsnone"), $("#t" + e + "_q_comp_name").val(ReqObj.Form[e].rcvName)), t = { pre: [this.InlineOpenForm, this.SubsequentStep], post: [] }, "01" === e.substring(0, 2)) { if (ShowProdName(e)) { this.NumberofClassCalled += 1, t = { pre: [], post: [] }, usercookie.getCookie("ImeshVisitor") && (t = { pre: [], post: [this.InlineOpenForm, this.SubsequentStep] }); var o = { object: { obj: new ProductName(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(o), t = { pre: [], post: [] }; var i = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(i) } if (usercookie.getCookie("ImeshVisitor")) { this.NumberofClassCalled -= 1; var a = $("#t" + e + "_byrinfoIn").html(get_buyer_info(e)); 1 === parseInt(ReqObj.Form[e].BuyerInfo) && a.removeClass("bedsnone") } else { t.pre = [], t.post = [this.InlineOpenForm, this.SubsequentStep]; var s = { object: { obj: new UserLogin(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(s), t.pre = [], t.post = [] } if (ShowNameField(e)) { t = { pre: [], post: [] }; var n = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }, l = "IN" === currentISO(), c = { object: { obj: new ContactDetail(1, 0, 0), toReplace: !1, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [n], hasFallback: !1, FallbackObj: null, nonMandatory: { name: l } }; this.MakeSeq(c) } else this.NumberofClassCalled -= 1, this.FullServiceArray.push(r.ServiceArray), ReqObj.Form[e].UiArray.push(r.UiArray), this.getStep(e) } else { if (usercookie.getCookie("ImeshVisitor")) { this.NumberofClassCalled -= 1; a = $("#t" + e + "_byrinfoIn").html(get_buyer_info(e)); 1 === parseInt(ReqObj.Form[e].BuyerInfo) && a.removeClass("bedsnone") } else { t.pre = [], t.post = [this.InlineOpenForm, this.SubsequentStep]; s = { object: { obj: new UserLogin(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(s), t.pre = [], t.post = [] } this.NumberofClassCalled += 1; i = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (this.MakeSeq(i), ShowNameField(e)) { t = { pre: [], post: [] }; n = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }, l = "IN" === currentISO(), c = { object: { obj: new ContactDetail(1, 0, 0), toReplace: !1, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [n], hasFallback: !1, FallbackObj: null, nonMandatory: { name: l } }; this.MakeSeq(c) } else this.NumberofClassCalled -= 1; if (ShowReqBox(e)) { t = { pre: [], post: [] }; var u = { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(u) } else this.NumberofClassCalled -= 1, this.FullServiceArray.push(r.ServiceArray), ReqObj.Form[e].UiArray.push(r.UiArray), this.getStep(e) } }, FormSeq.prototype.Enqpopup = function (e) { ReqObj.Form[e].IsqStep1 = ReturnCorrectVal(ReqObj.Form[e].IsqStep1, 3), ReqObj.Form[e].IsqStepN = ReturnCorrectVal(ReqObj.Form[e].IsqStepN, 2), updateEnrichShownKey(e, "IN" === currentISO(), !1); var t = { pre: [], post: [] }, r = { UiArray: this.arraySeq, ServiceArray: this.ServiceSequence }; if (usercookie.getCookie("ImeshVisitor")) { if (usercookie.getCookie("imEqGl") && ShowOtp()) this.NumberofClassCalled = 1, t.pre = [], t.post = [this.SubsequentStep], CreateSeq({ object: { obj: new UserVerification(e), toReplace: !0, objHtmlId: e + "_otpbox", isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }); else if ($("#t" + e + "_byrinfo").html(get_buyer_info(e)).removeClass("bedsnone"), ShowProdName(e)) { this.NumberofClassCalled = 2, t = { pre: [], post: [this.SubsequentStep] }; l = { object: { obj: new ProductName(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(l), t = { pre: [], post: [] }; c = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (this.MakeSeq(c), ReqObj.Form[e].disableIsq) { this.NumberofClassCalled = 1, r = { UiArray: [], ServiceArray: [] }, t.pre = [this.OnCloseSeq], t.post = [], CreateSeq(o = { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } else { t.pre = [], t.post = []; var o = { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (ShowIsq(e)) CreateSeq(u = { object: { obj: ReqObj.Form[e].GlobalIsqObject, array: r, hooks: t, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: o }); else if (ShowStaticQuestionForeign(e)) if (ReqObj.Form[e].flags.isEnrichShown.isStaticShown && ReqObj.Form[e].flags.isDescDivShown) this.OnCloseSeq(e); else { var i = { pre: [this.OnCloseSeq], post: [] }; t = { pre: [], post: [] }; if (ReqObj.Form[e].flags.isEnrichShown.isStaticShown || ReqObj.Form[e].flags.isDescDivShown || (this.NumberofClassCalled += 1), !ReqObj.Form[e].flags.isEnrichShown.isStaticShown) { var a = { obj: new BlStaticQues(e), toReplace: !0, isService: !1, array: r }; 1 === this.NumberofClassCalled ? a.hooks = i : 2 === this.NumberofClassCalled && (a.hooks = t), CreateSeq({ object: a, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } if (!ReqObj.Form[e].flags.isDescDivShown) t.pre = [this.OnCloseSeq], t.post = [], CreateSeq(o = { object: { obj: new RequirementDtl(e, "isq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1 }, nextStep: ReqObj.Form[e].NextStep }) } else ShowReqBox(e) && CreateSeq(o) } } else if ("IN" !== currentISO() && !ReqObj.UserDetail.fn || NEC() && "IN" === currentISO()) { t.pre = [this.SubsequentStep], t.post = []; var s = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (this.MakeSeq(s), NEC()) { this.NumberofClassCalled = 1, t = { pre: [], post: [] }; p = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if ("IN" !== currentISO()) b = { object: { obj: new ContactDetail(1, 0, 0), toReplace: !1, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [p], hasFallback: !1, FallbackObj: null }; else b = { object: { obj: new ContactDetail(1, 1, 1), toReplace: !1, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [p], hasFallback: !1, FallbackObj: null }; CreateSeq(b) } } else if (ReqObj.Form[e].disableIsq) { this.NumberofClassCalled = 1, t.pre = [this.OnCloseSeq], t.post = []; s = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (this.MakeSeq(s), returnIsEnrichShownKeyVal(e) && !ReqObj.Form[e].flags.isDescDivShown ? this.NumberofClassCalled = 2 : this.NumberofClassCalled = 1, !ReqObj.Form[e].flags.isDescDivShown) t.pre = [], t.post = [], CreateSeq(o = { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }); if (returnIsEnrichShownKeyVal(e) && "1" === ReqObj.Form[e].showAttachment) t.pre = [], t.post = [], CreateSeq({ object: a = { obj: new BlStaticQues(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }); else returnIsEnrichShownKeyVal(e) && "1" !== ReqObj.Form[e].showAttachment && (this.NumberofClassCalled -= 1, this.FullServiceArray.push(r.ServiceArray), ReqObj.Form[e].UiArray.push(r.UiArray), this.getStep(e)) } else { this.NumberofClassCalled = 1, t.pre = [this.SubsequentStep], t.post = []; s = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(s), t.pre = [], t.post = []; o = { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (ShowIsq(e)) CreateSeq(u = { object: { obj: ReqObj.Form[e].GlobalIsqObject, array: r, hooks: t, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: o }); else if (ShowStaticQuestionForeign(e)) if (returnIsEnrichShownKeyVal(e) || !ReqObj.Form[e].flags.isDescDivShown) { i = { pre: [this.OnCloseSeq], post: [] }, t = { pre: [], post: [] }; if (returnIsEnrichShownKeyVal(e) && !ReqObj.Form[e].flags.isDescDivShown && (this.NumberofClassCalled += 1), returnIsEnrichShownKeyVal(e)) { a = { obj: new BlStaticQues(e), toReplace: !0, isService: !1, array: r }; 1 === this.NumberofClassCalled ? a.hooks = i : 2 === this.NumberofClassCalled && (a.hooks = t), CreateSeq({ object: a, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } if (!ReqObj.Form[e].flags.isDescDivShown) t.pre = [this.OnCloseSeq], t.post = [], CreateSeq(o = { object: { obj: new RequirementDtl(e, "isq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1 }, nextStep: ReqObj.Form[e].NextStep }) } else this.OnCloseSeq(e); else ShowReqBox(e) && CreateSeq(o) } } else { this.NumberofClassCalled = 3, t.post = [this.SubsequentStep]; var n = { object: { obj: new UserLogin(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (this.MakeSeq(n), ShowProdName(e)) { t = { pre: [], post: [] }; var l = { object: { obj: new ProductName(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(l) } else this.NumberofClassCalled -= 1; t = { pre: [], post: [] }; var c = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; if (this.MakeSeq(c), GenOnClick(e) && "" === usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "iso")) { var u = { object: { obj: ReqObj.Form[e].GlobalIsqObject, array: r, hooks: t, isService: !0 }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(u), SavePropIsq(e) } var m = currentISO(); if (usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn") || "IN" === m) this.NumberofClassCalled -= 1, this.FullServiceArray.push(r.ServiceArray), ReqObj.Form[e].UiArray.push(r.UiArray), this.getStep(e); else { t = { pre: [], post: [] }; var p = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }, b = { object: { obj: new ContactDetail(1, 0, 0), toReplace: !1, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [p], hasFallback: !1, FallbackObj: null }; this.MakeSeq(b) } } }, FlagSuggestor.prototype.returnISO = function (e) { var t = usercookie.getParameterValue(usercookie.getCookie("iploc"), "gcniso"), r = usercookie.getParameterValue(usercookie.getCookie("iploc"), "gcnnm"); if (isSet(ReqObj.changeUserIso)) return "" === ReqObj.changeUserIso ? UpdateISO(t, r) : "iploc" === e.trim() && "" !== t && ReqObj.changeUserIso !== t ? UpdateISO(t, r) : !0 !== ReqObj.selectFromCountrySugg && !0 !== ReqObj.changeFlag || UpdateISO(ReqObj.changeUserIso, ReqObj.changeUserCountry), ReqObj.changeUserIso }, FlagSuggestor.prototype.isHtmlPresent = function (e) { return $("#t" + e + "_Country_dropdown").length > 0 }, FlagSuggestor.prototype.toFlaseFlagHit = function (e, t) { return !((!0 !== ReqObj.Form[e].flags.isFlagSuggSet && !1 !== ReqObj.Form[e].flags.isFlagSuggSet || !this.isHtmlPresent(e) || t === this.countryiso[e]) && !1 !== ReqObj.Form[e].flags.isFlagSuggSet) }, FlagSuggestor.prototype.setFlagSuggestor = function (e, t) { var r = this; r.tmpId = e, r.changeToUpdateStatus(t.trim()), addTemplates(e); var o = r.returnISO(t); if (r.toFlaseFlagHit(e, o) && (r.flaghit[e] = !1, $("#t" + e + "_Country_dropdown").html("")), "" === usercookie.getCookie("ImeshVisitor") && !r.flaghit[e]) { var i = "sugg_isd_" + e; if ("undefined" == typeof Suggester) setTimeout(function () { r.setFlagSuggestor(e, t) }, 50); else if ("object" != typeof i) { r.flaghit[e] = !0, r.countryiso[e] = o; var a = setInterval(function () { if ("undefined" != typeof Suggester) { var t = SetAutoCompleteClass(e, "_FlagSuggestor"), s = BlAutoSuggRowNum(e); r.tmpId = e, window[i] = new Suggester({ type: "isd", element: "t" + e + "_Country_dropdown", onSelect: setCountryISO, fields: "cname,iso,icon_order", displayFields: "cname,value", displaySeparator: "  +", defaultValue: isSet(o) && "" !== o ? o : "IN", rowsToDisplay: s, autocompleteClass: t }), JSON.stringify(i) && (isSet(ReqObj.Form[e].flags) && (ReqObj.Form[e].flags.isFlagSuggSet = !0), clearInterval(a)) } }, 1e3) } } }, FlagSuggestor.prototype.isChangeFromSuggestor = function (e, t) { return "" !== ReqObj.changeUserIso && ReqObj.changeUserIso !== t.data.iso && (UpdateISO(t.data.iso, t.data.cname), ReqObj.changeFlag = !0, !0) }, FlagSuggestor.prototype.changeToUpdateStatus = function (e) { var t = flagsugg; "iploc" === e || "load" === e ? t.toupdate[t.tmpId] = !1 : "changeflag" === e && (t.toupdate[t.tmpId] = !0) }, FlagSuggestor.prototype.returnToUpdateStatus = function () { var e = flagsugg; return e.toupdate[e.tmpId] }, FlagSuggestor.prototype.setCountry = function (e, t) { for (var r = flagsugg, o = isSet(template_array) ? template_array.length : 0, i = 0; i < o; i++)r.selectCountryISO(template_array[i], t) }, FlagSuggestor.prototype.sequenceUpdate = function (e, t) { var r = !1; usercookie.getCookie("ImeshVisitor") || (ReqObj.TempName = ""); for (var o = isSet(template_array) ? template_array.length : 0, i = 0; i < o; i++) { isSet(ReqObj.Form[template_array[i]].flags) ? IsChatbl(template_array[i]) ? r = ReqObj.Form[template_array[i]].flags.isCountryFlagSuggSet : ReqObj.Form[template_array[i]].flags.isFlagSuggSet && (r = !0) : r = !1; r && !0 && (-1 === $.inArray(template_array[i].substring(0, 2), BlPopup) && (ReqObj.Form[template_array[i]].flags.isFlagSuggSet = !1, formToUpdate(template_array[i])), "09" === template_array[i].substring(0, 2) && $("#t" + template_array[i] + "_bewrapper").length > 0 && "table" == $("#t" + template_array[i] + "_bewrapper").css("display") && (ReqObj.Form[template_array[i]].flags.isFlagSuggSet = !1, addBlLoader(template_array[i], "left"), AfterFormDefaults(template_array[i]))) } }, FlagSuggestor.prototype.selectCountryISO = function (e, t) { var r = ReqObj.Form[e].formType.toLowerCase(); if ($("#t" + e + "_Country_dropdown dt a span").attr("style", "background-position:0px -" + 11 * t.data.icon_order + "px"), IsChatbl(e) && $("#t" + e + "_Country_dropdown dt a div").hasClass("as_arrow") && $("#t" + e + "_Country_dropdown dt a div").addClass("bedsnone"), this.valuesOnSelecting(e, t), isSet(validation) || createGlobalObject(), t.value) { var o = "India" === t.data.cname ? "Mobile" : "Email", i = "India" === t.data.cname ? o + " Number" : o + " ID", a = IsChatbl(e) ? "Okay, Please Share your " + i : i, s = "Enter your " + o.toLowerCase(); if (!IsChatbl(e)) { var n = "India" === t.data.cname ? "mobile number" : "email"; $("#t" + e + "_helpmsg").html("Seller details will be sent on this " + n) } $("#t" + e + "_label-l").html(a), $("#t" + e + "_login_field").attr("placeholder", s), $("#t" + e + "_login_field").val(""), "India" === t.data.cname ? (ReqObj.Form[e].isTNCShownOnFirstStep = !1, $("#t" + e + "_iso").attr("value", ReqObj.isoFlag).removeClass("bedsnone"), $("#t" + e + "_tCond").addClass("bedsnone"), "chatbl" !== r && $("#t" + e + "_submit").removeAttr("disabled").attr("style", "background-color : rgb(0, 166, 153)"), $("#t" + e + "_login_field").on("keypress", validation.isNumberKey).removeClass("highlight-err").removeClass("beemail"), $("#t" + e + "_msg_primary_info_err_login").addClass("bedsnone")) : ($("#t" + e + "_iso").addClass("bedsnone"), ReqObj.Form[e].isTNCShownOnFirstStep = !0, ShowHideTNC(e), $("#t" + e + "_login_field").off("keypress").removeClass("highlight-err").addClass("beemail"), $("#t" + e + "_msg_primary_info_err_login").addClass("bedsnone"), IsChatbl(e) && $("#t" + e + "_Country_dropdown").removeClass("bedsnone")), IsChatbl(e) && ShowHideTNC(e) } }, FlagSuggestor.prototype.valuesOnSelecting = function (e, t) { UpdateISO(t.data.iso, t.data.cname), ReqObj.isoFlag = "+" === t.value.substring(0, 1) ? t.value : "+" + t.value, this.countryiso[e] = ReqObj.changeUserIso }, FormSeq.prototype.OnCloseSeq = function (e) { var t = ""; this.OnCloseServiceArray = [], ReqObj.Form[e].OnCloseArray = [], ReqObj.Form[e].OnCloseStep = !0, this.OnCloseCounter = -1, this.NumberofClassCalled = 4; if (ReqObj.Form[e].flags.IsFirstStep = !1, isSet(ReqObj.Form[e].UiArray[this.StepCounter])) for (var r = 0; r < ReqObj.Form[e].UiArray[this.StepCounter].length; r++)t += ConstructorName(ReqObj.Form[e].UiArray[this.StepCounter][r].Obj); var o = { pre: [], post: [], current: [] }, i = { UiArray: [], ServiceArray: [] }; if (ShowOtp() && !ReqObj.Form[e].flags.isOtpShown) { o.pre = [], o.post = [this.OnClosegetStep]; var a = { object: { obj: new UserVerification(e), toReplace: !1, isService: !1, array: i, hooks: o }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(a), this.OnCloseServiceArray.push(i.ServiceArray), ReqObj.Form[e].OnCloseArray.push(i.UiArray) } if (NEC() && "ContactDetail" !== t) { i = { UiArray: [], ServiceArray: [] }; o.pre = [this.OnClosegetStep], o.post = []; var s = { object: { obj: new ContactDetail(1, 1, 1), toReplace: !1, isService: !1, array: i, hooks: o }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(s), o.pre = [], o.post = []; var n = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: i, hooks: o }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(n), this.OnCloseServiceArray.push(i.ServiceArray), ReqObj.Form[e].OnCloseArray.push(i.UiArray) } i = { UiArray: [], ServiceArray: [] }; o.pre = [], o.post = []; var l = { object: { obj: new ThankYou(e), toReplace: !1, objHtmlId: e + "_thankDiv", isService: !1, array: i, hooks: o }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; this.MakeSeq(l), this.OnCloseServiceArray.push(i.ServiceArray), ReqObj.Form[e].OnCloseArray.push(i.UiArray), this.OnClosegetStep(e) }, FormSeq.prototype.OnClosegetStep = function (e) { this.getStep(e, !0) }, Generation.prototype.defaultEvents = function () { }, Generation.prototype.onSubmit = function (e) { this.cookies(), 1 === this.arg && this.intentGeneration(e), 0 === this.arg && this.blEnqGeneration(e) }, Generation.prototype.cookies = function () { this.imeshCookie = usercookie.getCookie("ImeshVisitor"), this.imEqGlCookie = usercookie.getCookie("imEqGl"), this.iplocCookie = usercookie.getCookie("iploc"), this.v4iilexCookie = usercookie.getCookie("v4iilex"), this.geoLocCookie = usercookie.getCookie("GeoLoc"), this.iso = usercookie.getParameterValue(this.imeshCookie, "iso") }, Generation.prototype.getData = function (e) { var t = {}, r = 0 !== ReqObj.loginMode ? ReqObj.loginMode : (new LoginMode).getLoginMode(), o = IsChatbl(e) ? "BL" : ReqObj.Form[e].formType; (t = 1 === this.arg ? this.getIntentData(e) : 0 === this.arg ? this.getBLEnqData(o, e) : {}).modid = ReqObj.Form[e].modId, t.mcatID = ReqObj.Form[e].mcatId, t.catID = ReqObj.Form[e].catId, t.login_mode = r, t.s_glusrid = usercookie.getParameterValue(this.imeshCookie, "glid"), t.s_country_iso = this.iso, t.s_ip_country = usercookie.getParameterValue(this.iplocCookie, "gcnnm"), t.s_ip = usercookie.getParameterValue(this.iplocCookie, "gip"), t.s_ip_country_iso = usercookie.getParameterValue(this.iplocCookie, "gcniso"), t.curr_page_url = window.location.href, t.landing_ref_url = usercookie.getCookie("site-entry-page"), t.prev_page_url = document.referrer, t.s_country_name = void 0 !== ReqObj.changeUserCountry && "" !== ReqObj.changeUserCountry ? ReqObj.changeUserCountry : "", "" !== this.geoLocCookie && (t.lat = usercookie.getParameterValue(this.geoLocCookie, "lt"), t.long = usercookie.getParameterValue(this.geoLocCookie, "lg"), t.lt_lg_accu = usercookie.getParameterValue(this.geoLocCookie, "accu")); var i = isSet(ReqObj.Form[e].CefProdType) ? ReqObj.Form[e].CefProdType : "", a = isSet(ReqObj.Form[e].prodServ) ? ReqObj.Form[e].prodServ : "", s = isSet(i) && "" !== i ? i : isSet(a) ? a : "P", n = ReqObj.Form[e].perWidget, l = ReqObj.Form[e].industry_ques, c = ReqObj.Form[e].refText; return isSet(n) ? t.rfq_query_ref_text = perWidget : isSet(l) && "" !== l ? t.rfq_query_ref_text = c + l + "|" + s + "|" : t.rfq_query_ref_text = c + "|" + s + "|", ObjectTrim(t) }, Generation.prototype.getBLEnqData = function (e, t) { var r = {}; if ("BL" === e || IsChatbl(t)) { var o = ReqObj.Form[t].prodName, i = $("#t" + t + "prodtitle").val(); r.s_prod_name = o !== i && void 0 !== i && "" !== i ? i : o } var a = usercookie.getParameterValue(this.imeshCookie, "fn"); "" === a ? (r.s_name = $("#t" + t + "_q_first_nm").length > 0 ? $("#t" + t + "_q_first_nm").val() : ReqObj.UserDetail.fn, IsChatbl(t) && (r.s_name = ReqObj.Form[t].UserInputs.Name)) : r.s_name = a, r.s_first_name = r.s_name, "IN" === this.iso ? (a = usercookie.getParameterValue(this.imeshCookie, "mb1"), r.s_mobile = "" !== a ? a : $("#t" + t + "_q_mobile").length > 0 ? $("#t" + t + "_q_mobile").val() : ReqObj.UserDetail.mb1) : (a = usercookie.getParameterValue(this.imeshCookie, "em"), r.s_email = "" !== a ? a : $("#t" + t + "_q_email").length > 0 ? $("#t" + t + "_q_email").val() : ReqObj.UserDetail.em), r.rfq_search_keyword = ReqObj.Form[t].ss; var s = usercookie.getCookie("adcamp"), n = usercookie.getCookie("emktg"); if (r.source_campaign = "", "" !== s) { var l = usercookie.getParameterValue(s, "adcmp"); r.source_campaign = r.source_campaign + s, r.adcmp = l } if ("" !== n) { var c = usercookie.getParameterValue(n, "Affliate_id"); r.source_campaign = "" === r.source_campaign ? "emktg" + c : r.source_campaign + "|emktg" + c } r.city_others = "" !== ReqObj.UserDetail.ctid ? "" : ReqObj.UserDetail.cityname, r.state_others = "", r.prod_serv = ReqObj.Form[t].prodServ, r.flag = e, r.afflid = ReqObj.Form[t].afflId, r.s_city_name = $("#t" + t + "_q_city_oth").length > 0 ? $("#t" + t + "_q_city_oth").val() : ReqObj.UserDetail.cityname, "IN" === currentISO() && (r.s_state_name = isSet(ReqObj.UserDetail.statename) && "" !== ReqObj.UserDetail.statename ? ReqObj.UserDetail.statename : usercookie.getParameterValue(this.iplocCookie, "gstnm")), r.s_city_id = usercookie.getParameterValue(this.imeshCookie, "ctid"); var u = { 1399: 0, 1299: -1, 1879: 0, 1890: 0, 1999: 0, 4299: 0, 149: -1, 2199: -1, 199: -1, 1199: -1, 1899: 0, 3299: 0, 699: -1, 1499: -1, 2399: -1, 1869: 0, 179: -1, 700: -1, 750: -1 }, m = ReqObj.Form[t].rcvCustType; if (r.category_type = void 0 !== u[m] && 0 === u[m] ? "f" : "p", "Enq" === e) { r.r_glusrid = ReqObj.Form[t].rcvGlid, r.modref_id = ReqObj.Form[t].pDispId, r.modref_type = ReqObj.Form[t].modrefType ? ReqObj.Form[t].modrefType : "P" === ReqObj.Form[t].prodServ ? 1 : 2, r.s_company = ReqObj.Form[t].C_S_organization, r.s_prod_name = ReqObj.Form[t].prodName; var p = ReqObj.Form[t].prodDispName; r.s_prod_dispname = void 0 !== p && "" !== p && null !== p && "null" !== p ? p : "" } return "R" !== ReqObj.Form[t].insert && "U" !== ReqObj.Form[t].insert || (r.flag = "R", r.req_id = ReqObj.Form[t].generationId), r }, Generation.prototype.getIntentData = function (e) { var t = {}, r = (t = { modref_type: ReqObj.Form[e].modrefType, modref_id: ReqObj.Form[e].pDispId, r_glusrid: ReqObj.Form[e].rcvGlid, s_prod_name: ReqObj.Form[e].prodName, s_first_name: usercookie.getParameterValue(this.imeshCookie, "fn") }, ReqObj.Form[e].reqSent); if ("enq" === ReqObj.Form[e].formType.toLowerCase()) { r = ReqObj.Form[e].reqSent; t.flag = "Yes" === r || "yes" === r || 1 === r ? 12 : 1 } else if ("bl" === ReqObj.Form[e].formType.toLowerCase()) { var o = ReqObj.Form[e].BLIntent.toLowerCase(); "yes" === o && "mcat video" === ReqObj.Form[e].ctaName.toLowerCase() && (t.flag = 16), "yes" === o && "mcat video" !== ReqObj.Form[e].ctaName.toLowerCase() && (t.flag = 14) } return "IN" === this.iso ? t.s_mobile = usercookie.getParameterValue(this.imeshCookie, "mb1") : t.s_email = usercookie.getParameterValue(this.imeshCookie, "em"), t }, Generation.prototype.intentGeneration = function (e) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"; if ("" !== this.imeshCookie) { var r = this.getData(e); r.form_type = t, r.tmpId = e, GenerateIntent(r) } }, Generation.prototype.blEnqGeneration = function (e) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"; if (-2 === ReqObj.Form[e].mcatId || !isSet(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "glid")) || "" === usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "glid") || ReqObj.Form[e].generationId > 1 && "R" !== ReqObj.Form[e].insert && "U" !== ReqObj.Form[e].insert) GenOnClick(e) && ReqObj.Form[e].generationId > 1 && "R" !== ReqObj.Form[e].insert && "U" !== ReqObj.Form[e].insert ? PostAjax(o = PreAjax("Generation", e), e) : SpliceObject("Generation", ReqObj.Form[e].ServiceSequence); else if (ReqObj.Form[e].generationCalled) SpliceObject("Generation", ReqObj.Form[e].ServiceSequence); else { var r = this.getData(e); if ("IN" === currentISO() || isSet(r.s_first_name) || r.s_first_name) if (isSet(r.s_prod_name) || r.s_prod_name || isSet(ReqObj.Form[e].modrefType) && (!isSet(ReqObj.Form[e].modrefType) || "product" !== ReqObj.Form[e].modrefType.toLowerCase())) { termNcdata(e), ReqObj.Form[e].generationCalled = !0; var o = PreAjax("Generation", e); if ("Enq" === ReqObj.Form[e].formType && void 0 !== this.imEqGlCookie && "" === this.imEqGlCookie && "V" !== usercookie.getParameterValue(this.imeshCookie, "uv") && "IN" === usercookie.getParameterValue(this.imeshCookie, "iso")) { var i = isSet(ReqObj.Form[e].enquiryDivID) && "" !== ReqObj.Form[e].enquiryDivID ? ReqObj.Form[e].enquiryDivID : "dispid" + ReqObj.Form[e].pDispId; usercookie.setCookie("imEqGl", i, "1", ReqObj.Form[e].modId) } "R" !== ReqObj.Form[e].insert && "U" !== ReqObj.Form[e].insert || ReqObj.Form[e].generationId >= 1 && (r.req_id = ReqObj.Form[e].generationId, r.flag = ReqObj.Form[e].insert), IsChatbl(e) && (r.flag = "BL"), $.ajax({ cache: !1, url: appsServerName + "index.php?r=Newreqform/Postreq", type: "GET", dataType: "json", data: r, success: function (r) { if (isSet(r) && "I" === ReqObj.Form[e].insert) if ("Enq" === ReqObj.Form[e].formType) var i = ValidGenId(r.queryid); else if (IsFormBL(e)) i = ValidGenId(r.ofr); isSet(r) && isSet(ReqObj.Form[e].insert) && ("I" === ReqObj.Form[e].insert && i || "I" !== ReqObj.Form[e].insert) ? ("Enq" === ReqObj.Form[e].formType && "I" === ReqObj.Form[e].insert ? (ReqObj.Form[e].generationId = SanitizeId(r.queryid), ReqObj.Form[e].query_destination = r.query_destination, blenqGATracking(t, "service:Enquiry generation:success", getEventLabel(), 1, e), disableEnquiryButton(e), appendImEqGlCookie(e)) : IsFormBL(e) && "I" === ReqObj.Form[e].insert ? (ReqObj.Form[e].generationId = SanitizeId(r.ofr), blenqGATracking(t, "service:BL generation:success", getEventLabel(), 1, e)) : blenqGATracking(t, "service:BL Update generation:success", getEventLabel(), 1, e), PostAjax(o, e)) : ("Enq" === ReqObj.Form[e].formType && "I" === ReqObj.Form[e].insert ? blenqGATracking(t, "service:Enquiry Generation:failure", "response undefined", 1, e) : IsFormBL(e) && "I" === ReqObj.Form[e].insert ? blenqGATracking(t, "service:BL Generation:failure", "response undefined", 1, e) : blenqGATracking(t, "service:BL Update Generation:failure", "response undefined", 1, e), Ajaxfailure(o, e)) }, error: function (r) { Ajaxfailure(o, e); var i = isSet(r) ? r : "response undefined"; "Enq" === ReqObj.Form[e].formType && "I" === ReqObj.Form[e].insert ? blenqGATracking(t, "service:Enquiry Generation:failure", i, 1, e) : IsFormBL(e) && "I" === ReqObj.Form[e].insert ? blenqGATracking(t, "service:BL Generation:failure", i, 1, e) : blenqGATracking(t, "service:BL Update Generation:failure", i, 1, e), usercookie.deleteCookie("imEqGl"), $("#t" + e + "_cls").off("click").on("click", function () { CloseForm(e) }) } }) } else SpliceObject("Generation", ReqObj.Form[e].ServiceSequence); else SpliceObject("Generation", ReqObj.Form[e].ServiceSequence) } }; var ReqObj = { Form: {}, Original: {}, TempNumber: "", TempName: "", OverlayHtml: "", UserDetail: { fn: "", em: "", ctid: "", mb1: "", uv: "", ctoth: "", cityname: "", ipctid: "", ipcityname: "", statename: "", stateid: "" }, UserHtml: {}, changeUserIso: "", changeUserCountry: "", isoFlag: "", isTNCShownOnFirstStep: !1, updateImage: 0, IsqCalled: [], userType: "", loginMode: 0, chatBlSequence: "", selectFromCountrySugg: !1, submitFromCountrySugg: !1, changeFlag: !1, ImageKey: {}, isMouseDownFired: !1, ChatBl: { item: "" } }, TreeConfig = { ProductName: [], UserLogin: [], Generation: ["UserLogin", "ProductName", "UserVerification", "ProdNameQuestionObject"], Isq: ["Generation"], PostBlEnqUpdate: ["Generation"], ContactDetail: ["UserLogin"], UserVerification: ["UserLogin"], RequirementDtl: ["Generation"], BlStaticQues: ["Generation"] }, PnameDependent = ["Isq", "RequirementDtl"], BtnType = { ProductName: { order: 2, text: "Submit", class: "form-btn", parent: "befstgo2" }, UserLogin: { order: 1, text: "Go", class: "befstbtn", parent: "befstgo" }, Isq: { order: 4, text: "Next", class: "form-btn", parent: "befstgo2" }, ContactDetail: { order: 3, text: "Submit", class: "form-btn", parent: "befstgo2" }, UserVerification: { order: 5, text: "Confirm Requirement", class: "blotpbtn", parent: "befstgo3" }, RequirementDtl: { order: 4, text: "Next", class: "form-btn", parent: "befstgo2" }, ThankYou: { order: 10, text: "Next", class: "form-btn", parent: "befstgo2" } }, Templateconfig = { "01": { istitleEditable: !0, isTitleSuggSet: !1, isFlagSuggSet: !1, isOtpShown: !1, isNECShown: !1, isDescDivShown: !1, isEnrichShown: { isStaticShown: !1, isAttachmentShown: !1 }, WasProdNamePresent: !1, autofocusPName: !1, isCountryFlagSuggSet: !1, IsFirstStep: !1 }, "02": { istitleEditable: !0, isTitleSuggSet: !1, isFlagSuggSet: !1, isOtpShown: !1, isNECShown: !1, isDescDivShown: !1, isEnrichShown: { isStaticShown: !1, isAttachmentShown: !1 }, WasProdNamePresent: !1, autofocusPName: !1, isCountryFlagSuggSet: !1, IsFirstStep: !1 }, "03": { istitleEditable: !0, isTitleSuggSet: !1, isFlagSuggSet: !1, isOtpShown: !1, isNECShown: !1, isDescDivShown: !1, isEnrichShown: { isStaticShown: !1, isAttachmentShown: !1 }, WasProdNamePresent: !1, autofocusPName: !1, isCountryFlagSuggSet: !1, IsFirstStep: !1 }, "04": { istitleEditable: !1, isTitleSuggSet: !1, isFlagSuggSet: !1, isOtpShown: !1, isNECShown: !1, isDescDivShown: !1, isEnrichShown: { isStaticShown: !1, isAttachmentShown: !1 }, WasProdNamePresent: !1, autofocusPName: !1, isCountryFlagSuggSet: !1, IsFirstStep: !1 }, "05": { istitleEditable: !1, isTitleSuggSet: !1, isFlagSuggSet: !1, isOtpShown: !1, isNECShown: !1, isDescDivShown: !1, isEnrichShown: { isStaticShown: !1, isAttachmentShown: !1 }, WasProdNamePresent: !1, autofocusPName: !1, isCountryFlagSuggSet: !1, IsFirstStep: !1 }, "08": { istitleEditable: !0, isTitleSuggSet: !1, isFlagSuggSet: !1, isOtpShown: !1, isNECShown: !1, isDescDivShown: !1, isEnrichShown: { isStaticShown: !1, isAttachmentShown: !1 }, WasProdNamePresent: !1, autofocusPName: !1, isCountryFlagSuggSet: !1, IsFirstStep: !1 }, "09": { istitleEditable: !0, isTitleSuggSet: !1, isFlagSuggSet: !1, isOtpShown: !1, isNECShown: !1, isDescDivShown: !1, isEnrichShown: { isStaticShown: !1, isAttachmentShown: !1 }, WasProdNamePresent: !1, autofocusPName: !1, isCountryFlagSuggSet: !1, IsFirstStep: !1 } }, BlPopup = ["09"], EnqPopup = ["09"], showElemonForm = ["chatbl"], template_array = [], global_euroArr = ["AT", "BE", "BG", "HR", "CY", "CZ", "DK", "EE", "FI", "FR", "DE", "GR", "HU", "IE", "IT", "LV", "LT", "LU", "MT", "NL", "PL", "PT", "RO", "SK", "SI", "ES", "SE", "GB", "UK"], savedMcatIsq = {}, savedCatIsq = {}, HitMcatIsq = {}, isBLFormOpen = !1, IsqSeperator = "##"; function DataSeparator(e) { return e.join(IsqSeperator) } var defaultGenerationId = 1, flagsugg = new FlagSuggestor, usercookie = new UserCookie, QuestionEnding = "?", ChatBlStaticMsg = { quantity: "What is the order <strong>Quantity</strong>" + QuestionEnding, "quantity unit": "", "total order value(rs)": "What is the <strong>Total Order Value(Rs)</strong>" + QuestionEnding, "total order value": "What is the <strong>Total Order Value</strong>" + QuestionEnding, "why do you need this": "Why do you need this" + QuestionEnding, currency: "", "requirement details": "Please mention any <strong>other details</strong> about your requirement.", "i am interested in": "I am interested in", "set content": "Set content" + QuestionEnding, "is this a sample order ?": "Is this a sample order" + QuestionEnding, "any preferred brand": "Any Preferred Brand" + QuestionEnding, "is it customized": "Is It Customized" + QuestionEnding }, NotFilled = "Not Answered", Skipped = "Not Sure", ReloadReqClass = ["UserLogin", "ContactDetail", "UserVerification", "MoreDetails"], SelectBoxStaticMsg = { "quantity unit": { default: "Select a Unit" }, currency: { chatbl: "Currency", default: "Select a Currency" } }; function ClearSeqArrays(e) { ReqObj.Form[e].UiArray = [], ReqObj.Form[e].ServiceSequence = [], ReqObj.Form[e].HitArray = [], ReqObj.Form[e].OnCloseArray = [] } function IsqKeys(e) { ReqObj.Form[e].IsqArray = "", ReqObj.Form[e].prevCount = 0, ReqObj.Form[e].stopper = 0, ReqObj.Form[e].IsqLength = 0, ReqObj.Form[e].IsqDiv = 0, ReqObj.Form[e].isqScreen = 0, ReqObj.Form[e].isqSubmitted = 0, ReqObj.Form[e].questionCount = 0, ReqObj.Form[e].questionsId = [], ReqObj.Form[e].questionsDesc = [], ReqObj.Form[e].optionsId = [], ReqObj.Form[e].optionsValue = [], ReqObj.Form[e].Isq = {}, ReqObj.Form[e].Isq.CurrentPageQuestions = [], ReqObj.Form[e].Isq.CurrentScreenAnswers = "", ReqObj.Form[e].toGetCurrentPagestring = !1, ReqObj.Form[e].toGetQuestionsOnly = !1, ReqObj.Form[e].Isq.getIsqQuestionString = [], ReqObj.Form[e].Isq.currentQuestionString = [] } function RdBoxKeys(e) { ReqObj.Form[e].ReqDtlBox = "", ReqObj.Form[e].flags.isDescDivShown = !1, ReqObj.Form[e].ReqDtl = {} } function EnrichKeys(e) { ReqObj.Form[e].EnrichmentVal = "", ReqObj.Form[e].flags.isEnrichShown.isStaticShown = !1, ReqObj.Form[e].flags.isEnrichShown.isAttachmentShown = !1 } function PropertyDefault(e, t) { ReqObj.Form[e].mcatName = ReturnCorrectVal(t.mcatName, ""), ReqObj.Form[e].mcatId = ReturnCorrectVal(t.mcatId, "-1"), ReqObj.Form[e].catId = ReturnCorrectVal(t.catId, "-1"), ReqObj.Form[e].modId = ReturnCorrectVal(t.modId, "DIR"), ReqObj.Form[e].ctaType = ReturnCorrectVal(t.ctaType, "other"), ReqObj.Form[e].plsqArr = ReturnCorrectVal(t.plsqArr, ""), ReqObj.Form[e].userFilledIsq = ReturnCorrectVal(t.userFilledIsq, []), ReqObj.Form[e].showAttachment = isSet(t.showAttachment) ? t.showAttachment : "-1", isSet(ReqObj.Form[e].formType) && ("bl" === ReqObj.Form[e].formType.toLowerCase() ? (ReqObj.Form[e].afflId = ReturnCorrectVal(t.afflId, 0), ReqObj.Form[e].BLIntent = ReturnCorrectVal(t.BLIntent, "")) : ReqObj.Form[e].reqSent = ReturnCorrectVal(t.reqSent, "")), ReqObj.Form[e].insert = ReturnCorrectVal(t.insert, "I") } function StaticIsqKeys(e) { ReqObj.Form[e].Static = { questionsId: [], questionsDesc: [], optionsId: [], optionsValue: [] } } function ChatBlKeys(e) { IsChatbl(e) && (ReqObj.Form[e].UserInputs = { CountryName: "", IsCountry: "", IsProduct: "", ProductName: "", PrimaryInfo: "", Name: "", Mobile: "", Email: "", City: "", CityId: "", Requirement: "", OTP: "", toChange: "" }) } function setTemplateDefaultValue(e, t, r) { var o = e + t; PropertyDefault(o, r), IsqKeys(o), RdBoxKeys(o), EnrichKeys(o), StaticIsqKeys(o), ReqObj.Form[o].cityOth = "", ReqObj.Form[o].generationCalled = !1, ReqObj.userType = "", MakeRefText(o), ReqObj.Form[o].selectPrdTitle = function (e, t) { selectTitle(o, t) } } function initializeForm(e) { createGlobalObject(); var t = !1; if (isSet(e)) for (var r = 0; r < e.length; r++)isSet(e[r]) && "" !== e[r] && (-1 !== $.inArray(e[r].tempId, BlPopup) && -1 !== $.inArray(e[r].tempId, EnqPopup) || (OpenForm(e[r]), (isSet(e[r].displayImage) && "" !== e[r].displayImage || isSet(e[r].zoomImage) && "" !== e[r].zoomImage || !t && "bl" === e[r].formType.toLowerCase()) && (t = !0, getMcatImage(e[r].tempId + e[r].instId, { hasCallback: !1 })))) } function Isq(e) { this.templateId = "t" + e, this.className = "Isq", ReqObj.Form[e].preFilledIsq = {}, StructureIsq(e) } function UserType() { return !isSet(ReqObj.changeUserIso) || "IN" !== ReqObj.changeUserIso && "" !== ReqObj.changeUserIso ? "FR" : "IN" } function GetIsqFromObj(e) { if (isSet(e)) { var t = UserType(); ReqObj.Form[e].IsqArray = "", -1 === parseInt(ReqObj.Form[e].mcatId) && -1 === parseInt(ReqObj.Form[e].catId) ? (ReqObj.Form[e].IsqArray = null, ReqObj.Form[e].IsqLength = 0) : (-1 !== parseInt(ReqObj.Form[e].mcatId) && "" !== ReqObj.Form[e].mcatId ? ReqObj.Form[e].mcatId in savedMcatIsq && t in savedMcatIsq[ReqObj.Form[e].mcatId] && (ReqObj.Form[e].IsqArray = savedMcatIsq[ReqObj.Form[e].mcatId][t]) : ReqObj.Form[e].catId in savedCatIsq && t in savedCatIsq[ReqObj.Form[e].catId] && (ReqObj.Form[e].IsqArray = savedCatIsq[ReqObj.Form[e].catId][t]), ReqObj.Form[e].IsqLength = isSet(ReqObj.Form[e].IsqArray) ? ReqObj.Form[e].IsqArray.length : 0) } } function GetIsq(e) { if (isSet(e)) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"; if (GetIsqFromObj(e), "" === ReqObj.Form[e].IsqArray || null === ReqObj.Form[e].IsqArray) { if (-1 !== parseInt(ReqObj.Form[e].mcatId, 10) && "" !== ReqObj.Form[e].mcatId) var r = ReqObj.Form[e].mcatId, o = 3; else if (-1 !== parseInt(ReqObj.Form[e].catId, 10)) r = ReqObj.Form[e].catId, o = 2; var i = UserType(), a = currentISO(); isSet(r) && -1 !== parseInt(r, 10) ? $.ajax({ cache: !0, url: appsServerName + "index.php?r=Newreqform/GetIsq", type: "GET", crossOrigin: !0, crossDomain: !0, data: { modid: ReqObj.Form[e].modId, mcatid: r, cat_type: o, flag: 1, isq_format: 1, generic_flag: 1, country_iso: a }, dataType: "json", success: function (t) { if (isSet(t) && isSet(t.DATA) && ("string" != typeof t.DATA || "null" !== t.DATA.toLowerCase())) if (t.DATA.length > 0) { ReqObj.Form[e].IsqArray = t.DATA, ReqObj.Form[e].IsqLength = ReqObj.Form[e].IsqArray.length; var r = [], o = ""; -1 !== parseInt(ReqObj.Form[e].mcatId) && "" !== ReqObj.Form[e].mcatId ? (r = savedMcatIsq, o = ReqObj.Form[e].mcatId) : (r = savedCatIsq, o = ReqObj.Form[e].catId), o in r ? r[o][i] = ReqObj.Form[e].IsqArray : (r[o] = {}, r[o][i] = ReqObj.Form[e].IsqArray) } else ReqObj.Form[e].IsqArray = null, ReqObj.Form[e].IsqLength = 0, -1 !== parseInt(ReqObj.Form[e].mcatId) && "" !== ReqObj.Form[e].mcatId ? savedMcatIsq[ReqObj.Form[e].mcatId][i] = null : savedCatIsq[ReqObj.Form[e].catId][i] = null; else ReqObj.Form[e].IsqArray = null, ReqObj.Form[e].IsqLength = 0 }, error: function (r) { ReqObj.Form[e].IsqArray = null, ReqObj.Form[e].IsqLength = 0, r = isSet(r) ? r : "response undefined", blenqGATracking(t, "Get ISQ", r, 1, e) }, complete: function () { isSet(e) && isSet(ReqObj.Form[e].Isq) && ReqObj.Form[e].Isq.HasHtmlCalled && isSet(ReqObj.Form[e].GlobalIsqObject) && "function" == typeof ReqObj.Form[e].GlobalIsqObject.AttachingObject && ReqObj.Form[e].GlobalIsqObject.AttachingObject(ReqObj.Form[e].GlobalIsqObject.IsqObject), isSet(e) && isSet(ReqObj.Form[e].ReqDtl) && ReqObj.Form[e].ReqDtl.HasHtmlCalled && isSet(ReqObj.Form[e].GlobalRdObj) && "function" == typeof ReqObj.Form[e].GlobalRdObj.AttachingObject && ReqObj.Form[e].GlobalRdObj.AttachingObject(ReqObj.Form[e].GlobalRdObj.RdObj) } }) : isSet(e) && isSet(r) && -1 === parseInt(r, 10) ? (ReqObj.Form[e].IsqArray = null, ReqObj.Form[e].IsqLength = 0, delete HitMcatIsq[ReqObj.Form[e].mcatId], ReqObj.Form[e].Isq.HasHtmlCalled && isSet(ReqObj.Form[e].GlobalIsqObject) && "function" == typeof ReqObj.Form[e].GlobalIsqObject.AttachingObject && ReqObj.Form[e].GlobalIsqObject.AttachingObject(ReqObj.Form[e].GlobalIsqObject.IsqObject)) : isSet(e) && (ReqObj.Form[e].IsqArray = null, ReqObj.Form[e].IsqLength = 0) } } } function FindIsqObject(e, t, r, o, i) { if (isSet(e)) { if (e instanceof Array) { for (var a = isSet(e) ? e.length : 0, s = [], n = 0; n < a; n++) { a > 1 && r++; var l = FindIsqObject(e[n], t, r, !0); s.push(l) } return i.push(s), i } if ("MDC" !== ReqObj.Form[t].modId || "Brand" !== e.IM_SPEC_MASTER_DESC) { isSet(ReqObj.Form[t].toGetCurrentPagestring) && ReqObj.Form[t].toGetCurrentPagestring && getIsqQuestions(e, "current", t); var c = convertHtml(e, t, r); return ReqObj.Form[t].previousFullDesc = e.IM_SPEC_MASTER_FULL_DESC, o ? c : i.push([c]) } ReqObj.Form[t].stopper++ } } function FindIsqObjectQuestions(e, t, r, o, i) { if (isSet(e)) { if (e instanceof Array) { for (var a = isSet(e) ? e.length : 0, s = [], n = 0; n < a; n++) { a > 1 && r++; var l = FindIsqObjectQuestions(e[n], t, r, !0); s.push(l) } return i.push(s), i } isSet(ReqObj.Form[t].toGetQuestionsOnly) && ReqObj.Form[t].toGetQuestionsOnly && getIsqQuestions(e, "allquestions", t) } } function MakeLabel(e, t, r) { if (IsChatbl(r)) return ChatBlMsgs(e.QuestionDesc); var o = "<label class='" + e.lblClass + "' id='" + e.labelId + "'"; return isSet(e.questionId) && "" !== e.questionId && (o += "quesid='" + e.questionId + "'"), o += ">" + e.QuestionDesc + "</label>", isSet(t) && (o += t), o } function LabelForCheckAndRadio(e, t, r, o) { return IsChatbl(r) ? ChatBlMsgs(e.QuestionDesc, e.type) : "<div class='beclr'></div><div class='be-dvtxt bewauto bepr'><label id=" + e.labelId + " quesid='" + e.questionId + "' >" + e.QuestionDesc + "</label>" + o + t + "</div><div class='beclr'></div>" } function errorBlockFunction(e, t) { return !isSet(e) || $.isEmptyObject(e) ? "" : IsChatbl(t) ? "inline" === chatBlPopupInline(t) ? "<div class='isq_error_block redc " + e.error_block_class + "'>" + e.msg + "</div>" : "popup" === chatBlPopupInline(t) ? "<div class='isq_error_block redc bltperor " + e.error_block_class + "'>" + e.msg + "</div>" : void 0 : "<div  class='be-erbx isq_error_block " + e.error_block_class + "'><div data-role='content'>" + e.msg + "</div><a class='be-erarw " + e.anchor_class + "'  data-role='arrow'></a></div>" } function Tooltip(e, t) { var r = ""; return isSet(e) && isSet(t) && "" !== t ? ("text" === e.toLowerCase() ? r = FullDescHtml({ div1Class: "int-ct3 info_icon", div2Class: "blnewform_sprit inft", div3Class: "nwarN bedsnone full_desc Tp8", fullDesc: t }) : "select" === e.toLowerCase() ? r = FullDescHtml({ div1Class: "int-ct3 info_icon", div2Class: "blnewform_sprit inft", div3Class: "nwarN bedsnone full_desc Tp8", fullDesc: t }) : "radio" === e.toLowerCase() ? r += FullDescHtml({ div1Class: "int-ct1 info_icon", div2Class: "blnewform_sprit inft tn6", div3Class: "nwarN bedsnone full_desc", fullDesc: t }) : "check" === e.toLowerCase() && (r += FullDescHtml({ div1Class: "int-ct1 info_icon", div2Class: "blnewform_sprit inft tn6", div3Class: "nwarN bedsnone full_desc", fullDesc: t })), isSet(r) ? r : "") : r } function TextBoxHTML(e, t) { var r = ""; return isSet(t) && "" !== t && (e.lblClass += " bedbtip", r = FullDescHtml({ div1Class: "int-ct3 info_icon", div2Class: "blnewform_sprit inft", div3Class: "nwarN bedsnone full_desc Tp8", fullDesc: t })), "<div class='" + e.divClass + "'>" + MakeLabel(e, r) + TextBoxIp(e) } function TextBoxIp(e) { return "<input type='text' class='" + e.inputClass + "' id='" + e.inputId + "' name='" + e.inputName + "' optionid = '" + e.optionId + "' maxlength='1000' autocomplete='off' value='" + e.ans + "' role='textbox'/>" } function SelectBox(e, t) { var r = ""; isSet(t) && "" !== t && (e.lblClass += " bedbtip", r = FullDescHtml({ div1Class: "int-ct3 info_icon", div2Class: "blnewform_sprit inft", div3Class: "nwarN bedsnone full_desc Tp8", fullDesc: t })); var o = "<div class='" + e.divClass + "'>" + MakeLabel(e, r) + "<select class='" + e.selectClass + "'"; return void 0 !== e.onchange && e.onchange && (o += " onchange = 'funcOth(id)'"), o += " name='" + e.selectName + "' id='" + e.selectId + "'><option value=''>" + e.optionValue + "</option>" } function SelectBoxIp(e) { var t = "<select class='" + e.selectClass + "'"; return void 0 !== e.onchange && e.onchange && (t += " onchange = 'funcOth(id)'"), t += " name='" + e.selectName + "' id='" + e.selectId + "'><option value=''>" + e.optionValue + "</option>" } function OthersBox(e) { return "<div class='" + e.divClass + "'><input type='text' class='be-input isq_txtbx isq-st2' name='" + e.inputName + "' id='" + e.inputId + "' placeholder='Other Option' value='" + e.ans + "'><label for='" + e.inputId + "' optionid = " + e.optionId + "></label></div>" } function FullDescHtml(e) { return "<div class='" + e.div1Class + "'><div class='" + e.div2Class + "'></div><div class='" + e.div3Class + "'>" + e.fullDesc + "</div></div>" } function CheckBox(e, t) { return "<div class='" + e.divClass1 + "'>" + errorBlockFunction(t) + "<input type='checkbox' class='bevT bedblk' name='" + e.templateId + "checkbox_name" + e.questionCount + "' id='" + e.templateId + "checkbox_name" + e.questionCount + "_option" + parseInt(e.i + 1) + "' value='" + e.option_desc + "'" + e.checked + "><label optionid=" + e.option_id + "  for='" + e.templateId + "checkbox_name" + e.questionCount + "_option" + parseInt(e.i + 1) + "' class='bepr CheckboxClick'><div class='bechk-in bebr4'><div class='" + e.divClass2 + "'></div></div><span class='" + e.spanClass + "' >" + e.option_desc + "</span></label></div>" } function RadioBox(e, t) { var r = "<div class='" + e.divClass1 + "'>" + errorBlockFunction(t) + "<input type='radio' class='" + e.inputClass + "' name='" + e.templateId + "radio_name" + e.questionCount + "' id='" + e.templateId + "_radio_name" + e.questionCount + "_option" + parseInt(e.i + 1) + "' value='" + e.option_desc + "'" + e.checked + "><label optionid=" + e.option_id + " for='" + e.templateId + "_radio_name" + e.questionCount + "_option" + parseInt(e.i + 1) + "' class='bepr'"; return isSet(e.cityFunc) && (r += e.cityFunc), r += "><div class='bechk-in'><div class='" + e.divClass2 + "'></div></div><span class='" + e.spanClass + "' id='" + e.templateId + "_rad_chk" + e.questionCount + "_option" + parseInt(e.i + 1) + "' >" + e.option_desc + "</span></label></div>" } function StructureIsq(e) { if (isSet(ReqObj.Form[e].plsqArr) && "" !== ReqObj.Form[e].plsqArr) { var t = ReqObj.Form[e].plsqArr.split("&"); t = isSet(t) ? t : ""; for (var r = 0; r !== t.length; r++) { var o = t[r].split(":"); if (o[0] = trimVal(unescape(o[0]).toLowerCase()), BlEnqGenerated(e)) ReqObj.Form[e].preFilledIsq[o[0]] = unescape(o[1]), isSet(ReqObj.Form[e].preFilledIsq[o[0]]) && (ReqObj.Form[e].preFilledIsq[o[0]] = ReqObj.Form[e].preFilledIsq[o[0]].split(", ")); else { var i = unescape(o[1]); isSet(i) && (1 === (i = isSet(i = i.split(", ")) ? i : "").length ? ReqObj.Form[e].preFilledIsq[o[0]] = i : ReqObj.Form[e].preFilledIsq[o[0]] = []) } if (ReqObj.Form[e].preFilledIsq[o[0]] instanceof Array) for (var a = 0; a < ReqObj.Form[e].preFilledIsq[o[0]].length; a++)ReqObj.Form[e].preFilledIsq[o[0]][a] = trimVal(ReqObj.Form[e].preFilledIsq[o[0]][a].toLowerCase()) } } for (var s = 0; s < ReqObj.Form[e].userFilledIsq.length; s++)if (notEmpty(ReqObj.Form[e].userFilledIsq[s].questionsDesc) && notEmpty(ReqObj.Form[e].userFilledIsq[s].optionsValue)) { var n = ReqObj.Form[e].userFilledIsq[s].optionsValue.split(", "); n = isSet(n) ? n : ""; for (var l = 0; l < n.length; l++)isSet(n[l]) && (n[l] = trimVal(n[l].toLowerCase())); ReqObj.Form[e].preFilledIsq[ReqObj.Form[e].userFilledIsq[s].questionsDesc.toLowerCase()] = n } } function FillIsq(e, t) { if (isSet(e)) { if (e = trimVal(e.toLowerCase()), ReqObj.Form[t].preFilledIsq.hasOwnProperty(e)) { var r = ReqObj.Form[t].preFilledIsq[e]; return delete ReqObj.Form[t].preFilledIsq[e], r } return null } } function SelBoxMSg(e, t) { if (isSet(e)) { var r = trimVal(e.toLowerCase()); if (r in SelectBoxStaticMsg) { var o = SelectBoxStaticMsg[r]; return isSet(o) && isSet(t) && IsChatbl(t) && isSet(o.chatbl) && "" !== o.chatbl ? o.chatbl : o.default } return "Select a Value" } return "Select a Value" } function getIsqQuestions(e, t, r) { "allquestions" === t ? ReqObj.Form[r].Isq.getIsqQuestionString.push(e.IM_SPEC_MASTER_DESC) : "current" === t && ReqObj.Form[r].Isq.currentQuestionString.push(e.IM_SPEC_MASTER_DESC) } function IsqAlreadyPresent(e, t) { if (isSet(e) && notEmpty(t) && isSet(ReqObj.Form[e].questionsDesc)) for (var r = 0; r < ReqObj.Form[e].questionsDesc.length; r++)if (t.toLowerCase() === ReqObj.Form[e].questionsDesc[r].toLowerCase()) return r; return -1 } function SaveIsq(e, t) { if ("isq" === t.toLowerCase()) var r = ReqObj.Form[e].questionsId, o = ReqObj.Form[e].questionsDesc, i = ReqObj.Form[e].optionsId, a = ReqObj.Form[e].optionsValue; else if ("static" === t.toLowerCase()) r = ReqObj.Form[e].Static.questionsId, o = ReqObj.Form[e].Static.questionsDesc, i = ReqObj.Form[e].Static.optionsId, a = ReqObj.Form[e].Static.optionsValue; if (isSet(ReqObj.Form[e].Isq.CurrentPageQuestions)) for (var s = 0; s < ReqObj.Form[e].Isq.CurrentPageQuestions.length; s++) { for (var n = "", l = 0; l < ReqObj.Form[e].Isq.CurrentPageQuestions[s].length; l++) { var c = IsqAlreadyPresent(e, ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionText); if ("TEXTBOX" === ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].type) (b = trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].optionSelector).val())) ? (-1 === c ? (r.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionId), o.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionText), i.push($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].optionSelector).attr("optionid")), a.push(b)) : (r[c] = ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionId, o[c] = ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionText, i[c] = $(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].optionSelector).attr("optionid"), a[c] = b), "not sure" !== trimVal(n.toLowerCase()) && (n += " " + b)) : n = NotFilled; else if ("SELECT" === ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].type) { var u = "", m = $(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].optionSelector + " option:selected").attr("optionid"); (u = -99 === parseInt(m) ? trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].others[0]).val()) : trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].optionSelector).val())) ? (-1 === c ? (r.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionId), o.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionText), i.push(m), a.push(u)) : (r[c] = ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionId, o[c] = ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionText, i[c] = m, a[c] = u), "not sure" !== trimVal(n.toLowerCase()) && (n += " " + u)) : n = NotFilled } else if ("CHECKBOX" === ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].type) { trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].optionSelector).val()) && $.each($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].optionSelector + ":checked"), function () { r.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionId), o.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionText), i.push($(this).siblings("label").attr("optionid")), a.push(trimVal($(this).val())), "not sure" !== trimVal(n.toLowerCase()) && (n += ", " + trimVal($(this).val())) }); for (var p = 0; p < ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].others.length; p++) { (b = trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].others[p]).val())) && (r.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionId), o.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionText), i.push($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].others[p]).siblings("label").attr("optionid")), a.push(b), "not sure" !== trimVal(n.toLowerCase()) && (n += ", " + b)) } n = "" === trimVal(n) ? NotFilled : (n = trimVal(n)).replace(/(^,)|(,$)/g, "") } else if ("RADIO" === ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].type) { var b; (b = trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].optionSelector + ":checked").val())) && (r.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionId), o.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionText), i.push($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].optionSelector + ":checked").siblings("label").attr("optionid")), a.push(b), "not sure" !== trimVal(n.toLowerCase()) && (n += " " + b)); for (p = 0; p < ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].others.length; p++)(b = trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].others[p]).val())) && (r.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionId), o.push(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].questionText), i.push($(ReqObj.Form[e].Isq.CurrentPageQuestions[s][l].others[p]).siblings("label").attr("optionid")), a.push(b), "not sure" !== trimVal(n.toLowerCase()) && (n += " " + b)); "" === trimVal(n) && (n = NotFilled) } } ReqObj.Form[e].Isq.CurrentScreenAnswers = trimVal(n) } ReqObj.Form[e].Isq.CurrentPageQuestions = [] } function GetAnswer(e, t) { if (isSet(e) && isSet(ReqObj.Form[e].Isq.CurrentScreenAnswers)) { var r = ReqObj.Form[e].Isq.CurrentScreenAnswers; return ReqObj.Form[e].Isq.CurrentScreenAnswers = "", r } } function ValidateQuestions(e, t) { var r = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads", o = ReqObj.Form[e].FormSequence.StepCounter + 1; if (isSet(ReqObj.Form[e].Isq.CurrentPageQuestions)) for (var i = 0; i < ReqObj.Form[e].Isq.CurrentPageQuestions.length; i++) { var a = 0, s = "", n = ""; if (isSet(ReqObj.Form[e].formType) && "chatbl" !== ReqObj.Form[e].formType.toLowerCase()) var l = { error_block_class: "beerrp3", anchor_class: "bearwL2" }; else l = {}; if (isSet(ReqObj.Form[e].Isq.CurrentPageQuestions[i])) { for (var c = ReqObj.Form[e].Isq.CurrentPageQuestions[i].length, u = 0; u < ReqObj.Form[e].Isq.CurrentPageQuestions[i].length; u++)if ("TEXTBOX" === ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].type) { var m = trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].optionSelector).val()); if (m) { if (t && "quantity" === ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].questionText.toLowerCase() && (0 === parseInt(m, 10) || !ValidNumber(m) || !(parseInt(m, 10) > 0))) { a++ , 0 === parseInt(m, 10) ? l.msg = "Quantity should not be 0" : ValidNumber(m) && parseInt(m, 10) > 0 || (l.msg = "Quantity should be numeric except 0"), IsChatbl(e) && c > 1 && 0 === u && (l.error_block_class = " erchat"), s = ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].optionSelector, n = "Validation_Error" + ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].questionText; break } } else a++ , l.msg = "Please enter " + ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].questionText, IsChatbl(e) && c > 1 && 0 === u && (l.error_block_class = " erchat"), s = ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].optionSelector, n = "Validation_Error" + ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].questionText } else if ("SELECT" === ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].type) { var p = $(ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].optionSelector + " option:selected").attr("optionid"); (-99 === parseInt(p) ? trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].others[0]).val()) : trimVal($(ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].optionSelector).val())) || (a++ , l.msg = "Please enter " + ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].questionText, IsChatbl(e) && c > 1 && 0 === u && (l.error_block_class = " erchat"), s = ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].optionSelector, n = "Validation_Error" + ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].questionText) } else "CHECKBOX" === ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].type || ReqObj.Form[e].Isq.CurrentPageQuestions[i][u].type; if (a && a < ReqObj.Form[e].Isq.CurrentPageQuestions[i].length) { var b = $(s); return b.addClass("highlight-err").focus().siblings("label").addClass("redc"), b.siblings(".isq_error_block").length > 0 || b.parent().append(errorBlockFunction(l, e)), blenqGATracking(r, n + o + "|IsqValidate", getEventLabel(), 0, e), !1 } } } return !0 } function MoreDetails() { this.moredetialshtml = "", this.MoreDetailsHtmlObj = { Label: "", UserInput: "", OuterWrapper: "", ClosingWrapper: "" }, this.MoreDetailsHtmlObjArray = [], this.className = "MoreDetails" } function PostBlEnqUpdate() { this.className = "PostBlEnqUpdate" } function ProductNameQuestion(e) { this.className = "ProductNameQuestion", this.ProductNameQuestionHtmlObj = { Label: "", UserInput: "", OuterWrapper: "", ClosingWrapper: "" }, this.ProductNameQuestionHtmlObjArray = [], this.ProductNameQuestionHTML = "" } function FormSeq() { this.arraySeq = [], this.ServiceSequence = [], this.FullServiceArray = [], this.OnCloseServiceArray = [], this.OnCloseStep = !1, this.OnCloseCounter = -1 } function ValidateObj(e, t, r, o) { var i = !1; if (isSet(e) && isSet(t) && isSet(e[t] && isSet(r))) for (var a = 0; a < e[t].length; a++)if ("function" == typeof e[t][a].Obj.validate) { if (!e[t][a].Obj.validate(r, o)) { i = !0; break } } else i = !1; return i } function CheckforUpdate(e, t) { 0 === e && IsBlEnqProdNameChanged(t) && RefactorFormArrays(t) } function ClearInlineBlTag(e) { var t = $("#t" + e + "_bl_form").parent(); ReqObj.Form[e].InlineformParentEl = t, ReqObj.Form[e].InlineformHtml = t.html(), t.html("") } function makeObj(e, t) { if ("" !== ConstructorName(e)) { var r = {}, o = GetObjectKeys(t); for (var i in isSet(e) && (r.fn = e), o) isSet(t[o[i]]) ? r[o[i]] = t[o[i]] : r[o[i]] = []; return r.cb = [], r } return {} } function ReplaceObject(e, t, r) { e.isService || e.toReplace && !1 !== r.GetExistingObject(ConstructorName(e.obj), t) && (e.obj = e.arrays.UiArray[i][j].Obj) } function FindObject(e, t, r) { if (isSet(e) && isSet(t)) for (var o = 0; o < e.length; o++) { if (ConstructorName(e[o].fn).toLowerCase() === t.toLowerCase()) return r.toReplace && (e[o] = r.ReplaceObj), !1; if (!1 === FindObject(e[o].cb, t, r)) return !1 } } function FindCorrectSpot(e, t, r) { if (isSet(e)) for (var o = 0; o < e.length; o++) { if (ConstructorName(e[o].fn).toLowerCase() === r.toLowerCase()) return e[o].cb.push(t), !0; if (!0 === FindCorrectSpot(e[o].cb, t, r)) return !0 } } function ExistsInArray(e, t) { if (isSet(e)) for (var r = 0; r < e.length; r++) { if (ConstructorName(e[r].fn).toLowerCase() === t.toLowerCase()) return !0; if (!0 === ExistsInArray(e[r].cb, t)) return !0 } } function findParent(e) { var t = ""; for (var r in TreeConfig) if (r.toLowerCase() === e.toLowerCase()) { t = TreeConfig[r]; break } return t } function AttachObject(e) { if (isSet(e)) if (e.isService || e.array.UiArray.push({ id: e.objHtmlId, Obj: e.obj }), !1 === FindObject(e.array.ServiceArray, ConstructorName(e.obj), e)); else { var t = findParent(ConstructorName(e.obj)); t = isSet(t) ? t : [], e.obj = makeObj(e.obj, e.hooks); var r = !1; if (t.length > 0) for (var o = 0; o < t.length; o++)!0 === FindCorrectSpot(e.array.ServiceArray, e.obj, t[o]) ? r = !0 : o !== t.length - 1 || r || e.array.ServiceArray.push(e.obj); else e.array.ServiceArray.push(e.obj) } } function SetBLEnqDefaultFlags(e, t) { isSet(e) && isSet(t) ? ReqObj.Form[e + t].flags = CopyObject(Templateconfig[e]) : ReqObj.Form[e + t].flags = {} } function GenOnClick(e) { return !(!GenerationOnClick(e) || !UserFilledIsq(e)) && (!usercookie.getCookie("imEqGl") || "V" === usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "uv")) } function GenerationOnClick(e) { return !!(isSet(e) && isSet(ReqObj.Form[e].genOnClick) && "yes" === ReqObj.Form[e].genOnClick.toLowerCase() && "09" === e.substring(0, 2) && isSet(ReqObj.Form[e].formType) && "enq" === ReqObj.Form[e].formType.toLowerCase() && "IN" === currentISO()) } function CallIntentGen(e) { isSet(e) && "09" === e.substring(0, 2) && (isSet(ReqObj.Form[e].reqSent) && isSet(ReqObj.Form[e].formType) && "bl" !== ReqObj.Form[e].formType.toLowerCase() ? "no" !== trimVal(ReqObj.Form[e].reqSent.toLowerCase()) && new Generation(1).onSubmit(e) : isSet(ReqObj.Form[e].formType) && "bl" === ReqObj.Form[e].formType.toLowerCase() && "yes" === trimVal(ReqObj.Form[e].BLIntent.toLowerCase()) && new Generation(1).onSubmit(e)) } function SetBlHeading(e, t) { var r = "", o = "#t" + e; if ("09" === e.substring(0, 2) || t > 1) { r = ""; isSet(ReqObj.Form[e].formType) && "bl" === ReqObj.Form[e].formType.toLowerCase() && "IN" !== currentISO() ? r += "Receive quotations from verified suppliers on " : r += "Get verified supplier details instantly on your ", "IN" === currentISO() ? r += "mobile" : r += "email", o += "_hdg" } else r += "Save Time! Get verified sellers", isSet(ReqObj.Form[e].prodName) && "" !== ReqObj.Form[e].prodName && (r += " for " + ReqObj.Form[e].prodName), o += "_head"; $(o).removeClass("bedsnone").text(ReturnCorrectVal(ReqObj.Form[e].heading, r)) } function SetDefaultUserInputKeys(e) { ReqObj.Form[e].UserInputs = { CountryName: "", IsCountry: "", IsProduct: "", ProductName: "", PrimaryInfo: "", Name: "", Mobile: "", Email: "", City: "", CityId: "", Requirement: "", OTP: "", ChangeCountry: "", toChange: "" } } function SetBLEnqDefaultKeys(e) { ReqObj.Form[e].cityOth = "", ReqObj.Form[e].generationCalled = !1, ReqObj.userType = "", SetDefaultUserInputKeys(e), ReqObj.Form[e].generationId = !isSet(ReqObj.Form[e].generationId) || "" === ReqObj.Form[e].generationId || "R" !== ReqObj.Form[e].insert && "U" !== ReqObj.Form[e].insert ? defaultGenerationId : parseInt(ReqObj.Form[e].generationId), ReqObj.Form[e].query_destination = -1, ReqObj.Form[e].TrackedDisplaySteps = [] } function CreateFormObject(e, t) { ReqObj.Form[e] = CopyObject(t), ReqObj.Original[e] = CopyObject(t) } function FormDefaultsFromProperty(e) { var t = e.tempId + e.instId; return CreateFormObject(t, e), addTemplates(t), SetBLEnqDefaultFlags(ReqObj.Form[t].tempId, ReqObj.Form[t].instId), PropertyDefault(t, ReqObj.Form[t]), SetBLEnqDefaultKeys(t), MakeRefText(t), GenOnClick(t) || CallIntentGen(t), "09" === t.substring(0, 2) && BLEnqPopUpDefault(t), "popup" === chatBlPopupInline(t) && OpenChatBLPopup(t), ReqObj.Form[t] } function InitiateSequence(e) { GetIsqFromService(e), ReqObj.Form[e].FormSequence = new FormSeq, ReqObj.Form[e].FormSequence.FirstStepSequence(e), FormCloseButtons(e) } function OpenBLEnqPopup(e) { isBLFormOpen = !0, $("#t" + e + "_bewrapper").removeClass("bedsnone").css({ display: "table" }), $("#t" + e + "_mcont").removeClass("bedsnone").css({ display: "table" }), $("#search_string").blur(), stopBgScroll() } function BLEnqPopUpDefault(e) { ReqObj.updateImage = 0, OpenBLEnqPopup(e) } function ClearBLEnqFormUI(e) { "09" === e.substring(0, 2) ? ClearBLEnqPopUpUI(e) : ClearBLEnqInlineUI(e) } function AfterFormDefaults(e) { ClearSeqArrays(e), SetUIElKeys(e), ClearBLEnqFormUI(e), "09" !== e.substring(0, 2) && "popup" !== chatBlPopupInline(e) || leftSideTransition(0, e), InitiateSequence(e) } function UserFilledIsq(e) { if (isSet(ReqObj.Form[e].userFilledIsq) && ReqObj.Form[e].userFilledIsq instanceof Array) { var t = ReqObj.Form[e].userFilledIsq, r = !0; if (2 === t.length) for (var o = 0; o < t.length; o++) { if (!(notEmpty(t[o].questionsId) && notEmpty(t[o].questionsDesc) && notEmpty(t[o].optionsId) && notEmpty(t[o].optionsValue))) { r = !1; break } r = !0 } else r = !1; return r } return !1 } function OpenForm(e) { var t = FormDefaultsFromProperty(e), r = t.tempId + t.instId; AfterFormDefaults(r), CallGenService(r), HideSuggester() } function CallGenService(e) { if (GenOnClick(e) && "IN" === usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "iso")) { var t = ReqObj.Form[e].FormSequence, r = { UiArray: [], ServiceArray: [] }; hooks = { pre: [], post: [] }; var o = { object: { obj: new Generation(0), toReplace: !0, isService: !0, array: r, hooks: hooks }, tmpId: e, that: t, AfterService: [], hasFallback: !1, FallbackObj: null }; t.MakeSeq(o); var i = { object: { obj: ReqObj.Form[e].GlobalIsqObject, array: r, hooks: hooks, isService: !0 }, tmpId: e, that: t, AfterService: [], hasFallback: !1, FallbackObj: null }; t.MakeSeq(i), SavePropIsq(e), formatServices(r.ServiceArray, e), ServiceSequenceHit(e, !1) } } function notEmpty(e) { return !(!isSet(e) || "" === e) } function SavePropIsq(e) { if (isSet(ReqObj.Form[e].userFilledIsq) && ReqObj.Form[e].userFilledIsq instanceof Array) for (var t = ReqObj.Form[e].userFilledIsq, r = 0; r < t.length; r++)ReqObj.Form[e].questionsId.push(t[r].questionsId), ReqObj.Form[e].questionsDesc.push(t[r].questionsDesc), ReqObj.Form[e].optionsId.push(t[r].optionsId), ReqObj.Form[e].optionsValue.push(t[r].optionsValue) } function SetUIElKeys(e) { IsqKeys(e), RdBoxKeys(e), EnrichKeys(e), StaticIsqKeys(e) } function GetIsqFromService(e) { GetIsq(e), ReqObj.Form[e].GlobalIsqObject = new Isq(e); var t = ShowStaticQuestionForeign(e) && !IsChatbl(e) ? "isq" : "noisq"; ReqObj.Form[e].GlobalRdObj = new RequirementDtl(e, t) } function CloseForm(e) { if ("09" === e.substring(0, 2) && "table" === $("#t" + e + "_bewrapper").css("display") || "09" !== e.substring(0, 2) && "none" !== $("#t" + e + "_enrichform_maindiv").css("display")) { if (ServiceSequenceHit(e, !1), ReqObj.TempNumber = "", SetUserDetails(), "09" === e.substring(0, 2) ? ($("#t" + e + "_bewrapper").css({ display: "none" }), ClearBLEnqPopUpUI(e)) : "08" === e.substring(0, 2) ? ($("#t" + e + "_chatBL").css({ display: "none" }), ClearBLEnqPopUpUI(e)) : ($("#t" + e + "_enrichform_maindiv").html("").css({ display: "none" }), $("#t" + e + "_q_send_req_button").html(ReqObj.Form[e].btn), ReqObj.Form[e].InlineformParentEl.html(ReqObj.Form[e].InlineformHtml), $("#t" + e + "_q_send_req_button").parent().removeClass("bedsnone"), ReqObj.Form[e].btn = ""), "popup" === chatBlPopupInline(e)); else { HideSuggester(); var t = ReqObj.Form[e].HitArray, r = ReqObj.Form[e].enqSentCallBack; ReqObj.Form[e] = CopyObject(ReqObj.Original[e]), ReqObj.Form[e].HitArray = t, ReqObj.Form[e].enqSentCallBack = r } UpdateSeq(), ReqObj.loginMode = 0, ReqObj.userType = "", resumeBgScroll(), SetUserDetails(), isBLFormOpen = !1, $(document).trigger(FormCloseEvent) } } function SetFormHtmlDefaultValue(e) { $("#t" + e + "_thankDiv").html("").addClass("bedsnone"), $("#t" + e + "_beprevious").addClass("bedsnone"), $("#t" + e + "_qnextbtn").addClass("bedsnone") } function leftSideEmpty(e) { $("#t" + e + "_Prodname").html(""), $("#t" + e + "_Compname").html(""), $("#t" + e + "_ProdPrice").html(""), $("#t" + e + "_state").html(""), $("#t" + e + "_locality").html(""), $("#t" + e + "_city").html(""), $("#t" + e + "parent_iframe").html("<div id='t" + e + "_prodVideo' class='be-prdimg'></div>") } function ClearBLEnqPopUpUI(e) { leftSideEmpty(e), $("#t" + e + "_bl_form").html(""), $("#t" + e + "_byrinfo").addClass("bedsnone").html(""), $("#t" + e + "_tCond").addClass("bedsnone"), SetFormHtmlDefaultValue(e) } function ClearBLEnqInlineUI(e) { $("#t" + e + "_bl_form").html(""), $("#t" + e + "_byrinfoIn").html("").addClass("bedsnone"), $("#t" + e + "_tCond").addClass("bedsnone"), $("#t" + e + "_submit").removeAttr("disabled").attr("style", "background-color : rgb(0, 166, 153)"), $("#t" + e + "_submitdiv").attr("class", "befstgo1") } function CheckForUpdate() { for (var e in ReqObj.UserDetail) if (ReqObj.UserDetail[e] !== usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), e)) return !0; return !1 } function ShowOtp() { return !(!usercookie.getCookie("ImeshVisitor") || "V" === usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "uv") || "IN" !== usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "iso")) } Isq.prototype.hasHtml = function (e) { isSet(e) && (ReqObj.Form[e.tmpId].Isq.HasHtmlCalled = !0, GetIsqFromObj(e.tmpId), "" === ReqObj.Form[e.tmpId].IsqArray ? ReqObj.Form[e.tmpId].GlobalIsqObject.IsqObject = e : isSet(ReqObj.Form[e.tmpId].GlobalIsqObject) && "function" == typeof ReqObj.Form[e.tmpId].GlobalIsqObject.AttachingObject && ReqObj.Form[e.tmpId].GlobalIsqObject.AttachingObject(e)) }, Isq.prototype.defaultEvents = function (e) { $("select.betextclr").off("change click").on("change click", function () { if ("" === $(this).val()) $(this).css("color", "#9e9e9e"); else { var e = $(this); e.css("color", "#333"), e.removeClass("highlight-err"), e.siblings("label").removeClass("redc"), e.siblings(".isq_error_block").remove() } }), $(".inpt_errorbx").off("click keydown").on("click keydown", function () { var e = $(this); e.removeClass("highlight-err"), e.siblings("label").removeClass("redc"), e.siblings(".isq_error_block").remove(), e.siblings("select.betextclr").removeClass("highlight-err") }), CheckBoxClick(), $(document).on("hover", ".info_icon", function () { $(this).children(".full_desc").removeClass("bedsnone") }), $(document).on("mouseout", ".info_icon", function () { $(this).children(".full_desc").addClass("bedsnone") }), RadioClick(), $(".t" + e + "other_radiotemp").off("click").on("click", function (t) { $(this).hasClass("t" + e + "be-radioboxtemp") && $(".t" + e + "be-radioboxtemp").each(function () { if ("block" === $(this).parent().css("display")) { var e = $(this); e.children("input").prop("checked", !1), e.children("input").removeClass("waschecked"), e.removeClass("sl-box chksl"), e.children().children(".bechk-in").children().hide() } }) }), IsChatbl(e) && $("input.be-input:text").focus(function () { $(this).css("background-color", "#FFFFFF") }), GenerationOnClick(e) && this.validate(e) }, Isq.prototype.AttachingObject = function (e) { if (isSet(e)) if (null !== ReqObj.Form[e.tmpId].IsqArray && ReqObj.Form[e.tmpId].prevCount !== ReqObj.Form[e.tmpId].IsqLength) { if (e.that.NumberofClassCalled -= 1, AttachObject(e.object, e.tmpId), isSet(e.AfterService)) for (var t = 0; t < e.AfterService.length; t++)"function" == typeof e.that.MakeSeq && e.that.MakeSeq(e.AfterService[t], e.tmpId); if (isSet(ReqObj.Form[e.tmpId].formType) && "enq" === ReqObj.Form[e.tmpId].formType.toLowerCase() && ReqObj.Form[e.tmpId].IsqLength - ReqObj.Form[e.tmpId].prevCount < 3 && ShowReqBox(e.tmpId)) { e.that.NumberofClassCalled += 1; CreateSeq({ object: { obj: new RequirementDtl(e.tmpId), toReplace: !0, isService: !1, array: e.object.array, hooks: { pre: [], post: [] } }, tmpId: e.tmpId, that: e.that, AfterService: [], hasFallback: !1, FallbackObj: null }) } else 0 === e.that.NumberofClassCalled && makeFinalSeq(e, e.tmpId) } else e.hasFallback ? isSet(e.Thankyou) && e.Thankyou ? isSet(ReqObj.Form[e.tmpId].FormSequence) && "function" == typeof ReqObj.Form[e.tmpId].FormSequence.OnCloseSeq && ReqObj.Form[e.tmpId].FormSequence.OnCloseSeq(e.tmpId) : CreateSeq(e.FallbackObj) : isSet(e.nextStep) && "function" == typeof e.nextStep && e.nextStep.apply(ReqObj.Form[e.tmpId].FormSequence) }, Isq.prototype.resetClass = function (e) { ReqObj.Form[e].prevCount > ReqObj.Form[e].IsqStep1 ? ReqObj.Form[e].prevCount -= ReqObj.Form[e].IsqStepN : ReqObj.Form[e].prevCount -= ReqObj.Form[e].IsqStep1 }, Isq.prototype.validate = function (e) { return ValidateQuestions(e, !1) }, Isq.prototype.displayHtml = function (e) { return isSet(e) && isSet(ReqObj.Form[e]) ? null === ReqObj.Form[e].IsqArray ? null : [0 === ReqObj.Form[e].prevCount ? this.makeIsq(ReqObj.Form[e].IsqStep1, e) : this.makeIsq(ReqObj.Form[e].IsqStepN, e)] : [""] }, Isq.prototype.makeIsq = function (e, t) { return ReqObj.Form[t].stopper = Math.min(e, ReqObj.Form[t].IsqLength - ReqObj.Form[t].prevCount) + ReqObj.Form[t].prevCount, this.TraverseIsq(t) }, Isq.prototype.TraverseIsq = function (e) { ReqObj.Form[e].Isq.CurrentPageQuestions = []; for (var t = [], r = ReqObj.Form[e].prevCount; r < ReqObj.Form[e].stopper; r++)ReqObj.Form[e].Isq.Question = [], FindIsqObject(ReqObj.Form[e].IsqArray[r], e, 0, !1, t), ReqObj.Form[e].Isq.CurrentPageQuestions.push(ReqObj.Form[e].Isq.Question); ReqObj.Form[e].prevCount = ReqObj.Form[e].stopper; return MakeWrapper(t, e, { SuffixOuterHtml: "<div  id='t" + e + "_isqBox'>", SuffixClosingHtml: "</div>", suffix: "_isqBox" }) }, Isq.prototype.SaveDetails = function (e) { SaveIsq(e, "isq") }, Isq.prototype.displayAnswer = function (e) { var t = chatBlClass(e, "right"), r = "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : ""; return [ConversationRightWrapper(e, GetAnswer(e, "isq"), { classtotest: t, leftright: r })] }, Isq.prototype.onSubmit = function (e) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads", r = PreAjax("Isq", e), o = { modid: ReqObj.Form[e].modId, ofr_id: ReqObj.Form[e].generationId, b_response: ReqObj.Form[e].optionsValue, q_desc: ReqObj.Form[e].questionsDesc, UPDIP: "India", UPDURL: window.document.URL.toString().substr(0, 450), UPDIP_COUNTRY: "India", UPDATESCREEN: "DESKTOP ENQUIRY FORM", glusr_id: usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "glid"), q_id: ReqObj.Form[e].questionsId, b_id: ReqObj.Form[e].optionsId }; "-1" === ReqObj.Form[e].mcatId || "" === ReqObj.Form[e].mcatId ? o.mcat_id = ReqObj.Form[e].catId : o.mcat_id = ReqObj.Form[e].mcatId, o.glusr_email = "", "Enq" === ReqObj.Form[e].formType && (o.enq = 1, o.funcToCall = "Enq"), isSet(ReqObj.Form[e].optionsValue) && ReqObj.Form[e].optionsValue.length > 0 && ValidGenId(ReqObj.Form[e].generationId) ? $.ajax({ type: "GET", url: appsServerName + "index.php?r=postblenq/saveIsqBlEnq", data: o, dataType: "json", crossDomain: !0, crossOrigin: !0, success: function (o) { isSet(o) ? 200 === parseInt(o.CODE) ? (blenqGATracking(t, "service:saveIsqBlEnq:success", getEventLabel(), 1, e), PostAjax(r, e)) : (blenqGATracking(t, "service:saveIsqBlEnq:failure", o, 1, e), Ajaxfailure(r, e)) : (blenqGATracking(t, "service:saveIsqBlEnq:failure", "response undefined", 1, e), Ajaxfailure(r, e)) }, error: function (o) { o = isSet(o) ? JSON.stringify(o) : "response undefined", blenqGATracking(t, "service:saveIsqBlEnq:failure", o, 1, e), Ajaxfailure(r, e) } }) : PostAjax(r, e) }, MoreDetails.prototype.displayAnswer = function (e) { var t = chatBlClass(e, "right"), r = "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : ""; return [ConversationRightWrapper(e, returnAnswer(e, "IsCountry"), { classtotest: t, leftright: r })] }, MoreDetails.prototype.onSubmit = function (e) { isSet(e) && (GetIsqFromService(e), PostAjax(PreAjax("MoreDetails", e), e)) }, MoreDetails.prototype.defaultEvents = function (e) { this.handleUI(e, "default") }, MoreDetails.prototype.handleEvents = function (e, t) { }, MoreDetails.prototype.handleUI = function (e, t) { "default" === t && (IsChatbl(e) && $("#t" + e + "country_input").focus(), $("#t" + e + "_country_err").addClass("bedsnone"), $("#t" + e + "_country_errmsg").html("")) }, MoreDetails.prototype.SaveDetails = function (e, t) { ReqObj.Form[e].UserInputs.IsCountry = t.target.textContent }, MoreDetails.prototype.displayHtml = function (e) { return [this.moredetialshtml] }, MoreDetails.prototype.addHtmlToArray = function (e) { this.MoreDetailsHtmlObjArray.push(e) }, MoreDetails.prototype.validate = function (e) { return !0 }, MoreDetails.prototype.hasHtml = function (e) { var t = e.tmpId; this.addHtmlToArray(this.getHtml(t)); var r = { SuffixOuterHtml: "<div>", SuffixClosingHtml: "</div>", suffix: "" }; this.moredetialshtml = MakeWrapper([this.MoreDetailsHtmlObjArray], t, r), "" !== this.moredetialshtml ? this.ifHtmlPresent(e, t) : this.ifHtmlNotPresent(e, t) }, MoreDetails.prototype.ifHtmlPresent = function (e, t) { if (e.that.NumberofClassCalled -= 1, AttachObject(e.object, t), isSet(e.AfterService)) for (var r = 0; r < e.AfterService.length; r++)e.that.MakeSeq(e.AfterService[r], t); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, t) }, MoreDetails.prototype.ifHtmlNotPresent = function (e, t) { e.hasFallback ? CreateSeq(e.FallbackObj) : e.that.NumberofClassCalled -= 1 }, MoreDetails.prototype.toUpdate = function (e, t) { return usercookie.getCookie("ImeshVisitor"), !0 }, MoreDetails.prototype.getIsCountry = function (e, t) { this.MoreDetailsHtmlObj.Label = "Is your Country "; var r = ReqObj.changeUserIso, o = isSet(ReqObj.changeUserCountry) && "" !== ReqObj.changeUserCountry ? ReqObj.changeUserCountry : r; this.MoreDetailsHtmlObj.Label += returnSpan("", "", o, "befwt"), this.MoreDetailsHtmlObj.Label += " ?"; var i = ""; return "inline" === chatBlPopupInline(e) ? (i += returnButton("t" + e, "_submit", "Yes, I am from " + o, chatBlClass(e, "yes")), i += returnButton("t" + e, "_submitNo", "Change my Country", chatBlClass(e, "change"))) : "popup" === chatBlPopupInline(e) && (i += returnButton("t" + e, "_submitNo", "Change my Country", chatBlClass(e, "change")), i += returnButton("t" + e, "_submit", "Yes, I am from " + o, chatBlClass(e, "yes"))), this.MoreDetailsHtmlObj.UserInput = i, this.MoreDetailsHtmlObj.OuterWrapper = (IsChatbl(e), ""), this.MoreDetailsHtmlObj.ClosingWrapper = (IsChatbl(e), ""), IsChatbl(e) && (ReqObj.Form[e].flags.isCountryFlagSuggSet = !0), this.MoreDetailsHtmlObj }, MoreDetails.prototype.getHtml = function (e) { var t = ReqObj.Form[e].formType.toLowerCase(); return this.getIsCountry(e, t) }, FormSeq.prototype.NextStep = function (e) { this.NumberofClassCalled = 1; var t = { pre: [], post: [] }, r = { UiArray: [], ServiceArray: [] }; if (ShowOtp()) $("#t" + e + "_byrinfo").html(get_buyer_info(e)).addClass("bedsnone"), this.NumberofClassCalled = 1, $("#t" + e + "_hdg").removeClass("bedsnone"), t = { pre: [], post: [this.NextStep] }, r = { UiArray: [], ServiceArray: [] }, CreateSeq({ object: { obj: new UserVerification(e), toReplace: !0, objHtmlId: e + "_otpbox", isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }); else if ($("#t" + e + "_byrinfo").html(get_buyer_info(e)).removeClass("bedsnone"), ReqObj.Form[e].disableIsq) this.OnCloseSeq(e); else if ("" === ReqObj.Form[e].IsqArray) if (this.NumberofClassCalled = 1, ReqObj.Form[e].flags.isDescDivShown) { this.NumberofClassCalled = 1, r = { UiArray: [], ServiceArray: [] }; t = { pre: [this.NextStep], post: [] }; CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, objHtmlId: e + "_isqbox", array: r, hooks: t, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, Thankyou: !0, FallbackObj: null }) } else { r = { UiArray: [], ServiceArray: [] }; var t = { pre: [this.NextStep], post: [] }, o = { object: { obj: new RequirementDtl(e), toReplace: !0, isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, array: r, hooks: t, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: o }) } else if (ReqObj.Form[e].prevCount < ReqObj.Form[e].IsqLength) { this.NumberofClassCalled = 1, r = { UiArray: [], ServiceArray: [] }, t = ReqObj.Form[e].prevCount < ReqObj.Form[e].IsqLength || !ReqObj.Form[e].flags.isDescDivShown || returnIsEnrichShownKeyVal(e) ? { pre: [this.NextStep], post: [] } : { pre: [this.OnCloseSeq], post: [] }, CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, objHtmlId: e + "_isqbox", array: r, hooks: t, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } else { r = { UiArray: [], ServiceArray: [] }; if (returnIsEnrichShownKeyVal(e) || ShowReqBox(e)) { if (this.NumberofClassCalled = 1, ShowReqBox(e)) { returnIsEnrichShownKeyVal(e) && "bl" === ReqObj.Form[e].formType.toLowerCase() && (this.NumberofClassCalled = 2); t = { pre: [this.OnCloseSeq], post: [] }; CreateSeq(o = { object: { obj: new RequirementDtl(e), toReplace: !0, objHtmlId: e + "_reqbox", isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } if (returnIsEnrichShownKeyVal(e) && "bl" === ReqObj.Form[e].formType.toLowerCase()) { t = { pre: [this.OnCloseSeq], post: [] }; if (ShowReqBox(e)) t = { pre: [], post: [] }; CreateSeq({ object: { obj: new BlStaticQues(e), toReplace: !0, objHtmlId: e + "_isqStatic", isService: !1, array: r, hooks: t }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } } else this.OnCloseSeq(e) } }, PostBlEnqUpdate.prototype.onSubmit = function (e) { if (isSet(e)) { var t = PreAjax("PostBlEnqUpdate", e); this.sendRequest(t, e) } }, PostBlEnqUpdate.prototype.defaultEvents = function () { }, PostBlEnqUpdate.prototype.getData = function (e) { var t = {}, r = usercookie.getCookie("ImeshVisitor"), o = usercookie.getCookie("iploc"); t.modId = ReqObj.Form[e].modId, t.s_ip = usercookie.getParameterValue(o, "gip"), t.s_ip_country = usercookie.getParameterValue(o, "gcnnm"), t.s_ip_country_iso = usercookie.getParameterValue(o, "gcniso"); var i = usercookie.getParameterValue(r, "fn"); if ("" === i) { var a = ReqObj.UserDetail.fn; if (a && -1 !== a.indexOf(" ")) var s = a.substr(0, a.indexOf(" ")), n = a.substr(a.indexOf(" ") + 1); t.s_first_name = "" !== s && void 0 !== s ? s : a, t.s_last_name = "" !== n && void 0 !== n ? n : "" } else t.s_first_name = i; return i = usercookie.getParameterValue(r, "em"), t.s_email = "" === i ? ReqObj.UserDetail.em : i, i = usercookie.getParameterValue(r, "mb1"), t.s_mobile = "" === i ? ReqObj.UserDetail.mb1 : i, t.s_city_name = ReqObj.UserDetail.cityname, t.s_glusrid = usercookie.getParameterValue(r, "glid"), t.s_country_name = usercookie.getParameterValue(o, "gcnnm"), t.generationId = ReqObj.Form[e].generationId, t.s_city_id = ReqObj.UserDetail.ctid, t.flag = IsChatbl(e) ? "BL" : ReqObj.Form[e].formType, "Enq" === ReqObj.Form[e].formType && (t.r_glusrid = ReqObj.Form[e].rcvGlid, t.rfq_queryDestination = ReqObj.Form[e].query_destination), ObjectTrim(t) }, PostBlEnqUpdate.prototype.sendRequest = function (e, t) { var r = "Enq" === ReqObj.Form[t].formType ? "Send Enquiry" : "Post Buy Leads", o = this.getData(t); ValidGenId(ReqObj.Form[t].generationId) ? $.ajax({ cache: !1, url: appsServerName + "index.php?r=Newreqform/BLEnqUpdate", type: "GET", dataType: "json", crossOrigin: !0, crossDomain: !0, data: o, success: function (o) { isSet(o) ? isSet(o.success) && 1 === parseInt(o.success) ? (PostAjax(e, t), blenqGATracking(r, "service:PostBlenqUpdate:success", getEventLabel(), 1, t)) : (blenqGATracking(r, "service:PostBlenqUpdate:failure", o, 1, t), PostAjax(e, t)) : (blenqGATracking(r, "service:PostBlenqUpdate:failure", "response undefined", 1, t), Ajaxfailure(e, t)) }, error: function (o) { o = isSet(o) ? JSON.stringify(o) : "response undefined", blenqGATracking(r, "service:PostBlenqUpdate:failure", o, 1, t), Ajaxfailure(e, t) } }) : PostAjax(e, t) }, ProductNameQuestion.prototype.onSubmit = function (e) { if (isSet(e)) { var t = PreAjax("ProductNameQuestion", e); ReqObj.Form[e].UserInputs.IsProduct === "Change the product".trim() && (ReqObj.Form[e].prodName = "", ReqObj.Form[e].mcatId = -1, ReqObj.Form[e].catId = -1), PostAjax(t, e) } }, ProductNameQuestion.prototype.validate = function (e, t) { return !0 }, ProductNameQuestion.prototype.displayAnswer = function (e) { var t = chatBlClass(e, "right"), r = "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : ""; return [ConversationRightWrapper(e, returnAnswer(e, "IsProduct"), { classtotest: t, leftright: r })] }, ProductNameQuestion.prototype.defaultEvents = function (e) { }, ProductNameQuestion.prototype.displayHtml = function (e) { return [this.ProductNameQuestionHTML] }, ProductNameQuestion.prototype.SaveDetails = function (e, t) { isSet(t.target.textContent) && "" !== t.target.textContent && (ReqObj.Form[e].UserInputs.IsProduct = t.target.textContent) }, ProductNameQuestion.prototype.addHtmlObjToArray = function (e) { this.ProductNameQuestionHtmlObjArray.push(e) }, ProductNameQuestion.prototype.toUpdate = function (e) { return !!usercookie.getCookie("ImeshVisitor") }, ProductNameQuestion.prototype.hasHtml = function (e) { if (isSet(e)) { var t = e.tmpId; this.addHtmlObjToArray(this.getProductHtml(t)); var r = { SuffixOuterHtml: "", SuffixClosingHtml: "", suffix: "" }; if (this.ProductNameQuestionHTML = MakeWrapper([this.ProductNameQuestionHtmlObjArray], t, r), "" !== this.ProductNameQuestionHTML) { if (e.that.NumberofClassCalled -= 1, AttachObject(e.object, t), isSet(e.AfterService)) for (var o = 0; o < e.AfterService.length; o++)e.that.MakeSeq(e.AfterService[o], t); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, t) } else e.hasFallback ? CreateSeq(e.FallbackObj) : e.that.NumberofClassCalled -= 1 } }, ProductNameQuestion.prototype.getProductHtml = function (e) { var t = ""; return t += 'Looking for "', t += returnSpan("", "", ReqObj.Form[e].mcatName, "befwt") + '"', t += "?", this.ProductNameQuestionHtmlObj.Label = t, t = "", "inline" === chatBlPopupInline(e) ? (t += returnButton("t" + e, "_submit", "Yes, Continue", chatBlClass(e, "yes")), t += returnButton("t" + e, "_submitNo", "Change the product", chatBlClass(e, "change"))) : "popup" === chatBlPopupInline(e) && (t += returnButton("t" + e, "_submitNo", "Change the product", chatBlClass(e, "change")), t += returnButton("t" + e, "_submit", "Yes, Continue", chatBlClass(e, "yes"))), this.ProductNameQuestionHtmlObj.UserInput = t, this.ProductNameQuestionHtmlObj.OuterWrapper = "", this.ProductNameQuestionHtmlObj.ClosingWrapper = "", this.ProductNameQuestionHtmlObj }, FormSeq.prototype.GetExistingObject = function (e, t) { if (isSet(e) && isSet(t) && isSet(ReqObj.Form[t].UiArray)) for (var r = 0; r < ReqObj.Form[t].UiArray.length; r++)for (var o = 0; o < ReqObj.Form[t].UiArray[r].length; o++)if (ConstructorName(ReqObj.Form[t].UiArray[r][o].Obj).toLowerCase() === e) return [r, o]; return !1 }, FormSeq.prototype.Checkforparent = function (e) { if (isSet(e) && isSet(ReqObj.Form[tmpId].UiArray)) for (var t = 0; t < ReqObj.Form[tmpId].UiArray.length; t++)for (var r = 0; r < ReqObj.Form[tmpId].UiArray[t].length; r++)if (ConstructorName(ReqObj.Form[tmpId].UiArray[t][r].Obj).toLowerCase() === e) return [t, r]; return !1 }, FormSeq.prototype.FirstStepSequence = function (e) { if (isSet(e)) { var t = isSet(ReqObj.Form[e].formType) ? ReqObj.Form[e].formType : ""; if ("09" === e.substring(0, 2) || "08" === e.substring(0, 2)) var r = "popup"; else r = "inline"; SetUserDetails(); t = isSet(ReqObj.Form[e].formType) ? ReqObj.Form[e].formType : ""; switch (this.StepCounter = -1, ReqObj.Form[e].OnCloseStep = !1, ReqObj.Form[e].isTNCShownOnFirstStep = !1, ReqObj.Form[e].flags.IsFirstStep = !0, 1 === parseInt(ReqObj.Form[e].disableRd) && (ReqObj.Form[e].flags.isDescDivShown = !0), addBlLoader(e, "center"), r.trim().toLowerCase()) { case "popup": "bl" === t.toLowerCase() ? this.BLpopup(e) : "chatbl" === t.toLowerCase() ? this.BLChat(e) : this.Enqpopup(e); break; case "inline": "bl" === t.toLowerCase() ? this.BLinline(e) : "chatbl" === t.toLowerCase() ? this.BLChat(e) : this.Enqinline(e) } } }, FormSeq.prototype.RenderUi = function (e) { if (isSet(e)) { var t = []; t = this.OnCloseCounter > -1 ? ReqObj.Form[e].OnCloseArray[this.OnCloseCounter] : ReqObj.Form[e].UiArray[this.StepCounter]; var r = ""; questionTransition(ReqObj.Form[e].formType, e); for (var o = 0; o < t.length; o++)if (isSet(t[o].Obj)) { var i = "#t" + e + "_bl_form", a = ""; if (isSet(t[o].Obj.idToAppend) && "" !== t[o].Obj.idToAppend && (i = t[o].Obj.idToAppend), isSet(t[o].Obj.idToHide) && "" !== t[o].Obj.idToHide && (a = t[o].Obj.idToHide), "function" == typeof t[o].Obj.displayHtml) { var s = $(i), n = t[o].Obj.displayHtml(e); isSet(n) || (n = []), RenderHtml(s, n), scrollSmoothToBottom("t" + e + "_chatScroll"), s.hasClass("bedsnone") && s.removeClass("bedsnone"), isSet(a) && "" !== a && $(a).css({ display: "none" }) } "function" == typeof t[o].Obj.defaultEvents && t[o].Obj.defaultEvents(e), isSet(t) && (o < t.length && o > 0 && (r += "-"), r += ConstructorName(t[o].Obj)) } return buttonName(t, e), HideSuggester(), "09" === e.substring(0, 2) && (ReqObj.Form[e].flags.isFlagSuggSet = !1), callFlagSuggestor(e, "load"), ShowHideTNC(e), removeBLLoader(e, "left"), r } return "" }, FormSeq.prototype.ChatblTncSubmit = function (e) { var t = this; $("#t" + e + "_chatBL").off("keypress.Submit").on("keypress.Submit", function (r) { 13 === (r.keyCode ? r.keyCode : r.which) && isSet(r) && isSet(r.target) && r.target.id === "t" + e + "_tCondCheckBox" && t.FormSubmit(e, r) }) }, FormSeq.prototype.ShowStep = function (e) { if (isSet(e)) { var t = this, r = (currentISO(), "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"), o = 0; o = parseInt(t.OnCloseCounter, 10) > -1 ? parseInt(this.StepCounter, 10) + 1 + (parseInt(t.OnCloseCounter, 10) + 1) : parseInt(this.StepCounter, 10) + 1, SetBlHeading(e, o); var i = "DisplayStep|" + o + "|"; i += this.RenderUi(e), IsChatbl(e) && (ReqObj.Form[e].classfortracking = i), 0 === this.StepCounter && IsChatbl(e) && "popup" === chatBlPopupInline(e) && blenqGATracking(r, ReqObj.Form[e].classfortracking, getEventLabel(), 1, e), 0 === this.StepCounter && "09" !== e.substring(0, 2) || (o > 1 || -1 === binaryArraySearch(ReqObj.Form[e].TrackedDisplaySteps, o)) && ("enq" === ReqObj.Form[e].formType.toLowerCase() && 0 === this.StepCounter ? imInvokeRequestForGaCode(e, "FormOpen:" + i) : blenqGATracking(r, i, getEventLabel(), 1, e), ReqObj.Form[e].TrackedDisplaySteps.push(o)), this.ChatblTncSubmit(e), $("#t" + e + "_submit").off("mousedown.Submit").on("mousedown.Submit", function (r) { $("#t" + e + "_login_field").length > 0 && $("#t" + e + "_q_first_nm").length > 0 && ($("#t" + e + "_login_field").attr("request", 1), ReqObj.isMouseDownFired = !0), t.FormSubmit(e, r) }), $("#t" + e + "_submitNo").off("click.Submit").on("click.Submit", function (r) { t.FormSubmit(e, r) }), $("#t" + e + "_bl_form").off("keypress.Submit").on("keypress.Submit", function (r) { 13 === (r.keyCode ? r.keyCode : r.which) && (isSet(r) && isSet(r.target) && isSet(r.target.id) && r.target.id === "t" + e + "_reqBoxTemplates" || $("#t" + e + "_submit").is(":disabled") || ($("#t" + e + "_chatBL").off("keypress.Submit"), t.FormSubmit(e, r) || t.ChatblTncSubmit(e))) }); var a = $("#t" + e + "_notSure"); a.length > 0 && a.off("click").on("click", function (r) { ReqObj.Form[e].NotSure = !0, t.FireTracking(e, r); var o = [], i = ""; t.OnCloseCounter > -1 ? (i = t.OnCloseCounter, o = t.OnCloseServiceArray[i]) : (i = t.StepCounter, o = t.FullServiceArray[i]), t.MoveToNext(e), formatServices(o, e), ServiceSeqGeneration(e) }) } }, FormSeq.prototype.MoveToNext = function (e) { if (isSet(e)) { var t = [], r = !1; if (isSet(t = this.OnCloseCounter > -1 ? this.OnCloseServiceArray[this.OnCloseCounter] : this.FullServiceArray[this.StepCounter])) for (var o = 0; o < t.length; o++)if (isSet(t[o].pre) && t[o].pre.length > 0 && !r && (r = !0, isSet(t[o].pre))) for (var i = 0; i < t[o].pre.length; i++)PrePostService(t[o].pre[i], e); return !r } return !1 }, FormSeq.prototype.ClassForTracking = function (e, t) { var r = [], o = "", i = 0; this.OnCloseCounter > -1 ? (o = this.OnCloseCounter, r = ReqObj.Form[e].OnCloseArray, i = this.StepCounter + 1 + (this.OnCloseCounter + 1)) : (o = this.StepCounter, r = ReqObj.Form[e].UiArray, i = this.StepCounter + 1); var a = "SubmitStep|" + i + "|"; if (isSet(r)) for (var s = 0; s < r[o].length; s++)s < r[o].length && s > 0 && (a += "-"), a += ConstructorName(r[o][s].Obj); return a }, FormSeq.prototype.FireTracking = function (e, t) { var r = this.ClassForTracking(e, t), o = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"; if (IsChatbl(e)) { var i = "", a = t.target.textContent; "" !== (i = "next" === trimVal(a.substring(0, 5)).toLowerCase() ? a.substring(0, 5).trim() : "not sure" === trimVal(a).toLowerCase() ? t.target.textContent.trim() : "yes" === a.substring(0, 3).toLowerCase() ? t.target.textContent.trim() : "change" === a.substring(0, 6).toLowerCase() ? t.target.textContent.trim() : "") && (i = "|" + i) } blenqGATracking(o, r + (i = isSet(i) ? i : ""), getEventLabel(), 0, e) }, FormSeq.prototype.FormSubmit = function (e, t) { if (HideSuggester(), isSet(e)) { CheckforUpdate(this.StepCounter, e), ReqObj.Form[e].NotSure = !1; var r = [], o = "", i = []; if (this.OnCloseCounter > -1 ? (o = this.OnCloseCounter, r = ReqObj.Form[e].OnCloseArray, i = this.OnCloseServiceArray[o]) : (o = this.StepCounter, r = ReqObj.Form[e].UiArray, i = this.FullServiceArray[o]), ValidateObj(r, o, e, t)) return !1; this.FireTracking(e, t); for (var a = 0; a < r[o].length; a++)"function" == typeof r[o][a].Obj.SaveDetails && r[o][a].Obj.SaveDetails(e, t); ReqObj.Form[e].flags.ImEqgl = !!usercookie.getCookie("imEqGl"), "enq" === ReqObj.Form[e].formType.toLowerCase() && "09" !== e.substring(0, 2) && ShowOtp() && !ReqObj.Form[e].flags.isOtpShown && ReqObj.Form[e].flags.ImEqgl && 0 === this.StepCounter ? ReqObj.Form[e].RemainingService = i : formatServices(i, e), ServiceSequenceHit(e, this.MoveToNext(e)) } return !0 }, FormSeq.prototype.getStep = function (e, t) { var r = this; if (t) { this.OnCloseCounter += 1; var o = ReqObj.Form[e].OnCloseArray, i = this.OnCloseCounter } else { this.StepCounter += 1; o = ReqObj.Form[e].UiArray, i = this.StepCounter } isSet(o) && i < o.length && (IsChatbl(e) ? setTimeout(function () { r.ShowStep(e) }, 350) : r.ShowStep(e)) }, FormSeq.prototype.MakeSeq = function (e) { isSet(e) && (ReplaceObject(e.object, e.tmpId, this), e.object.isService ? AttachObject(e.object, e.tmpId) : "function" == typeof e.object.obj.hasHtml && e.object.obj.hasHtml(e)) }, FormSeq.prototype.InlineOpenForm = function (e) { if (isSet(e)) { ClearInlineBlTag(e), $("#t" + e + "_enrichform_maindiv").html(GetPopUpHtml(e)).css({ display: "table" }), ReqObj.Form[e].btn = $("#t" + e + "_q_send_req_button").html(), $("#t" + e + "_q_send_req_button").html(""), "bl" === ReqObj.Form[e].formType.toLowerCase() && isSet(ReqObj.Form[e].displayImage) && "" === ReqObj.Form[e].displayImage && isSet(ReqObj.Form[e].zoomImage) && "" === ReqObj.Form[e].zoomImage && (ReqObj.Form[e].displayImage = isSet(ReqObj.mcatImage) && "" !== ReqObj.mcatImage ? ReqObj.mcatImage : ""), OpenBLEnqPopup(e), FormCloseButtons(e) } }, "undefined" == typeof isIframeApiloaded && (window.isIframeApiloaded = 0); var new_player = ""; function loadScript() { if (0 === isIframeApiloaded) { isIframeApiloaded = 1; var e = document.createElement("script"); e.src = "https://www.youtube.com/player_api"; var t = document.getElementsByTagName("script")[0]; t.parentNode.insertBefore(e, t) } } function onPlayerStateChange(e) { 1 !== e.data ? blStop = 0 : blStop = 1 } function ReqImage(e, t) { this.displayImage = "", this.zoomImage = "", this.defaultimg = "", this.vidUrl = "", this.ctaType = "", this.funcToCall = "", this.html = "", this.src = "", this.type = "", this.className = "ReqImage" } function onPlayerStateChange(e) { } function CreateSeq(e) { isSet(e) && (ReplaceObject(e.object, e.tmpId, e.that), "function" == typeof e.object.obj.hasHtml && e.object.obj.hasHtml(e)) } function RenderHtml(e, t) { isSet(t) || (t = []); for (var r = 0; r < t.length; ++r)e.append(t[r]) } function ShowUserAns(e) { if (isSet(e)) { removeBLLoader(e, "center"); var t = [], r = ReqObj.Form[e].FormSequence; t = r.OnCloseCounter > -1 ? r.OnCloseCounter > 0 ? ReqObj.Form[e].OnCloseArray[r.OnCloseCounter - 1] : [] : r.StepCounter > 0 ? ReqObj.Form[e].UiArray[r.StepCounter - 1] : []; for (var o = 0; o < t.length; o++)if (isSet(t[o].Obj)) { var i = "#t" + e + "_bl_form", a = ""; if (isSet(t[o].Obj.idToAppend) && "" !== t[o].Obj.idToAppend && (i = t[o].Obj.idToAppend), isSet(t[o].Obj.idToHide) && "" !== t[o].Obj.idToHide && (a = t[o].Obj.idToHide), "function" == typeof t[o].Obj.displayAnswer) { var s = $(i); RenderHtml(s, t[o].Obj.displayAnswer(e)), s.hasClass("bedsnone") && s.removeClass("bedsnone"), isSet(a) && "" !== a && $(a).css({ display: "none" }) } } } } function questionTransition(e, t) { if (isSet(e) && -1 === $.inArray(e.toLowerCase(), showElemonForm)) $("#t" + t + "_bl_form").html(""); else if (isSet(e) && -1 !== $.inArray(e.toLowerCase(), showElemonForm)) if ($(".t" + t + "_userInput").each(function () { $(this).remove() }), ReqObj.Form[t].NotSure) { var r = chatBlClass(t, "right"), o = "inline" === chatBlPopupInline(t) ? "message-right" : "popup" === chatBlPopupInline(t) ? "message-right1" : ""; $("#t" + t + "_bl_form").append(ConversationRightWrapper(t, Skipped, { classtotest: r, leftright: o })) } else ShowUserAns(t) } function makeFinalSeq(e, t) { isSet(e) && isSet(e.that) && isSet(e.that.FullServiceArray) && isSet(ReqObj.Form[t].UiArray) && (e.that.FullServiceArray.push(e.object.array.ServiceArray), ReqObj.Form[t].UiArray.push(e.object.array.UiArray), e.that.getStep(t)) } function formatServices(e, t) { if (isSet(ReqObj.Form[t].ServiceSequence) && isSet(ReqObj.Form[t].HitArray) && isSet(e)) for (var r = 0; r < e.length; r++) { var o = findParent(ConstructorName(e[r].fn)), i = !1; if ((o = isSet(o) ? o : []).length > 0) for (var a = 0; a < o.length; a++)FindCorrectSpot(ReqObj.Form[t].ServiceSequence, e[r], o[a]) ? i = !0 : FindCorrectSpot(ReqObj.Form[t].HitArray, e[r], o[a]) ? i = !0 : a !== o.length - 1 || i || ReqObj.Form[t].ServiceSequence.push(e[r]); else ReqObj.Form[t].ServiceSequence.push(e[r]) } } function ServiceSequenceHit(e, t) { if (isSet(e) && isSet(ReqObj.Form[e]) && isSet(ReqObj.Form[e].ServiceSequence)) for (isSet(t) && t && addBlLoader(e, "right"); ReqObj.Form[e].ServiceSequence.length > 0;)isSet(ReqObj.Form[e].ServiceSequence[0]) && isSet(ReqObj.Form[e].ServiceSequence[0].fn) && "function" == typeof ReqObj.Form[e].ServiceSequence[0].fn.onSubmit ? ReqObj.Form[e].ServiceSequence[0].fn.onSubmit(e) : IsProduction() && ReqObj.Form[e].ServiceSequence.pop() } function ServiceSeqGeneration(e) { if (isSet(e) && isSet(ReqObj.Form[e]) && isSet(ReqObj.Form[e].ServiceSequence)) for (; ReqObj.Form[e].ServiceSequence.length > 0;)isSet(ReqObj.Form[e].ServiceSequence[0]) && isSet(ReqObj.Form[e].ServiceSequence[0].fn) && "function" == typeof ReqObj.Form[e].ServiceSequence[0].fn.onSubmit && isSet(ConstructorName(ReqObj.Form[e].ServiceSequence[0].fn)) && "generation" === ConstructorName(ReqObj.Form[e].ServiceSequence[0].fn).toLowerCase() ? ReqObj.Form[e].ServiceSequence[0].fn.onSubmit(e) : ReqObj.Form[e].ServiceSequence.pop() } function termNcdata(e) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads", r = usercookie.getCookie("iploc"), o = {}; o.s_glusrid = usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "glid"), o.modid = ReqObj.Form[e].modId, o.s_user_agent = navigator.userAgent, o.s_ip = usercookie.getParameterValue(r, "gip"), o.s_ip_country = usercookie.getParameterValue(r, "gcnnm"), o.curr_page_url = window.location.href, o.reference_text = ReqObj.Form[e].refText, o.s_ip_country_iso = usercookie.getParameterValue(r, "gcniso"), isSet(o.s_ip) && "" !== o.s_ip && isSet(o.s_glusrid) && "" !== o.s_glusrid && isSet(o.s_user_agent) && "" !== o.s_user_agent && isSet(o.modid) && "" !== o.modid && isSet(o.s_ip_country_iso) && "IN" !== o.s_ip_country_iso && $.ajax({ cache: !1, url: appsServerName + "index.php?r=Newreqform/TermNCondition", type: "GET", crossOrigin: !0, crossDomain: !0, dataType: "json", data: o, success: function (r) { isSet(r) && isSet(r.RESPONSE) && 200 === parseInt(r.RESPONSE.Code) || blenqGATracking(t, "service:TermNCondition:failure", r, 1, e) }, error: function (r) { r = isSet(r) ? r : "response undefined", blenqGATracking(t, "service:TermNCondition:failure", r, 1, e) } }) } function TermsConditions(e) { "inline" === chatBlPopupInline(e) ? this.TermsConditionsHtml = "<div class='message-left'><div class='message-text bemb5'>Before we move ahead,<br><span class='befwt' > Please accept</span > our <a href = 'https://www.indiamart.com/terms-of-use.html' target = '_blank' class='betrmt' > terms</a > and <a href = 'https://www.indiamart.com/privacy-policy.html' target = '_blank' class='betrmt'> privacy policy</a ></div><div class='t" + e + "_userInput'><button id='t" + e + "_submit' class='bechat-btn bemt10'>I Agree</button></div></div>" : "popup" === chatBlPopupInline(e) && (this.TermsConditionsHtml = "<div class='message-left'><div class='message-text2 bemb5'>Before we move ahead,<br><span class='befwt' > Please accept</span > our <a href = 'https://www.indiamart.com/terms-of-use.html' target = '_blank' class='betrmt' > terms</a > and <a href = 'https://www.indiamart.com/privacy-policy.html' target = '_blank' class='betrmt'> privacy policy</a ></div><div class='t" + e + "_userInput'><button id='t" + e + "_submit' class='bechat-btn bemt10'>I Agree</button></div></div>"), this.className = "TermsConditions", this.btnText = "" } if (loadScript(), ReqImage.prototype.extractValues = function (e, t) { isSet(e) && isSet(t) && (this.displayImage = isSet(e[t].displayImage) && "" !== e[t].displayImage ? e[t].displayImage : "", this.zoomImage = isSet(e[t].zoomImage) && "" !== e[t].zoomImage ? e[t].zoomImage : "", this.vidUrl = isSet(e[t].vidUrl) && "" !== e[t].vidUrl ? e[t].vidUrl : "", this.ctaType = isSet(e[t].type) && "" !== e[t].type ? e[t].type : "") }, ReqImage.prototype.displayHtml = function (e, t, r) { return this.extractValues(t, r), $("#t" + e + "parent_iframe").addClass("bedsnone"), this.defaultimg = "<div id='t" + e + "'defaultimage' class='be-nobgimg'><div class='blnewform_sprit be-noimg'></div></div>", this.funcToCall = void 0 !== ReqObj.Form[e].formType ? ReqObj.Form[e].formType : "", this.RDatatype = void 0 !== ReqObj.Form[e].modrefType ? ReqObj.Form[e].modrefType : "", "video" === this.ctaType.toLowerCase() ? ($("#t" + e + "parent_iframe").html("<div id='t" + e + "_prodVideo' class='be-prdimg'></div>"), 0 === isIframeApiloaded && loadScript(), this.showVideo(e)) : this.showImage(e) }, ReqImage.prototype.defaultEvents = function () { this.handleUI() }, ReqImage.prototype.showImage = function (e) { if ("enq" === this.funcToCall.toLowerCase()) if ("" !== this.displayImage) this.html += this.getImage("t" + e + "_dispimage", "", this.displayImage), this.html += "" !== this.zoomImage ? this.getImage("t" + e + "_zoomimage", "", this.zoomImage) : ""; else { if ("" === this.zoomImage) return "<div id='t" + e + "defaultimage' class='be-nobgimg'><div class='blnewform_sprit be-noimg'></div></div>"; this.html += this.getImage("t" + e + "_zoomimage", "", this.zoomImage) } if ("bl" === this.funcToCall.toLowerCase() || "popup" === chatBlPopupInline(e)) { if ("" === this.displayImage) return "<div id=t'" + e + "defaultimage' class='be-nobgimg'><div class='blnewform_sprit be-noimg'></div></div>"; this.html += this.getImage("t" + e + "_dispimage", "", this.displayImage) } return this.html += "<span class='be-blrprdimg'  style='background-image: url(" + this.src + ");'></span>", this.html }, ReqImage.prototype.getImage = function (e, t, r) { return this.src = r, "<img id='" + e + "' class='" + t + "'  src='" + r + "'/>" }, ReqImage.prototype.showVideo = function (e) { if ("undefined" === this.vidUrl || "" === this.vidUrl) return this.showImage(e); var t = this; "undefined" == typeof YT && 0 === isIframeApiloaded ? (loadScript(e), window.onYouTubeIframeAPIReady = function () { t.showVideo(e) }) : "undefined" == typeof YT && 1 === isIframeApiloaded || 1 === YT.loading && 0 === YT.loaded || 0 === isIframeApiloaded ? window.onYouTubeIframeAPIReady = function () { t.showVideo(e) } : 1 === YT.loading && 1 === YT.loaded && (isIframeApiloaded = 2, this.getVideo(e)) }, ReqImage.prototype.getVideo = function (e) { 1 === YT.loading && 1 === YT.loaded && (isIframeApiloaded = 2, new_player = new YT.Player("t" + e + "_prodVideo", { width: "500", height: "500", playerVars: { rel: 0, autoplay: 1 }, videoId: this.vidUrl, events: { onStateChange: function (t) { $("#t" + e + "_imglodr").addClass("bedsnone"), isSet(new_player) && "function" == typeof new_player.getPlayerState && 0 === new_player.getPlayerState() && (new_player.seekTo(0), new_player.stopVideo()) } } }), $("#t" + e + "parent_iframe").removeClass("bedsnone"), $("#t" + e + "_prodimg").addClass("bedsnone")) }, FormSeq.prototype.SubsequentStep = function (e) { ReqObj.Form[e].flags.IsFirstStep = !1; var t = { UiArray: [], ServiceArray: [] }, r = { pre: [], post: [] }; leftSideTransition(1, e), 1 === parseInt(ReqObj.Form[e].disableRd) && (ReqObj.Form[e].flags.isDescDivShown = !ReqObj.Form[e].flags.isDescDivShown), $("#t" + e + "_byrinfo").html(get_buyer_info(e)).removeClass("bedsnone"), $("#t" + e + "_hdg").removeClass("bedsnone"), $("#t" + e + "_login").addClass("bedsnone"); var o = !1; if ("04" === e.substring(0, 2) && ReqObj.Form[e].flags.ImEqgl && "Enq" === ReqObj.Form[e].formType) { if (ShowOtp() && usercookie.getCookie("imEqGl")) { o = !0, this.NumberofClassCalled = 1; t = { UiArray: [], ServiceArray: [] }; r.pre = [], r.post = [this.NextStep], CreateSeq({ object: { obj: new UserVerification(e), toReplace: !1, objHtmlId: e + "_otpbox", isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null, nextStep: ReqObj.Form[e].NextStep }) } else if ((NEC() && "IN" !== currentISO() && !0 === ReqObj.Form[e].OnCloseStep || NEC() && "IN" === currentISO()) && (!ReqObj.Form[e].flags.isNECShown || "09" !== e.substring(0, 2))) { o = !0, this.NumberofClassCalled = 1, r = { pre: [], post: [] }; var i = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; r = { pre: [this.NextStep], post: [] }, CreateSeq({ object: { obj: new ContactDetail(1, 1, 1), toReplace: !1, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [i], hasFallback: !1, FallbackObj: null, nextStep: ReqObj.Form[e].NextStep }) } } else if (!(NEC() && "IN" !== currentISO() && !0 === ReqObj.Form[e].OnCloseStep || NEC() && "IN" === currentISO()) || ReqObj.Form[e].flags.isNECShown && "09" === e.substring(0, 2)) { if (ShowOtp()) { o = !0, this.NumberofClassCalled = 1; t = { UiArray: [], ServiceArray: [] }; r.pre = [], r.post = [this.NextStep], CreateSeq({ object: { obj: new UserVerification(e), toReplace: !1, objHtmlId: e + "_otpbox", isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } } else { o = !0, this.NumberofClassCalled = 1, r = { pre: [], post: [] }; i = { object: { obj: new PostBlEnqUpdate(e), toReplace: !1, isService: !0, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }; r = { pre: [this.NextStep], post: [] }, CreateSeq({ object: { obj: new ContactDetail(1, 1, 1), toReplace: !1, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [i], hasFallback: !1, FallbackObj: null, nextStep: ReqObj.Form[e].NextStep }) } if (!o) if (ReqObj.Form[e].disableIsq || ShowStaticQuestionForeign(e)) if (returnIsEnrichShownKeyVal(e) || !ReqObj.Form[e].flags.isDescDivShown) { this.NumberofClassCalled = 1; var a = { pre: [this.OnCloseSeq], post: [] }; r = { pre: [], post: [] }; if (returnIsEnrichShownKeyVal(e) && !ReqObj.Form[e].flags.isDescDivShown ? this.NumberofClassCalled = 2 : this.NumberofClassCalled = 1, returnIsEnrichShownKeyVal(e)) { var s = { obj: new BlStaticQues(e), toReplace: !0, isService: !1, array: t }; 1 === this.NumberofClassCalled ? s.hooks = a : 2 === this.NumberofClassCalled && (s.hooks = r), CreateSeq({ object: s, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } if (!ReqObj.Form[e].flags.isDescDivShown) { var n = ShowStaticQuestionForeign(e) && !ReqObj.Form[e].disableIsq ? "isq" : "noisq"; r.pre = [this.OnCloseSeq], r.post = [], CreateSeq(l = { object: { obj: new RequirementDtl(e, n), toReplace: !0, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: { object: { obj: new RequirementDtl(e, "noisq"), toReplace: !0, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1 }, nextStep: ReqObj.Form[e].NextStep }) } } else this.OnCloseSeq(e); else if ("" === ReqObj.Form[e].IsqArray) if (this.NumberofClassCalled = 1, !ReqObj.Form[e].flags.isDescDivShown || returnIsEnrichShownKeyVal(e)) { t = { UiArray: [], ServiceArray: [] }, r = { pre: [this.NextStep], post: [] }; if (!ReqObj.Form[e].flags.isDescDivShown) var l = { object: { obj: new RequirementDtl(e), toReplace: !0, isService: !1, array: t, hooks: r }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null, nextStep: ReqObj.Form[e].NextStep }; CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, array: t, hooks: r, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, FallbackObj: l }) } else { this.NumberofClassCalled = 1, t = { UiArray: [], ServiceArray: [] }; r = { pre: [this.NextStep], post: [] }; CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, array: t, hooks: r, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !0, Thankyou: !0, FallbackObj: null }) } else if (ShowIsq(e)) { this.NumberofClassCalled = 1; t = { UiArray: [], ServiceArray: [] }; r = { pre: [this.NextStep], post: [] }, CreateSeq({ object: { obj: ReqObj.Form[e].GlobalIsqObject, array: t, hooks: r, isService: !1 }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null, nextStep: ReqObj.Form[e].NextStep }) } else if (null === ReqObj.Form[e].IsqArray || !(ReqObj.Form[e].prevCount < ReqObj.Form[e].IsqLength)) { t = { UiArray: [], ServiceArray: [] }; if (returnIsEnrichShownKeyVal(e) || ShowReqBox(e)) { a = { pre: [this.OnCloseSeq], post: [] }, r = { pre: [], post: [] }; if (returnIsEnrichShownKeyVal(e) && ShowReqBox(e) ? this.NumberofClassCalled = 2 : this.NumberofClassCalled = 1, ShowReqBox(e)) CreateSeq(l = { object: { obj: new RequirementDtl(e), toReplace: !1, isService: !1, array: t, hooks: a }, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }); if (returnIsEnrichShownKeyVal(e) && "bl" === ReqObj.Form[e].formType.toLowerCase()) { s = { obj: new BlStaticQues(e), toReplace: !0, isService: !1, array: t }; 1 === this.NumberofClassCalled ? s.hooks = a : 2 === this.NumberofClassCalled && (s.hooks = r), CreateSeq({ object: s, tmpId: e, that: this, AfterService: [], hasFallback: !1, FallbackObj: null }) } } else this.OnCloseSeq(e) } }, TermsConditions.prototype.displayHtml = function (e) { if (isSet(e)) return [this.TermsConditionsHtml] }, TermsConditions.prototype.toUpdate = function (e) { return !!usercookie.getCookie("ImeshVisitor") }, TermsConditions.prototype.displayAnswer = function (e) { var t = chatBlClass(e, "right"), r = "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : ""; return [ConversationRightWrapper(e, this.btnText, { classtotest: t, leftright: r })] }, TermsConditions.prototype.defaultEvents = function (e) { }, TermsConditions.prototype.hasHtml = function (e) { if (isSet(e)) { this.TermsConditionsHtml; if ("" !== this.TermsConditionsHtml) { if (e.that.NumberofClassCalled -= 1, AttachObject(e.object, e.tmpId), isSet(e.AfterService)) for (var t = 0; t < e.AfterService.length; t++)e.that.MakeSeq(e.AfterService[t], e.tmpId); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, e.tmpId) } else e.hasFallback && CreateSeq(e.FallbackObj) } }, TermsConditions.prototype.validate = function (e) { return !0 }, TermsConditions.prototype.SaveDetails = function (e, t) { isSet(t.target) && notEmpty(t.target.textContent) && (this.btnText = t.target.textContent) }, TermsConditions.prototype.onSubmit = function (e) { PostAjax(PreAjax("TermsConditions", e), e) }, null == blpage) { var blpage = {}; blpage.toIdentifiedQ = new Array, blpage.toIdentified = function () { if (isSet(blpage.toIdentifiedQ)) for (var e = 0; e < blpage.toIdentifiedQ.length; e++)isSet(blpage.toIdentifiedQ[e]) && "function" == typeof blpage.toIdentifiedQ[e] && blpage.toIdentifiedQ[e].apply() } } function UpdateSeq(e) { for (var t in ReqObj.Form) t !== e && formToUpdate(t) } function formToUpdate(e) { IsChatbl(e) ? UpdateCurrentStep(e) : CallFormFunc(e) } function CallFormFunc(e) { -1 === $.inArray(e.substring(0, 2), BlPopup) ? OpenForm(ReqObj.Original[e]) : -1 === $.inArray(e.substring(0, 2), EnqPopup) && OpenForm(ReqObj.Original[e]) } function callToIdentifiedQ(e, t, r) { void 0 === t && UpdateUserDetailKey(), 0 !== r && UpdateSeq(e), isSet(blpage) ? isSet(blpage.toIdentified) && "function" == typeof blpage.toIdentified && blpage.toIdentified() : isSet(window.parent.blpage) && isSet(window.parent.blpage.toIdentified) && "function" == typeof window.parent.blpage.toIdentified && window.parent.blpage.toIdentified(), isSet(page) ? isSet(page.Identified) && "function" == typeof page.Identified && page.Identified() : isSet(window.parent.page) && isSet(window.parent.page.Identified) && "function" == typeof window.parent.page.Identified && window.parent.page.Identified() } function ResetClass(e, t) { if (isSet(e)) for (var r = 0; r < e.length; r++)isSet(e[r].Obj) && "function" == typeof e[r].Obj.resetClass && e[r].Obj.resetClass(t) } function UpdateCurrentStep(e) { if (isSet(e)) { ShowHideTNC(e); var t = ReqObj.Form[e].FormSequence; if (t.OnCloseCounter > -1) { t.OnCloseCounter -= 1; t.OnCloseServiceArray.splice(t.OnCloseCounter, 1); ReqObj.Form[e].OnCloseArray = ReqObj.Form[e].OnCloseArray[this.OnCloseCounter] } else { var r = ReqObj.Form[e].UiArray[t.StepCounter]; if (BlReloadRequired(r, e) && RemoveLastQuestion(e)) { ResetClass(r, e), Getprepost(t.FullServiceArray.splice(t.StepCounter, 1)[0], e); var o = t.StepCounter; if (t.StepCounter -= 1, t.StepCounter > -1 ? ReqObj.Form[e].UiArray.splice(o, 1) : ReqObj.Form[e].UiArray = [], isSet(ReqObj.Form[e].LastPrePost) && ReqObj.Form[e].LastPrePost instanceof Array) for (var i = 0; i < ReqObj.Form[e].LastPrePost.length; ++i)PrePostService(ReqObj.Form[e].LastPrePost[i], e) } } } } function RemoveLastQuestion(e) { return "inline" === chatBlPopupInline(e) ? RemoveLastInlineQuestion() : "popup" === chatBlPopupInline(e) ? RemoveLastPopupQuestion() : void 0 } function RemoveLastInlineQuestion() { var e = $(".message-left").last(); return !e.next().hasClass("message-right") && (e.remove(), !0) } function RemoveLastPopupQuestion() { var e = $(".message-left1").last(); return !e.next().hasClass("message-right1") && (e.remove(), !0) } function BlReloadRequired(e, t) { if (isSet(e)) { if (e instanceof Array) { for (var r = 0; r < e.length; ++r)if ("function" == typeof e[r].Obj.toUpdate) return e[r].Obj.toUpdate(t); return !1 } return -1 !== $.inArray(ConstructorName(e.Obj), ReloadReqClass) } return !1 } function Getprepost(e, t) { if (isSet(e)) for (var r = 0; r < e.length; ++r)if (!isSet(ReqObj.Form[t].LastPrePost)) { var o = CheckPrepost(e[r]); "" !== o && (ReqObj.Form[t].LastPrePost = o) } } function CheckPrepost(e) { return isSet(e) ? isSet(e.current) && e.current.length > 0 ? e.current : isSet(e.pre) && e.pre.length > 0 ? e.pre : isSet(e.post) && e.post.length > 0 ? e.post : "" : "" } function UpdateUserDetailKey() { var e = usercookie.getCookie("ImeshVisitor"); ReqObj.UserDetail.fn = usercookie.getParameterValue(e, "fn"), ReqObj.UserDetail.em = usercookie.getParameterValue(e, "em"), ReqObj.UserDetail.mb1 = usercookie.getParameterValue(e, "mb1"), ReqObj.UserDetail.ctid = usercookie.getParameterValue(e, "ctid"), ReqObj.UserDetail.uv = usercookie.getParameterValue(e, "uv"), ReqObj.UserDetail.statename = "", ReqObj.UserDetail.stateid = "", ReqObj.UserDetail.cityname = "", ReqObj.UserDetail.ctoth = "" } function UserCookie() { } UserCookie.prototype.getCookie = function (e) { var t = document.cookie, r = e + "="; if (isSet(t) && t.length > 0) { var o = t.indexOf(r); if (-1 === o) return ""; o += r.length; var i = t.indexOf(";", o); return -1 === i && (i = t.length), unescape(t.substring(o, i)) } return "" }, UserCookie.prototype.getParameterValue = function (e, t) { if (isSet(e) && "" !== e) { for (var r = e.split("|"), o = isSet(r) ? r.length : 0, i = 0; i < o; i++) { var a = r[i].split("="); if (a[0] === t) return isSet(a[1]) && "" !== a[1] ? a[1] : "" } return "" } return "" }, UserCookie.prototype.setCookie = function (e, t, r, o) { var i = "", a = window.location.href; if (r && t) { var s = new Date; s.setTime(s.getTime() + 24 * r * 60 * 60 * 1e3), i = "; expires=" + s.toGMTString() } if (isSet(o) && "TDW" === o) { var n = document.location.hostname; document.cookie = e + "=" + t + i + "; domain=" + n + ";path=/" } else a.match("hellotrade.com") ? document.cookie = e + "=" + escape(t) + i + "; domain=.hellotrade.com;path=/" : a.match("indianindustry.com") ? document.cookie = e + "=" + escape(t) + i + "; domain=.indianindustry.com;path=/" : document.cookie = e + "=" + escape(t) + i + "; domain=.indiamart.com;path=/" }, UserCookie.prototype.deleteCookie = function (e) { document.cookie = e + "=;expires=;domain=.indiamart.com;path=/" }; usercookie = new UserCookie; function UserLogin(e) { this.tmpId = "", this.imeshCookie = "", this.iplocCookie = "", this.userCountry = "", this.loginhtml = "", this.tid = "", this.username = "", this.blurcalled = !1, this.className = "UserLogin", this.what = e, this.UserLoginCssObj = {}, this.UserloginHtmlObj = { Label: "", UserInput: "", OuterWrapper: "", ClosingWrapper: "" }, this.UserloginHtmlObjArray = [], this.loginChatMsg = "", this.toChange = !1, this.isNotCalled = !1, this.cookies() } function UserVerification() { this.otpCount = 0, this.imeshCookie = "", this.v4iilexCookie = "", this.verifyhtml = "", this.className = "UserVerification", this.UserVerificationHtmlObj = { Label: "", UserInput: "", OuterWrapper: "", ClosingWrapper: "" }, this.UserVerificationHtmlObjArray = [], this.otp = "" } function Validation() { new UserCookie; this.result = { type: !0, error: "" }, this.usercountry = currentISO() } UserLogin.prototype.toUpdate = function (e) { return !!usercookie.getCookie("ImeshVisitor") || !0 === this.isNotCalled }, UserLogin.prototype.cookies = function () { this.imeshCookie = usercookie.getCookie("ImeshVisitor"), this.iplocCookie = usercookie.getCookie("iploc"), this.userCountry = usercookie.getParameterValue(this.iplocCookie, "gcniso"), ReqObj.changeUserCountry = isSet(ReqObj.changeUserCountry) && "" !== ReqObj.changeUserCountry ? ReqObj.changeUserCountry : usercookie.getParameterValue(this.iplocCookie, "gcnnm") }, UserLogin.prototype.displayAnswer = function (e) { var t = !0 === this.toChange ? "" : ReturnBlUserName(e), r = !0 === this.toChange ? "toChange" : "PrimaryInfo", o = chatBlClass(e, "right"), i = "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : ""; return [ConversationRightWrapper(e, returnAnswer(e, r), { classtotest: o, leftright: i }), t] }, UserLogin.prototype.defaultEvents = function (e) { isSet(e) && (IsChatbl(e) && this.handleUI({ data: { todo: "default", obj: this, tmpId: e } }), this.handleUI({ data: { todo: "isoFlag", obj: this, tmpId: e } }), this.handleUI({ data: { todo: "chatblFlag", obj: this, tmpId: e } }), this.handleEvents(this, e)) }, UserLogin.prototype.onSubmit = function (e) { if (isSet(e)) if (!1 === this.toChange) { var t = PreAjax("UserLogin", e); this.sendRequest({ data: { logObject: t, tmpId: e, userlogin: this, blureve: !1, todo: "login" } }) } else { PostAjax(t = PreAjax("UserLogin", e), e) } }, UserLogin.prototype.SaveDetails = function (e, t) { IsChatbl(e) && (ReqObj.Form[e].UserInputs.PrimaryInfo = $("#t" + e + "_login_field").val(), isSet(t.target.textContent) && "" !== t.target.textContent && (ReqObj.Form[e].UserInputs.toChange = t.target.textContent)) }, UserLogin.prototype.addHtmlObjToArray = function (e) { this.UserloginHtmlObjArray.push(e) }, UserLogin.prototype.displayHtml = function (e) { if (isSet(e)) { if ($("#t" + e + "_byrinfo").removeClass("bedsnone"), $("#t" + e + "_hdg").removeClass("bedsnone"), $("#t" + e + "_login").removeClass("bedsnone"), IsChatbl(e)) { var t = ""; t = "IN" === currentISO() ? "number" : "email", this.loginChatMsg = "<div class='t" + e + "_userInput'><div class='befs11 beclr'><i class='chat-elip'>i</i>Seller Details are sent on this " + t + "</div></div>" } return [this.loginhtml, this.loginChatMsg] } }, UserLogin.prototype.hasHtml = function (e) { if (isSet(e)) { var t = e.tmpId; this.addHtmlObjToArray(this.getLoginHTML(t)); var r = { SuffixOuterHtml: "<div  id='t" + t + "_login' class='bedvh'>", SuffixClosingHtml: "</div>", suffix: "_login" }; return this.loginhtml = MakeWrapper([this.UserloginHtmlObjArray], t, r), e.that.NumberofClassCalled -= 1, "" !== this.loginhtml ? this.ifHtmlPresent(e, t) : this.ifHtmlNotPresent(e, t), "" !== this.loginhtml } }, UserLogin.prototype.ifHtmlPresent = function (e, t) { if (AttachObject(e.object, t), isSet(e.AfterService)) for (var r = 0; r < e.AfterService.length; r++)e.that.MakeSeq(e.AfterService[r], t); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, t) }, UserLogin.prototype.ifHtmlNotPresent = function (e, t) { e.hasFallback && CreateSeq(e.FallbackObj) }, UserLogin.prototype.validate = function (e, t) { if (isSet(e)) { if (isSet(t.target.textContent) && "" !== t.target.textContent ? (ReqObj.Form[e].UserInputs.toChange = t.target.textContent, this.toChange = !0) : this.toChange = !1, !1 === this.toChange) { var r = currentISO(); this.captureDetails(r, e), isSet(validation) || createGlobalObject(); ReqObj.Form[e].formType.toLowerCase(); this.username = $("#t" + e + "_login_field").val(); var o = "IN" === r ? validation.isMobileValid(this.username) : validation.isEmailFilled(this.username); return !1 !== o.type || (this.handleUI({ data: { tmpId: e, errormsg: o.error, todo: "validationError" } }), !1) } return !0 } }, UserLogin.prototype.captureDetails = function (e, t) { "IN" === e ? ReqObj.UserDetail.mb1 = $("#t" + t + "_login_field").val() : ReqObj.UserDetail.em = $("#t" + t + "_login_field").val() }, UserLogin.prototype.CSSObj = function (e) { }, UserLogin.prototype.returnText = function (e) { return "IN" === e ? "Enter your mobile" : "Enter your email" }, UserLogin.prototype.returnLoginFieldClass = function (e) { return "IN" === e ? "be-input benords beW3 beh32" : "be-input benords beW3 beh32 beemail" }, UserLogin.prototype.returnLoginValue = function () { return "" }, UserLogin.prototype.returnErrorDiv = function (e, t) { var r = "", o = IsChatbl(e) ? "bltperor bedsnone" : "be-erbx beerrp bedsnone", i = (IsChatbl(e), ""); return r += returnContainer("t" + e, "_msg_primary_info_err_login", o, "", ""), r += returnContainer("t" + e, "_primary_info_errmsg_login", i, "content", ""), IsChatbl(e) ? r += "</div></div>" : r += '</div><a class="be-erarw" data-role="arrow"></a></div>', r }, UserLogin.prototype.getLabel = function (e, t, r) { var o = "IN" === r ? "Mobile Number" : "Email ID", i = IsChatbl(e) ? "" : "be-lbl beml-50", a = IsChatbl(e) ? "Okay, to get started please share your " : o, s = ""; IsChatbl(e) ? (s += a, s += returnSpan("t" + e, "login_span_bold", "Contact Details", "befwt")) : (s += this.returnErrorDiv(e, t), s += returnLabel("t" + e, a, "_label-l", i)), this.UserloginHtmlObj.Label = s }, UserLogin.prototype.getInput = function (e, t, r) { this.UserloginHtmlObj.UserInput = IsChatbl(e) ? this.getChatBlInput(e, t, r) : this.getBlEnqInput(e, t, r) }, UserLogin.prototype.getChatBlInput = function (e, t, r) { var o = ""; o += returnSpan("t" + e, "chatbltick", "", "chat-tickbx2 bedsnone"), o += returnSpan("t" + e, "chatbltick", "", "chat-tickbx2 bedsnone"), o += "IN" === r ? returnIsoHtml(e, "beiso", ReqObj.isoFlag) : returnDl("t" + e, "_Country_dropdown", "dropdown bebdr be-flg", !0), o += returnInput("t" + e, "_login_field", "text", "login_field", this.returnText(r), "blchat-inpt", "", "padding-left: 44px", ""); var i = returnContainer("", "", "chat-arrow", "", ""); return o += returnButton("t" + e, "_submit", i += "</div>", "inline" === chatBlPopupInline(e) ? "chat-arowicon1" : "popup" === chatBlPopupInline(e) ? "chat-arowicon1" : ""), o += this.returnErrorDiv(e, t), isSet(ReqObj.Form[e].UserInputs.toChange) && "" === ReqObj.Form[e].UserInputs.toChange && (o += returnContainer("", "", "bemt5", "", ""), o += "Not from " + ReqObj.changeUserCountry + "?", o += returnButton("t" + e, "_submitNo", "Change your country", "chat-txt1"), o += "</div>", IsChatbl(e) && (ReqObj.Form[e].flags.isCountryFlagSuggSet = !0), this.isNotCalled = !0), o }, UserLogin.prototype.getBlEnqInput = function (e, t, r) { var o = "", i = "IN" !== r && "09" === e.substring(0, 2) ? "width : 282px" : ""; return o = returnDl("t" + e, "_Country_dropdown", "dropdown bebdr be-flg", ""), "IN" === r && (o += returnIsoHtml(e, "be-flisq iso")), o += returnInput("t" + e, "_login_field", "text", "login_field", this.returnText(r), this.returnLoginFieldClass(r), this.returnLoginValue(), i, "", "request"), o += returnContainer("t" + e, "_helpmsg", "be-msghlp", "", "Seller details will be sent on this " + ("IN" === r ? "mobile number" : "email")), o += "</div>" }, UserLogin.prototype.getLoginHTML = function (e) { if (isSet(e)) { var t = ReqObj.Form[e].formType.toLowerCase(), r = IsChatbl(e) && ReqObj.Form[e].UserInputs.Country === "Change my Country".trim() ? "" : currentISO(); return this.getLabel(e, t, r), this.getInput(e, t, r), this.UserloginHtmlObj.OuterWrapper = IsChatbl(e) ? "" : "<div class='belft bepr bemgb15 bT1-st3'>", this.UserloginHtmlObj.ClosingWrapper = IsChatbl(e) ? "" : "</div>", this.UserloginHtmlObj } }, UserLogin.prototype.getData = function (e, t, r) { var o = isSet(r) ? r : "", i = currentISO(), a = (new LoginFlag).returnLoginFlag(o); "undefined" == typeof imesh_obj && (imesh_obj = new userDataCookie); var s = { s_country_iso: i, modid: ReqObj.Form[e].modId, curr_page_url: window.location.href, s_ip_address: usercookie.getParameterValue(t.iplocCookie, "gip"), s_ip_country: usercookie.getParameterValue(t.iplocCookie, "gcnnm"), s_ip_country_iso: usercookie.getParameterValue(t.iplocCookie, "gcniso"), loginflag: a }; return void 0 === t.username || "" === t.username ? s.username = "IN" === i ? usercookie.getParameterValue(t.imeshCookie, "mb1") : usercookie.getParameterValue(t.imeshCookie, "em") : s.username = t.username, ObjectTrim(s) }, UserLogin.prototype.returnBool = function (e) { var t = e.data.tmpId, r = e.data.userlogin, o = e.data.blureve, i = e.data.iso; return (!0 !== o || "09" !== t.substr(0, 2) || "IN" !== i) && (!isSet(o) || !0 !== o || r.validate(t, e)) }, UserLogin.prototype.beforHitDefaults = function (e, t, r, o) { (isSet(e) && "" !== e || "" === e && "blurlogin" === t) && (IsChatbl(r) ? o.handleUI({ data: { tmpId: r, todo: "chatblur", fromwhere: "beforehit" } }) : (o.handleUI({ data: { tmpId: r, todo: "disableNameField", fromwhere: "beforehit" } }), addBlLoader(r, "left"))) }, UserLogin.prototype.sendRequest = function (e) { var t = e.data.logObject, r = e.data.tmpId, o = e.data.userlogin, i = e.data.todo, a = "Enq" === ReqObj.Form[r].formType ? "Send Enquiry" : "Post Buy Leads"; ReqObj.TempNumber = $("#t" + r + "_login_field").length > 0 ? $("#t" + r + "_login_field").val() : ""; var s = o.returnBool(e); if ("blurlogin" !== i || !0 !== ReqObj.isMouseDownFired || 0 === $("#t" + r + "_login_field").attr("request")) { if (!0 === s) { o.beforHitDefaults(t, i, r, o); var n = o.getData(r, o, i); $.ajax({ cache: !1, url: appsServerName + "index.php?r=Newreqform/EtoGlusrLogin", type: "GET", crossOrigin: !0, crossDomain: !0, data: n, dataType: "json", success: function (e) { isSet(e) ? (3 === n.loginflag && o.handleUI({ data: { tmpId: r, todo: "defaultFlag3" } }), (isSet(t) && "" !== t || "" === t && "blurlogin" === i) && (removeBLLoader(r, "center"), o.handleUI({ data: { tmpId: r, todo: "enableNameField" } })), o.afterLoginHit({ data: { tmpId: r, res: e, obj: o } }), 200 === parseInt(e.code) ? (o.updateUserDetails(n.loginflag, e), o.updateFlagDetails(n.loginflag, e), isSet(t) && isSet(r) && "" !== t ? (PostAjax(t, r), callToIdentifiedQ(r, "from-Form")) : callToIdentifiedQ(r, "from-Form", 0)) : 204 === parseInt(e.code) ? (blenqGATracking(a, "service:EtoGlusrLogin:" + e.message, e, 1, r), o.logObjectNoPostAjax(t, r)) : (blenqGATracking(a, "service:EtoGlusrLogin:failure", e, 1, r), o.logObjectNoPostAjax(t, r))) : (blenqGATracking(a, "service:EtoGlusrLogin:failure", "response undefined", 1, r), o.logObjectNoPostAjax(t, r)) }, error: function (e) { o.handleUI({ data: { tmpId: r, todo: "tryagain" } }), e = isSet(e) ? JSON.stringify(e) : "response undefined", blenqGATracking(a, "service:EtoGlusrLogin:failure", e, 1, r), o.logObjectNoPostAjax(t, r), "" === t && "blurlogin" === i && o.handleUI({ data: { tmpId: r, todo: "enableNameField" } }) }, complete: function (e) { IsChatbl(r) && o.handleUI({ data: { tmpId: r, todo: "chatblur", fromwhere: "aftercomplete" } }), "" === t && "blurlogin" === i && removeBLLoader(r, "center") } }) } } else ReqObj.isMouseDownFired = !1 }, UserLogin.prototype.logObjectNoPostAjax = function (e, t) { isSet(e) && isSet(t) && "" !== e && (removeBLLoader(t, "center"), RemoveObjFromHit(e, t)) }, UserLogin.prototype.afterLoginHit = function (e) { var t = e.data.tmpId, r = e.data.obj, o = e.data.res; 200 === parseInt(o.code) ? $("#t" + t + "_q_first_nm").length > 0 && (isSet(o.DataCookie.fn) && "" !== o.DataCookie.fn ? ("chatbl" === ReqObj.Form[t].formType.toLowerCase() && (ReqObj.Form[t].UserInputs.Name = o.DataCookie.fn), r.handleUI({ data: { tmpId: t, value: o.DataCookie.fn, todo: "disableNameField", fromwhere: "afterhit" } })) : isSet(o.DataCookie.fn) && "" === o.DataCookie.fn ? r.handleUI({ data: { tmpId: t, todo: "enableNameField", fromwhere: "emptyTempName" } }) : 0 === o.DataCookie.length && r.handleUI({ data: { tmpId: t, todo: "enableNameField", fromwhere: "code" } })) : 204 === parseInt(o.code) && ($("#t" + t + "_q_first_nm").val(""), r.handleUI({ data: { tmpId: t, todo: "enableNameField", fromwhere: "emptyTempName" } }), "ISO MisMatch" !== o.message.trim() && "Unable to Create User" !== o.message.trim() || r.handleUI({ data: { tmpId: t, todo: "tryagain" } })) }, UserLogin.prototype.updateUserDetails = function (e, t) { 3 !== e && isSet(t.DataCookie) && "" !== t.DataCookie && imesh_obj.set(t.DataCookie), UpdateAfterLogin("fn"), UpdateAfterLogin("em"), UpdateAfterLogin("ctid"), UpdateAfterLogin("mb1"), UpdateAfterLogin("uv") }, UserLogin.prototype.updateFlagDetails = function (e, t) { 3 === e || 1 === e ? (ReqObj.userType = "UnIdentified", ReqObj.loginMode = t.msg.trim() === "Mobile Number found in Primary Mobile".trim() || t.msg.trim() === "Email found in Primary Email".trim() ? 4 : t.msg.trim() === "New User created via User creation service".trim() ? 3 : 0) : isSet(e) && 3 !== e && 1 !== e && (ReqObj.userType = "Identified", ReqObj.loginMode = 2) }, UserLogin.prototype.handleEvents = function (e, t) { $(document).ready(function () { $("#t" + t + "_login_field").attr("request", 0), isSet(validation) || createGlobalObject(); var r = currentISO(); $("#t" + t + "_Country_dropdown").off("click.Validation").on("click.Validation", { todo: "show", obj: e, tmpId: t }, e.handleUI), $("#t" + t + "_login_field").off("focus.Validation keypress.Validation").on("focus.Validation keypress.Validation", { todo: "removeError", obj: e, tmpId: t }, e.handleUI), "IN" === r && $("#t" + t + "_login_field").off("keypress.Validation").on("keypress.Validation", validation.isNumberKey), "09" === t.substring(0, 2) && e.handleUI({ data: { tmpId: t, todo: "09defaultcss", obj: e } }), "chatbl" !== ReqObj.Form[t].formType.toLowerCase() && ($("#t" + t + "_login_field").on("keydown", function (r) { (8 === r.keyCode || r.keyCode >= 96 && r.keyCode <= 105 || r.keyCode >= 48 && r.keyCode <= 57 || r.keyCode >= 65 && r.keyCode <= 90) && ($("#t" + t + "_q_first_nm").val(""), e.handleUI({ data: { tmpId: t, todo: "enableNameField" } })) }), $("#t" + t + "_login_field").on("change", { logObject: "", tmpId: t, userlogin: e, blureve: !0, todo: "blurlogin", iso: r }, e.sendRequest)) }) }, UserLogin.prototype.handleUI = function (e) { if (isSet(e) && 13 !== (e.keyCode ? e.keyCode : e.which)) { var t = e.data.todo, r = e.data.tmpId; if ("default" === t && $("#t" + r + "_login_field").focus(), "isoFlag" === t) { var o = currentISO(); "" !== ReqObj.isoFlag && "IN" === o && $("#t" + r + "_iso").attr("value", ReqObj.isoFlag) } else if ("chatblFlag" === t) $("#t" + r + "_Country_dropdown dt a div").hasClass("as_arrow") && $("#t" + r + "_Country_dropdown dt a div").addClass("bedsnone"); else if ("removeError" === t) $("#t" + r + "_msg_primary_info_err_login").addClass("bedsnone"), $("#t" + r + "_login_field").removeClass("highlight-err"), $("#t" + r + "_label-l").removeClass("redc"); else if ("tryagain" === t) $("#t" + r + "_primary_info_errmsg_login").html("Something went wrong. Please try again"), $("#t" + r + "_msg_primary_info_err_login").removeClass("bedsnone"); else if ("defaultFlag3" === t) $("#t" + r + "_q_first_nm").removeClass("highlight-err").siblings(".redc").removeClass("redc"), $("#t" + r + "_error_first_name").addClass("bedsnone"); else if ("enableNameField" === t) $("#t" + r + "_q_first_nm").prop("disabled", !1), "code" !== e.data.fromwhere && "emptyTempName" !== e.data.fromwhere || (ReqObj.TempName = ""); else if ("disableNameField" === t) isSet(e.data.value) && $("#t" + r + "_q_first_nm").val(e.data.value), "afterhit" === e.data.fromwhere && (ReqObj.TempName = e.data.value, $("#t" + r + "_q_first_nm").attr("disabled", "disabled")); else if ("validationError" === t) { var i = e.data.errormsg; $("#t" + r + "_primary_info_errmsg_login").html(i), $("#t" + r + "_msg_primary_info_err_login").removeClass("bedsnone"), $("#t" + r + "_login_field").addClass("highlight-err"), "chatbl" !== ReqObj.Form[r].formType && $("#t" + r + "_label-l").addClass("redc") } else "09defaultcss" === t ? ($("#t" + r + "_login_field").focus(), $("#t" + r + "_login_field").css({ border: "1px solid #43bfb3 ", boxShadow: "1px 0px 4px #43bfb3 " })) : "chatblur" === t && ("beforehit" === e.data.fromwhere ? ($("#t" + r + "_login_field").prop("disabled", !0).addClass("chatblur"), $("#t" + r + "_submit").prop("disabled", !0).addClass("chatblur")) : "aftercomplete" === e.data.fromwhere && ($("#t" + r + "_login_field").prop("disabled", !1).removeClass("chatblur"), $("#t" + r + "_submit").prop("disabled", !1).removeClass("chatblur"))) } }, UserVerification.prototype.displayAnswer = function (e) { return [ConversationCenterWrapper("Mobile No. Verified<span class='chat-tickbx1'></span>")] }, UserVerification.prototype.SaveDetails = function (e) { IsChatbl(e) && (ReqObj.Form[e].UserInputs.OTP = this.otp) }, UserVerification.prototype.toUpdate = function (e) { return "V" === usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "uv") }, UserVerification.prototype.displayHtml = function (e) { if (isSet(e)) return $("#t" + e + "_byrinfo").addClass("bedsnone"), $("#t" + e + "_hdg").addClass("bedsnone"), ReqObj.Form[e].flags.isOtpShown = !0, [this.verifyhtml] }, UserVerification.prototype.addHtmlObjToArray = function (e) { this.UserVerificationHtmlObjArray.push(e) }, UserVerification.prototype.hasHtml = function (e) { if (isSet(e)) { var t = e.tmpId; this.cookies(), this.sendOtp({ data: { type: 1, x: this, id: "", resend: 0, tmpId: t } }); var r = currentISO(); "IN" === r && this.addHtmlObjToArray(this.getOTPHtml(t)); var o = { SuffixOuterHtml: "<div  id='t" + t + "_otpbox'>", SuffixClosingHtml: "</div>", suffix: "_otpbox" }; if (this.verifyhtml = "IN" === r ? MakeWrapper([this.UserVerificationHtmlObjArray], t, o) : "", e.that.NumberofClassCalled -= 1, "" !== this.verifyhtml) { if (AttachObject(e.object, t), isSet(e.AfterService)) for (var i = 0; i < e.AfterService.length; i++)e.that.MakeSeq(e.AfterService[i], t); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, t) } else e.hasFallback && CreateSeq(e.FallbackObj); return "" !== this.verifyhtml } }, UserVerification.prototype.defaultEvents = function (e) { isSet(e) && (this.handleUI(e, "focus", "", ""), this.handleEvents(this, e)) }, UserVerification.prototype.validate = function (e) { if (isSet(e)) { $("#verifyerrotpdiv").addClass("bedsnone"); var t = $("#t" + e + "bl_enqOtp1").val() + $("#t" + e + "bl_enqOtp2").val() + $("#t" + e + "bl_enqOtp3").val() + $("#t" + e + "bl_enqOtp4").val(); return this.otp = t, !(isSet(t) && "" === t || 4 !== t.length) || (this.handleUI(e, "verificationFailed", "beforeRequest", t), !1) } }, UserVerification.prototype.onSubmit = function (e) { var t = $("#t" + e + "bl_enqOtp1").val() + $("#t" + e + "bl_enqOtp2").val() + $("#t" + e + "bl_enqOtp3").val() + $("#t" + e + "bl_enqOtp4").val(); if (this.otp = t, isSet(t) && 4 === t.length) { var r = new PreAjax("UserVerification", e); this.validateOtp({ data: { type: 2, userVerificationObject: this, obj: r, authKey: t, tmpId: e } }) } }, UserVerification.prototype.cookies = function () { this.imeshCookie = usercookie.getCookie("ImeshVisitor"), this.v4iilexCookie = usercookie.getCookie("v4iilex") }, UserVerification.prototype.returnOTPInputs = function (e, t) { var r = IsChatbl(t) ? "blchat-inpt chat-optw" : "bloptin", o = ""; return o += returnInput("t" + t, "bl_enqOtp1", "text", "", "", r, "", "", "1"), o += returnInput("t" + t, "bl_enqOtp2", "text", "", "", r, "", "", "1"), o += returnInput("t" + t, "bl_enqOtp3", "text", "", "", r, "", "", "1"), o += returnInput("t" + t, "bl_enqOtp4", "text", "", "", r, "", "", "1") }, UserVerification.prototype.returnErrorDiv = function (e, t) { var r = ""; return r += returnContainer("t" + e, "verifyerrotpdiv", t, "", ""), r += returnSpan("t" + e, "verify_err", "", ""), r += "</div>" }, UserVerification.prototype.getOTPLabel = function (e, t) { var r = ""; IsChatbl(e) ? (r += "We have sent you an ", r += returnSpan("", "", "OTP", "befwt"), r += ". Enter it to ", r += returnSpan("", "", "confirm", "befwt"), r += " your requirement") : (r += returnContainer("t" + e, "OtpMainHeading", "otphdg", "", "Confirm your requirement"), r += "</div>", r += returnContainer("", "", "befs16 blotp bemb20", "", "Enter the 4 digit One Time Password (OTP) sent to your mobile number by SMS"), r += "</div>"), this.UserVerificationHtmlObj.Label = r }, UserVerification.prototype.getOTPInput = function (e, t) { var r = ""; if (IsChatbl(e)) { var o = returnContainer("", "", "chat-arrow", "", ""); o += "</div>"; var i = "inline" === chatBlPopupInline(e) ? "chat-arowicon1" : "popup" === chatBlPopupInline(e) ? "chat-arowicon" : ""; r += returnContainer("", "", a = "inline" === chatBlPopupInline(e) ? "bepr bemt10" : "popup" === chatBlPopupInline(e) ? "bepr bemt10 betxtc" : "", "", ""), r += this.returnOTPInputs(t, e), r += returnButton("t" + e, "_submit", o, i), r += "</div>"; var a = "inline" === chatBlPopupInline(e) ? "bltperor bedsnone" : "popup" === chatBlPopupInline(e) ? "bltperor bedsnone betxtc" : ""; r += this.returnErrorDiv(e, a), r += returnContainer("", "", "betxtc", "", ""), r += returnButton("t" + e, "resendOtp", "Resend OTP", "chat-txt1 beblock"), r += "</div>" } else r += returnContainer("", "", "m15 blml20 bepr beopt", "", ""), r += '<i class="blnewform_sprit blicotp beflt"></i>', r += returnContainer("", "", "bedblk bemt15 beml10 bevT", "", ""), r += this.returnOTPInputs(t, e), r += this.returnErrorDiv(e, "bltperor bedsnone"), r += '</div ></div ><div class="beclr"></div>', r += '<div class="beotpSW betxtc">Did not get the OTP? ', r += returnButton("t" + e, "resendOtp", "Send SMS again", "blSmst"), r += returnSpan("", "", "OR", "blgrcl1 disp - inl f_bold"), r += returnButton("t" + e, "bl_enqMisscall", "Get OTP on Call", "blSmst"), r += '</div><div class="blLdot blMt25 relt beotpSW" style="display: none"><span class="blgrcl disp - inl f_bold">OR</span></div> <div class="bloptS beotpSW" style="display: none"><span class="blotp">Give us a missed call on : <strong class="blMsN">098-9981-0984</strong></span></div></div >'; this.UserVerificationHtmlObj.UserInput = r }, UserVerification.prototype.getOTPHtml = function (e) { var t = ReqObj.Form[e].formType.toLowerCase(); return this.getOTPLabel(e, t), this.getOTPInput(e, t), this.UserVerificationHtmlObj.OuterWrapper = (IsChatbl(e), ""), this.UserVerificationHtmlObj.ClosingWrapper = (IsChatbl(e), ""), this.UserVerificationHtmlObj }, UserVerification.prototype.sendOtp = function (e) { var t = e.data.type, r = e.data.x, o = e.data.id, i = e.data.resend, a = e.data.tmpId, s = "Enq" === ReqObj.Form[a].formType ? "Send Enquiry" : "Post Buy Leads"; if (ReqObj.Form[a].OnCloseStep && isSet(ReqObj.Form[a].FormSequence)) var n = ReqObj.Form[a].FormSequence.StepCounter + 1 + ReqObj.Form[a].FormSequence.OnCloseCounter + 1; else n = ReqObj.Form[a].FormSequence.StepCounter + 1; if (1 === i && "resendOtp" === o ? blenqGATracking(s, "resendOTP|" + n + "|UserVerification", getEventLabel(), 0, a) : 0 === i && "bl_enqMisscall" === o && blenqGATracking(s, "OncallOTP|" + n + "|UserVerification", getEventLabel(), 0, a), r.handleUI(a, "refresh", "", ""), 3 !== r.otpCount) { r.otpCount > 0 && r.otpCount <= 3 && r.handleUI(a, "otpCount123", "", ""); var l = 3 === t ? r.getData(3, i, a, "") : 1 === t ? r.getData(1, i, a, "") : ""; "" !== l && r.sendRequest(ObjectTrim(l), t, "", r, a) } else r.handleUI(a, "otpCount3", "", "") }, UserVerification.prototype.validateOtp = function (e) { var t = e.data.type, r = e.data.userVerificationObject, o = e.data.tmpId, i = e.data.obj, a = e.data.authKey; r.sendRequest(ObjectTrim(r.getData(2, "", o, a)), t, i, r, o) }, UserVerification.prototype.getData = function (e, t, r, o) { var i = { s_mobile: usercookie.getParameterValue(this.imeshCookie, "mb1"), modid: ReqObj.Form[r].modId, s_country_code: usercookie.getParameterValue(this.imeshCookie, "phcc"), s_country_iso: usercookie.getParameterValue(this.imeshCookie, "iso"), s_glusrid: usercookie.getParameterValue(this.imeshCookie, "glid"), flag: ReqObj.Form[r].formType, OTPResend: t }; return 1 === e ? (i.todoflag = "OTPGen", i) : 2 === e ? (i.todoflag = "OTPVer", i.s_authkey = o, i) : 3 === e ? (i.todoflag = "OTPGen", i.misscall = 1, i) : void 0 }, UserVerification.prototype.sendRequest = function (e, t, r, o, i) { var a = "Enq" === ReqObj.Form[i].formType ? "Send Enquiry" : "Post Buy Leads", s = o; $.ajax({ cache: !1, url: appsServerName + "index.php?r=Newreqform/OtpAuthentication", type: "GET", crossOrigin: !0, crossDomain: !0, data: e, dataType: "json", success: function (e) { if (isSet(e)) { var o = s.imeshCookie; if (!isSet(e.Response) || "Success" !== e.Response.Status) return 204 === parseInt(e.Response.Code) && "OTP not Verified" === e.Response.Message && s.handleUI(i, "verificationFailed", "afterRequest", ""), void RemoveObjFromHit(r, i); if (1 === t || 3 === t) s.otpCount++; else if (2 === t) { var n; -1 === o.indexOf("uv") && (o += "|" === o.charAt(o.length - 1) ? "uv=V" : "|uv=V"), (n = stringToObject(o, "|")).uv = "V", imesh_obj.set(n), usercookie.deleteCookie("imEqGl"), blenqGATracking(a, "confirmOTP", getEventLabel(), 1, i), $("#t" + i + "_byrinfo").removeClass("bedsnone"), $("#t" + i + "_hdg").removeClass("bedsnone"); var l = new UserLogin; if (l.sendRequest({ data: { logObject: "", tmpId: i, userlogin: l, blureve: !1, todo: "verifyusr" } }), isSet(ReqObj.Form[i].RemainingService) && ReqObj.Form[i].RemainingService.length > 0 && "enq" === ReqObj.Form[i].formType.toLowerCase() && "09" !== i.substring(0, 2) && !ShowOtp() && ReqObj.Form[i].flags.ImEqgl && 1 === s.StepCounter && (formatServices(ReqObj.Form[i].RemainingService, i), isSet(ReqObj.Form[i].ServiceSequence))) for (; ReqObj.Form[i].ServiceSequence.length > 0;)ReqObj.Form[i].ServiceSequence[0].fn.onSubmit(i); PostAjax(r, i) } } else blenqGATracking(a, "service:OtpAuthentication:failure", "response undefined", 1, i), RemoveObjFromHit(r, i) }, error: function (e) { e = isSet(e) ? JSON.stringify(e) : "response undefined", blenqGATracking(a, "service:OtpAuthentication:failure", e, 1, i), RemoveObjFromHit(r, i) }, complete: function (e) { removeBLLoader(i, "center") } }) }, UserVerification.prototype.handleUI = function (e, t, r, o) { "focus" === t && $("#t" + e + "bl_enqOtp1").focus(), "refresh" === t && ($("#t" + e + "verifyerrotpdiv").addClass("bedsnone"), $("#t" + e + "bl_enqOtp1").focus(), $("#t" + e + "bl_enqOtp1").val(""), $("#t" + e + "bl_enqOtp2").val(""), $("#t" + e + "bl_enqOtp3").val(""), $("#t" + e + "bl_enqOtp4").val("")), "otpCount1" === t && ($("#t" + e + "resendOtp").show(), $("#t" + e + "verify_err").html("")), "otpCount123" === t && ($("#t" + e + "bl_enqOtp1").focus(), $("#t" + e + "resendOtp").attr("disabled", "disabled").css({ opacity: "0.4", cursor: "default" }), $("#t" + e + "bl_enqMisscall").attr("disabled", "disabled").css({ opacity: "0.4", cursor: "default" }), 3 !== this.otpCount && setTimeout(function () { $("#t" + e + "resendOtp").removeAttr("disabled").css({ opacity: "1", cursor: "pointer" }), $("#t" + e + "bl_enqMisscall").removeAttr("disabled").css({ opacity: "1", cursor: "pointer" }) }, 2e4)), "otpCount3" === t && ($("#t" + e + "verify_err").html("You have exceeded allowed OTP request attempts"), $("#t" + e + "verifyerrotpdiv").removeClass("bedsnone"), $("#t" + e + "resendOtp").attr("disabled", "disabled").css({ opacity: "0.4", cursor: "default" }), $("#t" + e + "bl_enqMisscall").attr("disabled", "disabled").css({ opacity: "0.4", cursor: "default" })), "verificationFailed" === t && "beforeRequest" === r && (isSet(o) && 0 === o.length ? $("#t" + e + "verify_err").html("Please enter verification code") : $("#t" + e + "verify_err").html("Please enter correct verification code"), $("#t" + e + "verifyerrotpdiv").removeClass("bedsnone")), "verificationFailed" === t && "afterRequest" === r && ($("#t" + e + "verify_err").html("Please enter correct verification code"), $("#t" + e + "verifyerrotpdiv").removeClass("bedsnone"), $("#t" + e + "bl_enqOtp4").focus()), "tryagain" === t && "afterRequest" === r && ($("#t" + e + "verify_err").html("Something went Wrong. Please try Again"), $("#t" + e + "verifyerrotpdiv").removeClass("bedsnone")) }, UserVerification.prototype.handleEvents = function (e, t) { isSet(validation) || createGlobalObject(); var r = e; $(document).ready(function () { $("#t" + t + "bl_enqMisscall").on("click", { type: 3, x: r, id: "bl_enqMisscall", resend: 0, tmpId: t }, r.sendOtp), $("#t" + t + "resendOtp").on("click", { type: 1, x: r, id: "resendOtp", resend: 1, tmpId: t }, r.sendOtp), $("#t" + t + "bl_enqOtp1").on("keypress", validation.isNumberKey).on("keyup", { param1: "bl_enqOtp1", param2: "bl_enqOtp2", tmpId: t }, movetoNext), $("#t" + t + "bl_enqOtp2").on("keypress", validation.isNumberKey).on("keyup", { param1: "bl_enqOtp2", param2: "bl_enqOtp3", tmpId: t }, movetoNext).on("keydown", { param1: "bl_enqOtp2", param2: "bl_enqOtp1", tmpId: t }, movetoPrevious), $("#t" + t + "bl_enqOtp3").on("keypress", validation.isNumberKey).on("keyup", { param1: "bl_enqOtp3", param2: "bl_enqOtp4", tmpId: t }, movetoNext).on("keydown", { param1: "bl_enqOtp3", param2: "bl_enqOtp2", tmpId: t }, movetoPrevious), $("#t" + t + "bl_enqOtp4").on("keypress", validation.isNumberKey).on("keydown", { param1: "bl_enqOtp4", param2: "bl_enqOtp3", tmpId: t }, movetoPrevious) }) }, Validation.prototype.isMobileValid = function (e) { if ("IN" === this.usercountry) { if (this.result = { type: !0, error: "" }, ValidNumber(e)) { e = isSet(e) ? e.trim() : ""; this.result.error = 0 === e.length ? "Please Enter Mobile Number" : e.match(/^[2,3,4,5]/) ? "Mobile Number should start with 6,7,8,9" : e.length < 10 ? "Please Enter valid Mobile number" : e.length > 10 ? "Mobile number should contain 10 digits" : "" } else this.result.error = "Please Enter valid Mobile number"; this.result.type = "" === this.result.error } return this.result }, Validation.prototype.isMobileFValid = function (e) { if (this.result = { type: !0, error: "" }, ValidNumber(e)) { e = isSet(e) ? e.trim() : ""; this.result.error = 0 === e.length ? "Please Enter Mobile Number" : "" } else this.result.error = "Please Enter valid Mobile number"; return this.result.type = "" === this.result.error, this.result }, Validation.prototype.isMobileChValid = function (e) { return this.result = { type: !0, error: "" }, (e = isSet(e) ? e.trim() : "").length > 0 ? ValidNumber(e) ? this.result.error = "" : this.result.error = "Phone Number should be numeric" : this.result.error = "", this.result.type = "" === this.result.error, this.result }, Validation.prototype.isEmailValid = function (e) { this.result = { type: !0, error: "" }; e = isSet(e) ? e : ""; return this.result.error = "" === e.trim() ? "" : /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,30})+$/.test(e) ? "" : "Please Enter Valid Email ID", this.result.type = "" === this.result.error, this.result }, Validation.prototype.isEmailFilled = function (e) { this.result = { type: !0, error: "" }; e = isSet(e) ? e : ""; return this.result.error = "" === e.trim() ? "Please Enter your Email ID" : /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,30})+$/.test(e) ? "" : "Please Enter Valid Email ID", this.result.type = "" === this.result.error, this.result }, Validation.prototype.isTitleValid = function (e) { this.result = { type: !0, error: "" }; e = isSet(e) ? e : ""; return this.result.error = 0 === e.trim().length ? "Please Enter Product/Service Name" : "", this.result.type = "" === this.result.error, this.result }, Validation.prototype.isDescriptionFilled = function (e) { this.result = { type: !0, error: "" }; e = isSet(e) ? e.trim() : ""; return this.result.error = 0 === e.length ? "Please enter your requirement in Detail" : "", this.result.type = "" === this.result.error, this.result }, Validation.prototype.isNameValid = function (e) { this.result = { type: !0, error: "" }; e = isSet(e) ? e : ""; return this.result.error = 0 === e.trim().length ? "Please Enter Your Name" : "", this.result.type = "" === this.result.error, this.result }, Validation.prototype.isCityValid = function (e) { return this.result = { type: !0, error: "" }, this.result.error = 0 === e.trim().length ? "Please Enter Your City" : "", this.result.type = "" === this.result.error, this.result }, Validation.prototype.isQtyUnitValid = function () { return this.result = { type: !0, error: "" }, this.result }, Validation.prototype.isNumberKey = function (e) { if (isSet(e)) { var t = e.which; return 118 === t && !0 === e.ctrlKey || !(t > 31 && (t < 48 || t > 57)) } }, Validation.prototype.isProductNameValid = function (e) { this.result = { type: !0, error: "" }; e = isSet(e) ? e.trim() : ""; return this.result.error = 0 === e.length ? "Enter product/service name" : "", this.result.type = "" === this.result.error, this.result }, Validation.prototype.isCountryValid = function (e, t) { this.result = { type: !0, error: "" }; e = isSet(e) ? e.trim() : ""; return this.result.error = 0 === name.length ? "Please Select Country" : "", "" !== ReqObj.Form[t].UserInputs.CountryName && void 0 !== ReqObj.Form[t].UserInputs.CountryName || (this.result.error = "Country must be chosen from suggestions"), this.result.type = "" === this.result.error, this.result }; var validation = new Validation, isBlEnqLoaded = !0, FormCloseEvent = jQuery.Event("formClose"), ReqFormScriptLoaded = jQuery.Event("ReqFormLoaded"); function convertHtml(e, t, r) { isSet(r) || (r = 0), ReqObj.Form[t].questionCount += 1; var o = [], i = []; e.IM_SPEC_OPTIONS_DESC && (o = e.IM_SPEC_OPTIONS_DESC.split(IsqSeperator)), e.IM_SPEC_OPTIONS_ID && (i = e.IM_SPEC_OPTIONS_ID.split(IsqSeperator)); var a = !!(isSet(i) && i.length > 0); isSet(e.IM_SPEC_MASTER_FULL_DESC) && "" !== e.IM_SPEC_MASTER_FULL_DESC && e.IM_SPEC_MASTER_FULL_DESC.length > 40 && (e.IM_SPEC_MASTER_FULL_DESC = e.IM_SPEC_MASTER_FULL_DESC.substr(0, 60) + "..."); var s = { type: "", questionText: e.IM_SPEC_MASTER_DESC, questionId: isSet(e.IM_SPEC_MASTER_ID) ? e.IM_SPEC_MASTER_ID : "", optionSelector: "", others: [] }, n = FillIsq(e.IM_SPEC_MASTER_DESC, t); switch (n = null === n ? "" : n, parseInt(e.IM_SPEC_MASTER_TYPE)) { case 1: s.type = "TEXTBOX"; var l, c = { labelId: "t" + t + "ques" + ReqObj.Form[t].questionCount, questionId: e.IM_SPEC_MASTER_ID, optionId: !!a && i, QuestionDesc: e.IM_SPEC_MASTER_DESC, inputId: "t" + t + "txtbx_option" + ReqObj.Form[t].questionCount, inputName: "t" + t + "text_name" + ReqObj.Form[t].questionCount, ans: n }; s.optionSelector = "input[name='" + c.inputName + "']", c.divClass = "bepr beclr", c.lblClass = "be-lbl", c.inputClass = "be-input beisq-tbx inpt_errorbx", r > 0 && (IsChatbl(t) ? c.inputClass += " be-chatW" : c.divClass += " isq-st19"); var u = Tooltip("text", e.IM_SPEC_MASTER_FULL_DESC); return isSet(e) && isSet(e.IM_SPEC_MASTER_FULL_DESC) && "" !== e.IM_SPEC_MASTER_FULL_DESC && (c.lblClass += " bedbtip"), l = { OuterWrapper: "<div class='" + c.divClass + "'>", beforeLabel: "", Label: MakeLabel(c, u, t), beforeInput: "", UserInput: TextBoxIp(c), ClosingWrapper: "</div>" }, ReqObj.Form[t].Isq.Question.push(s), l; case 2: var m = {}, p = { labelId: "t" + t + "ques" + ReqObj.Form[t].questionCount, questionId: e.IM_SPEC_MASTER_ID, QuestionDesc: e.IM_SPEC_MASTER_DESC }; u = Tooltip("radio", e.IM_SPEC_MASTER_FULL_DESC); if ("Manufacturer Only" === o) { m.Label += ""; var b = "" } else { m.Label += " (Select only one)"; b = " (Select only one)" } if (s.type = "RADIO", s.optionSelector = "input[name='t" + t + "radio_name" + ReqObj.Form[t].questionCount + "']", p.type = s.type, (m = { OuterWrapper: "", Label: LabelForCheckAndRadio(p, u, t, b), ClosingWrapper: "" }).UserInput = "<div class=''>", isSet(o)) for (var d = 0; d < o.length; d++) { var h = -1, f = o[d]; if (isSet(o[d]) && (f = trimVal(f.toLowerCase())), n.length > 0 && -1 !== (h = $.inArray(f, n)) && n.splice(h, 1), "others" === o[d].trim().toLowerCase() || "other" === o[d].trim().toLowerCase()) { var q = { divClass: "t" + t + "be-radioboxtemp be-radiobox oth_bx other_radio t" + t + "other_radiotemp", optionId: a ? i[d] : "", inputName: "t" + t + "other_radio_name" + ReqObj.Form[t].questionCount, inputId: "t" + t + "other_radio_name" + ReqObj.Form[t].questionCount + "_option" + (d + 1), ans: "" }; -1 === h && (q.ans = n), m.UserInput += OthersBox(q), s.others.push("#t" + t + "other_radio_name" + ReqObj.Form[t].questionCount + "_option" + (d + 1)) } else { var g = { option_id: a ? i[d] : "", templateId: "t" + t, questionCount: ReqObj.Form[t].questionCount, option_desc: o[d], i: d }; -1 !== h ? (g.divClass1 = "t" + t + "be-radioboxtemp be-radiobox sl-box chksl", g.divClass2 = "berdio-sl", g.inputClass = "bevT bedblk radioClick waschecked", g.checked = "checked", g.spanClass = "bevT bedblk beisq3 w-txt") : (g.divClass1 = "t" + t + "be-radioboxtemp be-radiobox", g.divClass2 = "berdio-sl bedsnone", g.inputClass = "bevT bedblk radioClick", g.checked = "", g.spanClass = "bevT bedblk beisq3"), "Looking for suppliers" === e.IM_SPEC_MASTER_DESC && (g.cityFunc = "onclick = radCheck(this)"), m.UserInput += RadioBox(g) } } return m.UserInput += "</div>", ReqObj.Form[t].Isq.Question.push(s), m; case 3: var S = {}; s.type = "SELECT"; var C = { labelId: "t" + t + "ques" + ReqObj.Form[t].questionCount, QuestionDesc: e.IM_SPEC_MASTER_DESC, questionId: e.IM_SPEC_MASTER_ID, onchange: !1, optionValue: "Select a value", selectName: "t" + t + "select_name" + ReqObj.Form[t].questionCount, selectId: "t" + t + "select_name" + ReqObj.Form[t].questionCount }; s.optionSelector = "select[name='" + C.selectName + "']", C.divClass = "bedblk bepr", C.lblClass = "be-lbl", C.selectClass = "be-input bewfull betextclr", r > 0 && IsChatbl(t) && (C.selectClass += " be-chatW slt-styl"), IsChatbl(t) || (C.divClass += " be-w50"), C.optionValue = SelBoxMSg(C.QuestionDesc, t); var v = "", O = !1, y = "", j = "", I = ""; if (isSet(o)) for (d = 0; d < o.length; d++) { var F = ""; isSet(f = o[d]) && (f = trimVal(f.toLowerCase())), -1 !== (h = $.inArray(f, n)) && (F = " selected", C.selectClass += " beclr3", O = !0); var R = o[d]; R.indexOf("'") > 0 ? R = R.replace(/'/g, "&#39") : R.indexOf('"') > 0 && (R = R.replace(/"/g, "&quot")), "others" === o[d].toLowerCase() || "other" === o[d].toLowerCase() ? (C.onchange = !0, I = R, y = i[d], j = o[d]) : v += "<option value='" + R + "' optionid='" + i[d] + "' " + F + " >" + o[d] + "</option>" } u = Tooltip("text", e.IM_SPEC_MASTER_FULL_DESC); isSet(e) && isSet(e.IM_SPEC_MASTER_FULL_DESC) && "" !== e.IM_SPEC_MASTER_FULL_DESC && (C.lblClass += " bedbtip"), S.OuterWrapper = "<div class='" + C.divClass + "'>", S.Label = MakeLabel(C, u, t), S.ClosingWrapper = "</div>"; var _ = "", k = ""; if (C.onchange) { k = ""; var w = "be-slbox beisq-tbx be-othr othrwd inpt_errorbx", A = ""; O || (k = notEmpty(n[0]) ? n[0] : ""), notEmpty(k) ? A = "selected" : w += " bedsnone", _ = "<input type = 'text' id = 'other_t" + t + "select_name" + ReqObj.Form[t].questionCount + "_1' class='" + w + "' value ='" + k + "'/>", v += "<option value='" + I + "' optionid='" + y + "' " + A + " >" + j + "</option>", s.others.push("#other_t" + t + "select_name" + ReqObj.Form[t].questionCount + "_1") } return S.UserInput = SelectBoxIp(C) + v + "</select>" + _, ReqObj.Form[t].Isq.Question.push(s), S; case 4: var D = {}, P = { labelId: "t" + t + "ques" + ReqObj.Form[t].questionCount, questionId: e.IM_SPEC_MASTER_ID, QuestionDesc: e.IM_SPEC_MASTER_DESC }; u = Tooltip("check", e.IM_SPEC_MASTER_FULL_DESC); if (P.type = "check", (D = { OuterWrapper: "", Label: LabelForCheckAndRadio(P, u, t, b = " (Select all that apply)"), ClosingWrapper: "" }).UserInput = "<div class='bemgb15 nwDt'>", s.type = "CHECKBOX", s.optionSelector = "input[name='t" + t + "checkbox_name" + ReqObj.Form[t].questionCount + "']", isSet(o)) for (d = 0; d < o.length; d++) { h = -1; if (n.length > 0) isSet(f = o[d]) && (f = trimVal(f.toLowerCase())), -1 !== (h = $.inArray(f, n)) && n.splice(h, 1); if ("others" === o[d].trim().toLowerCase() || "other" === o[d].trim().toLowerCase()) { s.others.push("#t" + t + "other_checkbox_name" + ReqObj.Form[t].questionCount + "_option" + (d + 1)); var T = { divClass: "be-chckbox oth_bx other_check", optionId: a ? i[d] : "", inputName: "t" + t + "other_checkbox_name" + ReqObj.Form[t].questionCount, inputId: "t" + t + "other_checkbox_name" + ReqObj.Form[t].questionCount + "_option" + (d + 1), ans: "" }; -1 === h && (T.ans = n), D.UserInput += OthersBox(T) } else { var N = { option_id: a ? i[d] : "", templateId: "t" + t, questionCount: ReqObj.Form[t].questionCount, option_desc: o[d], i: d }; -1 !== h ? (N.divClass1 = "be-chckbox sl-box chksl", N.divClass2 = "betick-sl", N.checked = "checked", N.spanClass = "bevT bedblk beisq3 w-txt") : (N.divClass1 = "be-chckbox", N.divClass2 = "betick-sl bedsnone", N.checked = "", N.spanClass = "bevT bedblk beisq3"), D.UserInput += CheckBox(N) } } return D.UserInput += "</div>", ReqObj.Form[t].Isq.Question.push(s), D } } $("body").trigger(ReqFormScriptLoaded); var appsServerName = (webAddressLocation = location.hostname).match(/^dev/) ? "//dev-apps.imimg.com/" : webAddressLocation.match(/^stg/) ? "//stg-apps.imimg.com/" : "//apps.imimg.com/"; function getMcatImage(e, t) { if (isSet(e) && isSet(ReqObj.Form[e]) && isSet(ReqObj.Form[e].formType) && "chatbl" !== ReqObj.Form[e].formType.toLowerCase()) { var r = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"; isSet(ReqObj.Form[e].mcatId) && -1 !== ReqObj.Form[e].mcatId && "" !== ReqObj.Form[e].mcatId && isSet(ReqObj.Form[e].modId) && -1 !== ReqObj.Form[e].modId && "" !== ReqObj.Form[e].modId && ($("#t" + e + "_imglodr").removeClass("bedsnone"), $.ajax({ cache: !1, url: appsServerName + "index.php?r=postblenq/McatDtl", type: "GET", crossOrigin: !0, crossDomain: !0, timeout: 3e3, data: { modid: ReqObj.Form[e].modId, mcatid: ReqObj.Form[e].mcatId }, dataType: "json", success: function (r) { if (isSet(r) && isSet(r.Response) && 200 == r.Response.Code && isSet(r.Response.Data) && isSet(r.Response.Data.glcat_mcat_img1_250x250)) { var o = r.Response.Data.glcat_mcat_img1_250x250; o = o.replace("http:", ""), t.hasCallback ? ReqObj.Form[e].displayImage = o : ReqObj.mcatImage = o, ReqObj.ImageKey[ReqObj.Form[e].mcatId] = o } }, error: function (t) { t = isSet(t) ? t : "response undefined", blenqGATracking(r, "service:McatDtl:failure", JSON.stringify(t), 0, e) }, complete: function () { t.hasCallback && t.cbfunc(e), $("#t" + e + "_imglodr").addClass("bedsnone") } })) } } function ObjectTrim(e) { var t = {}; for (var r in e) "string" == typeof e[r] && (e[r] = e[r].trim()), "" !== e[r] && (t[r] = e[r]); return t } function CheckLocalStorage() { try { return localStorage.setItem("__checklocalstorage", "exists"), localStorage.removeItem("__checklocalstorage"), !0 } catch (e) { return !1 } } function LoginFlag() { } function LoginMode() { } function isSet(e) { return null != e } function movetoNext(e) { var t = e.data.tmpId; "" !== $("#t" + t + e.data.param1).val() && $("#t" + t + e.data.param2).focus() } function movetoPrevious(e) { var t = e.data.tmpId; 8 == e.keyCode && "" === $("#t" + t + e.data.param1).val() && ($("#t" + t + e.data.param2).focus(), $("#t" + t + e.data.param2).html("")) } function stringToObject(e, t) { for (var r = e.split(t), o = isSet(r) ? r.length : 0, i = {}, a = 0; a < o; a++) { var s = r[a].split("="); i[s[0]] = s[1] } return i } function MakeRefText(e) { ReqObj.Form[e].refText = "ctaName=" + (isSet(ReqObj.Form[e].ctaName) ? ReqObj.Form[e].ctaName : ""), ReqObj.Form[e].refText += "|ctaType=" + (isSet(ReqObj.Form[e].ctaType) ? ReqObj.Form[e].ctaType : ""), ReqObj.Form[e].refText += "|PT=" + (isSet(ReqObj.Form[e].pageType) ? ReqObj.Form[e].pageType : ""), ReqObj.Form[e].refText += "|Section=" + (isSet(ReqObj.Form[e].section) ? ReqObj.Form[e].section : ""), ReqObj.Form[e].refText += "|Position=" + (isSet(ReqObj.Form[e].position) ? ReqObj.Form[e].position : ""), ReqObj.Form[e].refText += "|ScriptVer=" + (isSet(ReqObj.Form[e].scriptVersion) ? ReqObj.Form[e].scriptVersion : ""), ReqObj.Form[e].refText += "|compRank=" + (isSet(ReqObj.Form[e].FCPRank) ? ReqObj.Form[e].FCPRank : ""), ReqObj.Form[e].refText += "|searchTerm=" + (isSet(ReqObj.Form[e].mcatName) ? ReqObj.Form[e].mcatName : "") } function imInvokeRequestForGaCode(e, t) { var r = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads", o = usercookie.getCookie("ImeshVisitor"), i = "/cgi/" + ReqObj.Form[e].modId + "/" + r + "/" + getEventLabel(); i += "" === o ? "-new.mp" : ".mp", imgtm.push({ event: "VirtualPageview", virtualPageURL: i, virtualPageTitle: "Send Enquiry -" + t, CD_Additional_Data: ReqObj.Form[e].refText }) } function blenqGATracking(e, t, r, o, i) { var a = 0 === o ? "IMEvent" : "IMEvent-NI", s = "iploc" === e ? glmodid : ReqObj.Form[i].modId, n = 0 === i ? s : s + "-" + ReqObj.Form[i].refText; imgtm.push({ event: a, eventCategory: e, eventAction: t, eventLabel: r, CD_Additional_Data: n }) } function labelNEC(e) { var t = ""; return "" !== ReqObj.UserDetail.fn && (t += "N"), "IN" === e ? ("" !== ReqObj.UserDetail.em && (t += "E"), "" !== ReqObj.UserDetail.ctid && (t += "C"), "" === t && (t = "NO-NEC")) : ("" !== ReqObj.UserDetail.mb1 && (t += "M"), "" === t && (t = "NO-NM")), t } function getEventLabel(e) { var t = usercookie.getCookie("ImeshVisitor"), r = (usercookie.getParameterValue(t, "iso"), usercookie.getParameterValue(t, "uv")), o = currentISO(), i = "" === t ? "Unidentified" : "V" === r ? "Verified" : "Unverified", a = "in" === o.toLowerCase() ? "Indian" : "Foreign"; return a += "|" + i + "|" + labelNEC(o), isSet(e) && "" !== e && (a = e + "|" + a), a } function ServiceGATrack(e, t, r) { isSet(_gaq) && _gaq.push(["_trackEvent", e, t, r, 0, !0]) } function addTemplates(e) { -1 === $.inArray(e, template_array) && template_array.push(e) } function UpdateAfterLogin(e) { "" !== usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), e) && (ReqObj.UserDetail[e] = setDetail(e)) } function checkedTNC(e) { isSet(e) && isSet(ReqObj.Form[e]) && ($("#t" + e + "_tCondCheckBox").prop("checked") ? (ReqObj.Form[e].IsCheckboxChecked = !0, $("#t" + e + "_error_tCond").text("Please agree to the terms and conditions").addClass("bedsnone"), isSet(ReqObj.Form[e].formType) && "chatbl" !== ReqObj.Form[e].formType.toLowerCase() && $("#t" + e + "_submit").prop("disabled", !1).css("background-color", "#00a699")) : (ReqObj.Form[e].IsCheckboxChecked = !1, isSet(ReqObj.Form[e].formType) && "chatbl" !== ReqObj.Form[e].formType.toLowerCase() && $("#t" + e + "_submit").prop("disabled", !0).css("background-color", "#b2b2b2"))) } function ShowHideTNC(e) { if (!IsTncAlreadyFilled(e) && isSet(e) && isSet(ReqObj.Form[e].FormSequence)) if ("IN" === currentISO() || IsChatbl(e)) HideTncBox(e); else { var t = ReqObj.Form[e].FormSequence; ReqObj.Form[e].IsCheckboxChecked && (t.OnCloseCounter > -1 || t.StepCounter > 0) ? HideTncBox(e) : ShowTncBox(e) } else HideTncBox(e) } function DefaultValueforTnc(e) { $("#t" + e + "_tCond").removeClass("bedsnone"), $("#t" + e + "_tCondCheckBox").prop("checked", !1) } function ShowTncBox(e) { if (IsChatbl(e)) DefaultValueforTnc(e); else if (isSet(ReqObj.Form[e])) { ReqObj.Form[e].FormSequence.StepCounter > 0 && !1 === ReqObj.Form[e].isTNCShownOnFirstStep || (ReqObj.Form[e].IsCheckboxChecked ? ($("#t" + e + "_tCondCheckBox").prop("checked", !0), $("#t" + e + "_tCond").removeClass("bedsnone"), $("#t" + e + "_submit").prop("disabled", !1).css("background-color", "#00a699")) : (DefaultValueforTnc(e), $("#t" + e + "_submit").prop("disabled", !0).css("background-color", "#b2b2b2"), ReqObj.Form[e].isTNCShownOnFirstStep = !0)) } } function HideTncBox(e) { $("#t" + e + "_tCond").addClass("bedsnone"), $("#t" + e + "_tCondCheckBox").prop("checked", !0), "chatbl" !== ReqObj.Form[e].formType.toLowerCase() && $("#t" + e + "_submit").prop("disabled", !1).css("background-color", "#00a699") } function disableEnquiryButton(e) { if ("function" == typeof ReqObj.Form[e].enqSentCallBack) { isSet(ReqObj.Form[e].enquiryDivID) && "" !== ReqObj.Form[e].enquiryDivID ? ReqObj.Form[e].enquiryDivID : ReqObj.Form[e].pDispId; var t = ReturntoProp(e); ReqObj.Form[e].enqSentCallBack(t) } } function appendImEqGlCookie(e) { var t = isSet(ReqObj.Form[e].enquiryDivID) && "" !== ReqObj.Form[e].enquiryDivID ? ReqObj.Form[e].enquiryDivID : "dispid" + ReqObj.Form[e].pDispId; if (isSet(t) && "" !== t) { var r = usercookie.getCookie("imEqGl"), o = usercookie.getCookie("imEqGl").length; 0 === o ? usercookie.setCookie("imEqGl", t, "1", ReqObj.Form[e].modId) : (t = "," === r.substring(0, o - 2) ? r + t + "," : r + "," + t, usercookie.setCookie("imEqGl", t, "1", ReqObj.Form[e].modId)) } } function get_buyer_info(e) { var t = "", r = usercookie.getCookie("ImeshVisitor"); if (r) { t += "<b>Your Contact Information :</b><br/>"; var o = ReqObj.UserDetail.fn; "" !== o && (t += o + "</br>"); var i = ReqObj.UserDetail.mb1, a = isSet(i) && "" !== i ? "+" + usercookie.getParameterValue(r, "phcc") + "-" : ""; "" !== a && (t += a + i + "</br>"); var s = ReqObj.UserDetail.em; "" !== s && (t += s + "</br>") } if ("" !== t) return t } function ReturntoProp(e) { var t = JSON.parse(JSON.stringify(ReqObj.Original[e])); return t.IsqArray = ReqObj.Form[e].IsqArray, t.displayImage = ReqObj.Form[e].displayImage, t.prodName = ReqObj.Form[e].prodName, t.generationId = ReqObj.Form[e].generationId, t.mcatName = ReqObj.Form[e].mcatName, t } function changeProd(e) { if (isSet(e) && isSet(e.data)) { var t = e.data.tmpId, r = e.data.todo; if ($(".be-prdimg").children("img").attr("src", ""), "prev" === r && isSet(ReqObj.Form[t].prev)) { var o = ReturntoProp(t); ReqObj.Form[t].prev(o) } else if ("next" === r && isSet(ReqObj.Form[t].next)) { o = ReturntoProp(t); ReqObj.Form[t].next(o) } } } function BlEnqGenerated(e) { return !!(isSet(e) && isSet(ReqObj.Form[e].generationId) && parseInt(ReqObj.Form[e].generationId) > 1) } function ShowProdName(e) { return "product" !== ReqObj.Form[e].modrefType.toLowerCase() || BlEnqGenerated(e) || "" !== ReqObj.Form[e].prodName && ("bl" !== ReqObj.Form[e].formType.toLowerCase() || "09" !== e.substring(0, 2) && "04" !== e.substring(0, 2)) && ("enq" !== ReqObj.Form[e].formType.toLowerCase() || "04" !== e.substring(0, 2) && "01" !== e.substring(0, 2)) ? ReqObj.Form[e].flags.WasProdNamePresent : (ReqObj.Form[e].flags.WasProdNamePresent = !0, !0) } function ShowReqBox(e) { return !0 !== ReqObj.Form[e].flags.isDescDivShown } function GetPopUpHtml(e) { loadOverlay(); return ReqObj.OverlayHtml.replace(/0901/gi, e) } function loadOverlay() { isSet($("#t0901_bewrapper").html()) && "" !== $("#t0901_bewrapper").html() && (ReqObj.OverlayHtml = $("#t0901_bewrapper").html()) } function NEC() { return !ReqObj.UserDetail.fn || ("IN" === currentISO() ? !ReqObj.UserDetail.em || !(ReqObj.UserDetail.ctid || ReqObj.UserDetail.cityname || ReqObj.UserDetail.ctoth) : !ReqObj.UserDetail.mb1) } function ReturnCorrectVal(e, t) { return isSet(e) && "" !== e ? e : isSet(t) && "" !== t ? t : "" } function setDetail(e) { return ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), e), ReturnCorrectVal(ReqObj.UserDetail[e], "")) } function SetUserDetails() { createGlobalObject(), ReqObj.UserDetail.fn = ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn"), ReqObj.UserDetail.fn), ReqObj.UserDetail.em = ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "em"), ReqObj.UserDetail.em), ReqObj.UserDetail.ctid = ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "ctid"), ReqObj.UserDetail.ctid), ReqObj.UserDetail.mb1 = ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "mb1"), ReqObj.UserDetail.mb1), ReqObj.UserDetail.uv = ReturnCorrectVal(usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "uv"), ReqObj.UserDetail.uv) } function currentISO() { var e = usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "iso"), t = usercookie.getParameterValue(usercookie.getCookie("iploc"), "gcniso"); return "" !== e ? e : "" !== ReqObj.changeUserIso ? ReqObj.changeUserIso : "" !== t ? t : "IN" } function currentIpCountry() { return usercookie.getParameterValue(usercookie.getCookie("iploc"), "gcnnm") } function ConstructorName(e) { if (isSet(e)) { if (e.constructor.name) return e.constructor.name; if (isSet(e.className) && "" !== e.className) return e.className; var t = new RegExp(/s*function\s*(.*?)\s*\{/), r = e.constructor.toString().match(t)[1], o = r.indexOf("("); if (-1 !== o) return r.substr(0, o) } } function FormCloseButtons(e) { $(document).off("keydown").on("keydown", function (t) { 27 === t.keyCode && FormCloseStep(e) }), $("#t" + e + "_cls").off("click").on("click", function () { FormCloseStep(e) }) } function trimVal(e) { var t = ""; return isSet(e) && "string" == typeof e && (t = e.trim()), t } function stopBgScroll() { $("html").css("overflow", "hidden") } function resumeBgScroll() { $("html").css("overflow", "auto") } function createGlobalObject() { validation = new Validation, usercookie = new UserCookie } function ValidGenId(e) { return !!(ValidNumber(e) && parseInt(e, 10) > 1) } function ValidNumber(e) { return !!(isSet(e) && parseInt(e, 10) && Number(e)) } function SanitizeId(e) { return isSet(e) ? isNaN(e) ? defaultGenerationId : isNaN(parseInt(e, 10)) ? defaultGenerationId : parseInt(e, 10) : defaultGenerationId } function isObjectEmpty(e) { return !(!isSet(e) || "object" != typeof e) && (e = ObjectTrim(e), !$.isEmptyObject(e)) } function StaticMessage() { var e = "Get verified supplier details instantly on your "; return "IN" === currentISO() ? e += "mobile" : e += "email", e } function ShowNameField(e) { return !usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn") && ("IN" !== currentISO() || (!isSet(ReqObj.Form[e].HideNameonFirstStep) || 1 !== parseInt(ReqObj.Form[e].HideNameonFirstStep, 10))) } function HideSuggester() { $("ul.ui-autocomplete").each(function () { $(this).hide() }), $("ul.ui-autocomplete").parent().css("display", "none") } function callfunc(e, t) { for (var r = 0; r < e.length; r++)t.toLowerCase() === ConstructorName(e[r].Obj).toLowerCase() && e.splice(r, 1)[0] } function RefactorUiArray(e) { for (var t = 0; t < PnameDependent.length; t++)callfunc(ReqObj.Form[e].UiArray[ReqObj.Form[e].FormSequence.StepCounter], PnameDependent[t]), RemoveService(ReqObj.Form[e].FormSequence.FullServiceArray[ReqObj.Form[e].FormSequence.StepCounter], PnameDependent[t]) } function RemoveService(e, t) { if (isSet(e)) for (var r = 0; r < e.length; r++) { if (ConstructorName(e[r].fn).toLowerCase() === t.toLowerCase()) return e.splice(r, 1), r -= 1, !0; if (!0 === RemoveService(e[r].cb, t)) return !0 } } function RefactorFormArrays(e) { RefactorUiArray(e) } function DirectSubmitWithoutBlur(e) { SetFormHtmlDefaultValue(e), 1 === parseInt(ReqObj.Form[e].disableRd) ? ReqObj.Form[e].flags.isDescDivShown = !0 : ReqObj.Form[e].flags.isDescDivShown = !1, setTemplateDefaultValue(e.substring(0, 2), e.substring(2, 4), ReqObj.Form[e]), GetIsq(e), ReqObj.Form[e].GlobalIsqObject = new Isq(e) } function removeBLLoader(e, t) { var r = isSet(e) ? e : ""; if ("" !== r && IsChatbl(r)) { if (isSet(t) && "left" === t.toLowerCase()) var o = "inline" === chatBlPopupInline(e) ? "message-left" : "popup" === chatBlPopupInline(e) ? "message-left1" : ""; else o = "txt-cnt"; var i = $("#t" + r + "_typing"); i.hasClass(o) && i.remove() } else { var a = $("#t" + r + "_belodr"); a.hasClass("bedsnone") || a.addClass("bedsnone") } } function addBlLoader(e, t) { var r = e; if ("" !== r && IsChatbl(r)) $("#t" + e + "_typing").length > 0 || ("inline" === chatBlPopupInline(e) ? $("#t" + r + "_bl_form").append(appendChatLoader(e, t, "blchat-lodr")) : "popup" === chatBlPopupInline(e) && $("#t" + r + "_bl_form").append(appendChatLoader(e, t, "blchat-lodr2"))); else { var o = $("#t" + r + "_belodr"); o.hasClass("bedsnone") && o.removeClass("bedsnone") } } function callFlagSuggestor(e, t) { !1 === ReqObj.Form[e].flags.isFlagSuggSet && $("#t" + e + "_Country_dropdown").length > 0 && flagsugg.setFlagSuggestor(e, t) } function appendChatLoader(e, t, r) { if (isSet(t) && "left" === t.toLowerCase()) var o = "inline" === chatBlPopupInline(e) ? "message-left" : "popup" === chatBlPopupInline(e) ? "message-left1" : "", i = r; else o = "txt-cnt bemb10", i = r; return "<div id='t" + e + "_typing' class='" + o + "'><div class='typtext'><span class='spinme-left'><div class='" + i + "'><div class='bounce1'></div><div class='bounce2'></div><div class='bounce3'></div></div></span></div></div>" } function MakeWrapper(e, t, r) { if (isSet(ReqObj.Form[t].formType) && IsChatbl(t)) { for (var o = "<div class='Question'>", i = "<div class='t" + t + "_userInput' class='bewbg'>", a = 0; a < e.length; a++)for (var s = 0; s < e[a].length; s++)o += e[a][s].Label, i += e[a][s].UserInput; return ConversationLeftWrapper((o += "</div>") + (i += "</div>"), { classtotest: chatBlClass(t, "left"), leftright: "inline" === chatBlPopupInline(t) ? "message-left" : "popup" === chatBlPopupInline(t) ? "message-left1" : "" }) } var n = r.SuffixOuterHtml, l = "", c = "", u = ""; isSet(r) && isSet(r.suffix) && "" !== r.suffix && ("_isqBox" !== r.suffix && "_contactinfo" !== r.suffix && "_Prodname" !== r.suffix || (l += "<div class='be-row'>", c += "</div>"), "_contactinfo" === r.suffix && (u += "<div class='beclr'></div>")); for (a = 0; a < e.length; a++) { n += l; for (s = 0; s < e[a].length; s++)n += e[a][s].OuterWrapper + e[a][s].Label + e[a][s].UserInput + e[a][s].ClosingWrapper; n += c } return n += r.SuffixClosingHtml, n += u } function ChatBlMsgs(e, t) { if (isSet(e)) { var r = "What is your preferred "; isSet(t) && "radio" === t.toLowerCase() && (r = "Please select "); var o = trimVal(e.toLowerCase()); return o in ChatBlStaticMsg ? ChatBlStaticMsg[o] : r + "<strong>" + e + "</strong>" + QuestionEnding } } function ConversationLeftWrapper(e, t) { if (isSet(e) && "" !== e) return '<div class="' + t.leftright + '"><div class="' + t.classtotest + '">' + e + "</div></div>" } function ConversationRightWrapper(e, t, r) { if (isSet(t) && "" !== t) { var o = "popup" === chatBlPopupInline(e) ? "<div class='blrap'>" + t + "</div>" : "inline" === chatBlPopupInline(e) ? t : ""; return '<div class="' + r.leftright + '"><div class="' + r.classtotest + '">' + o + "</div></div>" } } function ConversationCenterWrapper(e) { if (isSet(e) && "" !== e) return '<div class="chat-mblV chat-blH">' + e + "</div>" } function returnIsoHtml(e, t, r) { return isSet(r) || (r = ""), '<input type="text" value="' + r + '" readonly="" name="iso" id="t' + e + '_iso" class="' + t + '" tabindex="-1" disabled="disabled">' } function returnInput(e, t, r, o, i, a, s, n, l, c) { return '<input id="' + e + t + '" type="' + r + '" name="' + o + '" value="' + s + '" class="' + a + '" placeholder="' + i + '" maxlength="' + l + '" style="' + n + '"' + c + '="">' } function returnButton(e, t, r, o) { return '<button id="' + e + t + '" class="' + o + '">' + r + "</button>" } function returnContainer(e, t, r, o, i) { return isSet(i) || (i = ""), '<div id="' + e + t + '" class="' + r + '" data-role="' + o + '">' + i } function returnSpan(e, t, r, o) { return '<span id="' + e + t + '" class="' + o + '" >' + r + "</span>" } function returnLabel(e, t, r, o) { return '<label id="' + e + r + '" class="' + o + '">' + t + "</label>" } function returnDl(e, t, r, o) { return '<dl id="' + e + t + '" class="' + r + '" disabled="' + o + '"></dl>' } function returnAnswer(e, t) { return ReqObj.Form[e].UserInputs[t] } function scrollSmoothToBottom(e) { var t = document.getElementById(e); isSet(t) && $("#" + e).animate({ scrollTop: t.scrollHeight - t.clientHeight }, 400) } function IsFormBL(e) { if (isSet(e) && isSet(ReqObj.Form[e])) { if (isSet(ReqObj.Form[e].formType)) var t = $.inArray(ReqObj.Form[e].formType.toLowerCase(), ["bl", "chatbl"]); return -1 !== t } } function CallGeneration(e) { if (isSet(e)) return parseInt(ReqObj.Form[e].generationId, 10) <= 1 && !0 !== ExistsInArray(ReqObj.Form[e].HitArray, "Generation") && !0 !== ExistsInArray(ReqObj.Form[e].ServiceSequence, "Generation") } function SetAutoCompleteClass(e, t) { var r = "be-sugg t" + e + t; return IsChatbl(e) && ("inline" === chatBlPopupInline(e) ? r += " be-chat" : "popup" === chatBlPopupInline(e) && (r += " bl-chat")), r } function toCallFlagSuggestor(e) { return "true" !== flagsugg.flaghit[e] && 0 !== $("#t" + e + "_Country_dropdown").length } function reloadFlagSuggestor(e) { for (var t = isSet(template_array) ? template_array.length : 0, r = 0; r < t; r++)isSet(ReqObj.Form[template_array[r]].flags) && $("#t" + template_array[r] + "_Country_dropdown").length > 0 && (ReqObj.Form[template_array[r]].flags.isFlagSuggSet = !1, flagsugg.setFlagSuggestor(template_array[r], e)) } function IsTNCChecked(e, t, r) { var o = !0; return (o = !!ReqObj.Form[e].IsCheckboxChecked || (!t || ("IN" === currentISO() || (!isSet(r) || "" === r)))) ? RemoveTncError(e) : ShowTncError(e), o } function ShowTncError(e) { $("#t" + e + "_error_tCond").text("Please agree to the terms and conditions").removeClass("bedsnone") } function RemoveTncError(e) { $("#t" + e + "_error_tCond").addClass("bedsnone") } function ShowIsq(e) { return 1 !== parseInt(ReqObj.Form[e].disableIsq) && ("09" !== e.substring(0, 2) || "IN" === currentISO()) && ("" === ReqObj.Form[e].IsqArray || ReqObj.Form[e].prevCount < ReqObj.Form[e].IsqLength) } function ShowStaticQuestionForeign(e) { return !(!isSet(e) || "09" !== e.substring(0, 2)) && (1 !== parseInt(ReqObj.Form[e].disableIsq) && "IN" !== currentISO()) } function GetObjectKeys(e) { if (Object.keys) return Object.keys(e); var t = []; for (var r in e) e.hasOwnProperty(r) && t.push(r); return t } function OpenAndCloseChatbl(e, t) { $("#t" + e + "_chatBL").toggleClass("heightUp"), $("#t" + e + "_chatAnimation").toggleClass("cortana"), $("#t" + e + "_beminize").toggle(), OpenCloseChatblTracking(e, t) } function OpenCloseChatbl(e, t, r) { IsChatbl(e) && "inline" === chatBlPopupInline(e) && ($("#t" + e + "_chatBL").hasClass("heightUp") || !isSet(t) || t || OpenCloseChatblTracking(e, t), t ? r ? OpenAndCloseChatbl(e, t) : $("#t" + e + "_chatBL").hasClass("heightUp") || OpenAndCloseChatbl(e, t) : OpenAndCloseChatbl(e, t)) } function OpenCloseChatblTracking(e, t) { $("#t" + e + "_chatBL").hasClass("heightUp") && (blenqGATracking("Post Buy Leads", ReqObj.Form[e].classfortracking, getEventLabel(), 1, e), blenqGATracking("Post Buy Leads", "true" === t ? "Open on scroll" : "CTA Clicked", getEventLabel(), 1, e)) } function BlAutoSuggRowNum(e) { if (isSet(e)) { var t = 5; return "202" === e && (t = 3), IsChatbl(e) && (t = 4), t } return 5 } function ReturnBlUserName(e) { var t = "", r = ""; (r = isSet(ReqObj.UserDetail.fn) && "" !== ReqObj.UserDetail.fn ? ReqObj.UserDetail.fn : usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "fn"), IsChatbl(e) && isSet(r) && "" !== r) && (t = ConversationLeftWrapper("Hi " + r, { classtotest: chatBlClass(e, "left"), leftright: "inline" === chatBlPopupInline(e) ? "message-left" : "popup" === chatBlPopupInline(e) ? "message-left1" : "" })); return t } function IsChatbl(e) { return !!(isSet(e) && isSet(ReqObj.Form[e]) && isSet(ReqObj.Form[e].formType) && "chatbl" === ReqObj.Form[e].formType.toLowerCase()) } function preventDefault(e) { (e = e || window.event).preventDefault && e.preventDefault(), e.returnValue = !1 } function keydown(e) { for (var t = [32, 33, 34, 35, 36, 37, 38, 39, 40], r = t.length; r--;)if ((!isSet(e.target.id) || "t05" !== e.target.id.substring(0, 3)) && e.keyCode === t[r]) return void preventDefault(e) } function wheel(e) { preventDefault(e) } function disable_scroll() { window.addEventListener && window.addEventListener("onmousewheel", wheel, !1), window.onmousewheel = document.onmousewheel = wheel, document.onkeydown = keydown } function enable_scroll() { window.removeEventListener && window.removeEventListener("onmousewheel", wheel, !1), window.onmousewheel = document.onmousewheel = document.onkeydown = null } function IsProduction() { return !webAddressLocation.match(/^dev/) && !webAddressLocation.match(/^stg/) } function CopyObject(e) { var t = e || {}, r = {}; for (var o in t) t.hasOwnProperty(o) && (r[o] = t[o]); return r } function ResetUserDetails(e) { ReqObj.UserDetail[e] = "" } function binaryArraySearch(e, t) { if (isSet(e)) { for (var r = 0, o = e.length - 1; r <= o;) { var i = Math.floor((r + o) / 2); if (1 === e[i]) return i; e[i] > 1 ? o = i - 1 : e[i] < 1 && (r = i + 1) } return -1 } return -1 } function StaticQuesForeignUser(e) { if ("IN" !== currentISO() && ("09" === e.substring(0, 2) || IsChatbl(e))) return !0 } function IsTncAlreadyFilled(e) { return !(!notEmpty(usercookie.getCookie("ImeshVisitor")) && -1 !== $.inArray(currentISO(), ["AT", "BE", "BG", "HR", "CY", "CZ", "DK", "EE", "FI", "FR", "DE", "GR", "HU", "IE", "IT", "LV", "LT", "LU", "MT", "NL", "PL", "PT", "RO", "SK", "SI", "ES", "SE", "GB", "UK"])) } function updateEnrichShownKey(e, t, r) { ReqObj.Form[e].flags.isEnrichShown.isStaticShown = t, ReqObj.Form[e].flags.isEnrichShown.isAttachmentShown = r, "1" === ReqObj.Form[e].showAttachment ? ReqObj.Form[e].flags.isEnrichShown.isAttachmentShown = !1 : "0" === ReqObj.Form[e].showAttachment ? ReqObj.Form[e].flags.isEnrichShown.isAttachmentShown = !0 : "-1" === ReqObj.Form[e].showAttachment && "bl" === ReqObj.Form[e].formType.toLowerCase() ? StaticQuesForeignUser(e) ? ReqObj.Form[e].flags.isEnrichShown.isAttachmentShown = !0 : ReqObj.Form[e].flags.isEnrichShown.isAttachmentShown = !1 : "-1" === ReqObj.Form[e].showAttachment && "enq" === ReqObj.Form[e].formType.toLowerCase() && (ReqObj.Form[e].flags.isEnrichShown.isAttachmentShown = !0) } function returnIsEnrichShownKeyVal(e) { if (!1 === ReqObj.Form[e].flags.isEnrichShown.isStaticShown || !1 === ReqObj.Form[e].flags.isEnrichShown.isAttachmentShown) return !0 } function chatBlClass(e, t) { if ("left" === t) { if ("chatbl" === ReqObj.Form[e].formType.toLowerCase() && "08" === e.substring(0, 2)) return "message-text2"; if ("chatbl" === ReqObj.Form[e].formType.toLowerCase() && "05" === e.substring(0, 2)) return "message-text" } else if ("right" === t) { if ("chatbl" === ReqObj.Form[e].formType.toLowerCase() && "08" === e.substring(0, 2)) return "message-text3"; if ("chatbl" === ReqObj.Form[e].formType.toLowerCase() && "05" === e.substring(0, 2)) return "message-text1" } else if ("yes" === t) { if ("chatbl" === ReqObj.Form[e].formType.toLowerCase() && "08" === e.substring(0, 2)) return "blchat-btn2"; if ("chatbl" === ReqObj.Form[e].formType.toLowerCase() && "05" === e.substring(0, 2)) return "bechat-btn" } else if ("change" === t) { if ("chatbl" === ReqObj.Form[e].formType.toLowerCase() && "08" === e.substring(0, 2)) return "blchat-btn1"; if ("chatbl" === ReqObj.Form[e].formType.toLowerCase() && "05" === e.substring(0, 2)) return "bechat-btn" } } function chatBlPopupInline(e) { return "chatbl" === ReqObj.Form[e].formType.toLowerCase() && "08" === e.substring(0, 2) ? "popup" : "chatbl" === ReqObj.Form[e].formType.toLowerCase() && "05" === e.substring(0, 2) ? "inline" : "nochat" } function OpenChatBLPopup(e) { isBLFormOpen = !0, $("#t" + e + "_chatBL").removeClass("bedsnone").css({ display: "table" }) } function IpLoc() { var e = usercookie.getCookie("iploc"); "" !== e && ("" === e || "" !== usercookie.getParameterValue(e, "gip")) || navigator.userAgent.match(/googlebot|mediapartners/) ? this.captureDetailsOfIploc() : this.getIp() } function leftSideTransitionPrice(e) { $("#t" + e + "_ProdPrice").html(""); var t = ReqObj.Form[e].price; isSet(t) && "" !== t && (t = (t = (t = t.replace(/Approx(.*?)Rs/, "")).replace(/Rs/, "")).trim(), $("#t" + e + "_ProdPrice").html("Rs. " + t)) } function leftSideTransitionPnameCompname(e) { var t = ReqObj.Form[e].prodDispName ? ReqObj.Form[e].prodDispName : ReqObj.Form[e].prodName, r = ReqObj.Form[e].rcvName; isSet(t) && "" !== t && leftSideTransitionPrice(e), isSet(t) && "" !== t && ($("#t" + e + "_Prodname").html(t).removeClass("bedsnone").addClass("be-pnm"), $("#t" + e + "_Compname").html(r).removeClass("bedsnone").addClass("befs14 be-inbl")), "company" === ReqObj.Form[e].modrefType ? ($("#t" + e + "_Prodname").html("").addClass("bedsnone"), $("#t" + e + "_Compname").html(r).removeClass("bedsnone befs14 be-inbl").addClass("be-pnm")) : isSet(t) && "" !== t ? ($("#t" + e + "_Prodname").html(t).removeClass("bedsnone").addClass("be-pnm"), $("#t" + e + "_Compname").html(r).removeClass("bedsnone be-pnm").addClass("befs14 be-inbl")) : ($("#t" + e + "_Prodname").html("").addClass("bedsnone"), $("#t" + e + "_Compname").html(r).removeClass("bedsnone befs14 be-inbl").addClass("be-pnm")) } function leftSideTransitionAddress(e) { $("#t" + e + "_locality").html(""), $("#t" + e + "_city").html(""), $("#t" + e + "_state").html(""); var t = ReqObj.Form[e].rcvLocality, r = ReqObj.Form[e].rcvCity, o = ReqObj.Form[e].rcvState, i = ReqObj.Form[e].rcvName; isSet(i) && "" !== i && "company" !== ReqObj.Form[e].modrefType && (isSet(t) && "" !== t || isSet(r) && "" !== r) && $("#t" + e + "_Compname").append(" |&nbsp;"), isSet(t) && "" !== t && isSet(r) && "" !== r ? ($("#t" + e + "_locality").html(t), r !== t && ($("#t" + e + "_locality").append(",&nbsp;"), $("#t" + e + "_city").html("  " + r))) : isSet(r) && "" !== r && ($("#t" + e + "_city").html(r), r !== o && "undefined" !== isSet(o) && "" !== o && ($("#t" + e + "_city").append(",&nbsp;"), $("#t" + e + "_state").html(o))) } function updateDispZoomImage(e, t) { var r = getImage(ReqObj.Form[e].mcatId); "bl" !== t && "popup" !== chatBlPopupInline(e) || (void 0 === r || "" === r ? (ReqObj.Form[e].displayImage = "", ReqObj.Form[e].zoomImage = "") : isSet(r) && "" !== r && (ReqObj.Form[e].displayImage = r, ReqObj.Form[e].zoomImage = r)), "bl" !== t && "popup" !== chatBlPopupInline(e) || 1 === ReqObj.updateImage || "" === ReqObj.Form[e].displayImage && "" === ReqObj.Form[e].zoomImage && 0 === $("#t" + e + "defaultimage").length && (getMcatImage(e, { hasCallback: !0, cbfunc: update_image }), ReqObj.updateImage = 1) } function update_image(e) { isSet(e) && ("" !== ReqObj.Form[e].displayImage ? $("#t" + e + "_prodimg").html((new ReqImage).getImage(e + "_dispimage", "", ReqObj.Form[e].displayImage) + '<span class="be-blrprdimg"  style="background-image: url(' + ReqObj.Form[e].displayImage + ');"></span>') : $("#t" + e + "_prodimg").html('<div id="' + e + '"defaultimage" class="be-nobgimg"><div class="blnewform_sprit be-noimg"></div></div>')) } function leftSideDefaults(e) { $("#t" + e + "_helpQuest").hide(), emptyHtml(e) } function leftSideTransition(e, t) { leftSideDefaults(t); var r = !1, o = ReqObj.Form[t].formType.toLowerCase(), i = ReqObj.Form[t].ctaType.toLowerCase(); "enq" === o && (leftSideTransitionPnameCompname(t), leftSideTransitionAddress(t)), updateDispZoomImage(t, o); var a = { type: ReqObj.Form[t].ctaType.toLowerCase(), displayImage: isSet(ReqObj.Form[t].displayImage) ? ReqObj.Form[t].displayImage : "", zoomImage: isSet(ReqObj.Form[t].zoomImage) ? ReqObj.Form[t].zoomImage : "", vidUrl: isSet(ReqObj.Form[t].vidUrl) ? ReqObj.Form[t].vidUrl : "" }, s = ReqObj.Form[t].multipleImageVideo; ReqObj.Form[t].multiImageKey = !(!isSet(s) || "" === s); var n = isSet(s) && "" !== s ? returnImageArray(s) : []; if (0 === n.length) { if ("video" === a.type) if ("" !== a.vidUrl) n.push(a); else { var l = createImageObject("image", a.displayImage, a.zoomImage, ""); "image" !== l.type || "" === l.displayImage && "" === l.zoomImage || n.push(l) } "video" === a.type.toLowerCase() || "" === a.displayImage && "" === a.zoomImage || n.push(a), 0 === n.length && (r = !0) } if (!0 === r) { var c = { type: a.type, displayImage: "", zoomImage: "", vidUrl: "", defaultcase: !0 }; n.push(c) } 0 === e ? stepZero({ data: { receivingData: { step: e, tmpId: t, formType: o, ctaType: i, key: n, values: a, total: n.length } } }) : 1 === e && stepOne({ data: { receivingData: { step: e, tmpId: t, formType: o, ctaType: i, key: n, values: a, total: n.length } } }) } function stepZero(e) { var t = e.data.receivingData.step, r = e.data.receivingData.tmpId, o = e.data.receivingData.formType, i = e.data.receivingData.ctaType, a = e.data.receivingData.key, s = e.data.receivingData.values, n = e.data.html_insert, l = isSet(e.data.receivingData.index) ? e.data.receivingData.index : getStartingIndex(a, s, i); e.data.receivingData.index = !0 === a.defaultcase ? 0 : l, "enq" === o && stepZeroEnq({ data: { receivingData: e.data.receivingData, html_insert: n } }), n = isSet(n) && "" !== n ? n : getLeftSideHtml(a, l, r), a[l].type.toLowerCase() !== i.toLowerCase() && (i = a[l].type), "video" === i.toLowerCase() ? ctaTypeVideo(t, r, n, o) : addImage(r, n), "image" === i.toLowerCase() && "video" === i.toLowerCase() || ctaTypeOthers(t, r, n, o), "image" === i.toLowerCase() && ctaTypeImage(t, r, o), "image" !== i.toLowerCase() && "video" !== i.toLowerCase() && ctaTypeNotImageNotVideo(t, r, o) } function stepZeroEnq(e) { var t = e.data.receivingData.tmpId; !1 === ReqObj.Form[t].multiImageKey ? (showHideArrow({ data: { receivingData: e.data.receivingData, todo: "next" } }), showHideArrow({ data: { receivingData: e.data.receivingData, todo: "previous" } })) : displayLeftArrows(e) } function displayLeftArrows(e) { var t = e.data.receivingData.key.length, r = e.data.receivingData.index, o = e.data.receivingData.tmpId; 1 === t && hideAllArrows(o), t > 1 && (0 === r ? showHideArrow({ data: { receivingData: e.data.receivingData, todo: "start" } }) : r === t - 1 ? showHideArrow({ data: { receivingData: e.data.receivingData, todo: "last" } }) : r > 0 && r < t - 1 && showHideArrow({ data: { receivingData: e.data.receivingData, todo: "between" } })) } function showHideArrow(e) { var t = e.data.receivingData.tmpId, r = e.data.receivingData.step, o = e.data.todo; $("#t" + t + "_benext").removeClass("bedsnone"), 0 === r ? ("next" === o && (isSet(ReqObj.Form[t].next) && "function" == typeof ReqObj.Form[t].next && "" !== ReqObj.Form[t].next ? ($("#t" + t + "_qnextbtn").removeClass("bedsnone"), $("#t" + t + "_qnextbtn").off("click").on("click", { tmpId: t, todo: o }, changeProd)) : $("#t" + t + "_qnextbtn").addClass("bedsnone")), "previous" === o && (isSet(ReqObj.Form[t].prev) && "function" == typeof ReqObj.Form[t].prev && "" !== ReqObj.Form[t].prev ? ($("#t" + t + "_beprevious").removeClass("bedsnone"), $("#t" + t + "_beprevious").off("click").on("click", { tmpId: t, todo: "prev" }, changeProd)) : $("#t" + t + "_beprevious").addClass("bedsnone")), "start" === o ? ($("#t" + t + "_qnextbtn").removeClass("bedsnone"), $("#t" + t + "_beprevious").addClass("bedsnone"), $("#t" + t + "_qnextbtn").off("click").on("click", { receivingData: e.data.receivingData }, moveToNextImage)) : "last" === o ? ($("#t" + t + "_beprevious").removeClass("bedsnone"), $("#t" + t + "_qnextbtn").addClass("bedsnone"), $("#t" + t + "_beprevious").off("click").on("click", { receivingData: e.data.receivingData }, moveToPreviousImage)) : "between" === o && ($("#t" + t + "_beprevious").removeClass("bedsnone"), $("#t" + t + "_qnextbtn").removeClass("bedsnone"), $("#t" + t + "_qnextbtn").off("click").on("click", { receivingData: e.data.receivingData }, moveToNextImage), $("#t" + t + "_beprevious").off("click").on("click", { receivingData: e.data.receivingData }, moveToPreviousImage))) : 1 === r && hideAllArrows(t) } function hideAllArrows(e) { $("#t" + e + "_benext").addClass("bedsnone"), $("#t" + e + "_beprevious").addClass("bedsnone"), $("#t" + e + "_qnextbtn").addClass("bedsnone") } function moveToNextImage(e) { var t = e.data.receivingData.key, r = e.data.receivingData.total, o = e.data.receivingData.index, i = e.data.receivingData.tmpId, a = o + 1, s = (o += 1) + 1; blenqGATracking("Enq" === ReqObj.Form[i].formType ? "Send Enquiry" : "Post Buy Leads", ReqObj.Form[i].ctaName + "|next_" + a + "to" + s + "|total-" + r, getEventLabel(), 0, i); var n = returnUpdatedData(t, o, e.data.receivingData); n.index = o, "video" === n.key[o].type.toLowerCase() ? $("#t" + i + "_imglodr").removeClass("bedsnone") : $("#t" + i + "_imglodr").addClass("bedsnone"), stepZero({ data: { receivingData: n, html_insert: getLeftSideHtml(t, o, i) } }) } function moveToPreviousImage(e) { var t = e.data.receivingData.key, r = e.data.receivingData.total, o = e.data.receivingData.index, i = e.data.receivingData.tmpId, a = o + 1, s = (o -= 1) + 1; blenqGATracking("Enq" === ReqObj.Form[i].formType ? "Send Enquiry" : "Post Buy Leads", ReqObj.Form[i].ctaName + "|prev_" + a + "to" + s + "|total-" + r, getEventLabel(), 0, i); var n = returnUpdatedData(t, o, e.data.receivingData); n.index = o, "video" === n.key[o].type.toLowerCase() ? $("#t" + i + "_imglodr").removeClass("bedsnone") : $("#t" + i + "_imglodr").addClass("bedsnone"), stepZero({ data: { receivingData: n, html_insert: getLeftSideHtml(t, o, i) } }) } function stepOne(e) { var t = e.data.receivingData.tmpId, r = e.data.receivingData.ctaType, o = e.data.receivingData.formType, i = e.data.receivingData.step, a = e.data.receivingData.key, s = e.data.receivingData.values, n = !1; "video" === r.toLowerCase() ? (s = createImageObject("image", s.displayImage, s.zoomImage, ""), n = !0) : (s = s, n = !1), !0 === n && a.push(s); var l = isSet(e.data.receivingData.index) ? e.data.receivingData.index : getStartingIndex(a, s, s.type), c = isSet(e.data.receivingData.html_insert) && "" !== e.data.receivingData.html_insert ? e.data.receivingData.html_insert : getLeftSideHtml(a, l, t); hideAllArrows(t), emptyHtml(t), "video" === r.toLowerCase() ? ctaTypeVideo(e.data.receivingData.step, t, c, e.data.receivingData.formType) : ctaTypeOthers(i, t, c, o) } function returnUpdatedData(e, t, r) { return r.ctaType = e[t].type.toLowerCase(), r } function returnImageArray(e) { if (e instanceof Array) { for (var t = e.length, r = [], o = 0; o < t; o++)if (e[o] instanceof Object) { if ("video" === e[o].type.toLowerCase()) if ("" !== e[o].vidUrl) r.push(e[o]); else { var i = createImageObject("image", e[o].displayImage, e[o].zoomImage, ""); "image" !== i.type.toLowerCase() || "" === i.displayImage && "" === i.zoomImage || r.push(i) } "video" === e[o].type.toLowerCase() || "" === e[o].displayImage && "" === e[o].zoomImage || r.push(e[o]) } return r } } function createImageObject(e, t, r, o) { return { type: e.toLowerCase(), displayImage: t, zoomImage: r, vidUrl: o } } function getStartingIndex(e, t, r) { for (var o = {}, i = e.length, a = 0; a < i; a++)if ((o = e[a]).type.toLowerCase() === r.toLowerCase() && (o.displayImage === t.displayImage && "" !== o.displayImage && "" !== t.displayImage || o.zoomImage === t.zoomImage && "" !== t.zoomImage && "" !== o.zoomImage || o.vidUrl === t.vidUrl && "" !== o.vidUrl && "" !== t.vidUrl)) return a; return 0 } function ctaTypeVideo(e, t, r, o) { 0 === e ? ($("#t" + t + "parent_iframe").removeClass("bedsnone"), $("#t" + t + "_prodimg").addClass("bedsnone"), isSet(ReqObj.Form[t].vidUrl) && "" === ReqObj.Form[t].vidUrl && ctaTypeOthers(e, t, r)) : 1 === e && ($("#t" + t + "_leftS").removeClass().addClass("be-Lsc1"), addImage(t, r)) } function ctaTypeOthers(e, t, r, o) { 0 === e ? "chatbl" === o.toLowerCase() ? $("#t" + t + "_leftS").removeClass().addClass("be-Lsc3") : $("#t" + t + "_leftS").removeClass().addClass("be-Lsc") : 1 === e && ("bl" === o && (1 !== ReqObj.updateImage && update_image(t), addImage(t, r), $("#t" + t + "_helpQuest").show()), "enq" === o && (addImage(t, r), leftSideLoadZoom(t)), $("#t" + t + "_leftS").removeClass().addClass("be-Lsc1")) } function ctaTypeImage(e, t, r) { 0 === e && leftSideLoadZoom(t) } function ctaTypeNotImageNotVideo(e, t, r) { 0 === e && ("enq" === r ? ($("#t" + t + "_leftS").removeClass().addClass("be-Lsc2"), leftSideLoadZoom(t)) : "bl" === r ? ($("#t" + t + "_leftS").removeClass().addClass("be-Lsc1"), $("#t" + t + "_helpQuest").show()) : "chatbl" === r && ($("#t" + t + "_leftS").removeClass().addClass("be-Lsc3"), $("#t" + t + "_helpQuest").show())) } function getLeftSideHtml(e, t, r) { return (new ReqImage).displayHtml(r, e, t) } function emptyHtml(e) { $("#t" + e + "parent_iframe").html("<div id='t" + e + "_prodVideo' class='be-prdimg'></div>"), $("#t" + e + "_prodimg").html("") } function addImage(e, t) { $("#t" + e + "_prodimg").html(t), $("#t" + e + "parent_iframe").addClass("bedsnone"), $("#t" + e + "_prodimg").removeClass("bedsnone") } function getImage(e) { return ReqObj.ImageKey[e] } function leftSideLoadZoom(e) { $("#t" + e + "_zoomimage").on("load", function () { $("#t" + e + "_zoomimage").show(), $("#t" + e + "_dispimage").remove() }) } function funcOth(e) { "Other" == $("#" + e + " option:selected").val() ? ($("#other_" + e + "_1").css("display", "block"), $("#other_" + e + "_1").focus()) : $("#other_" + e + "_1").css("display", "none") } function RadioClick() { $(".radioClick").off("click").on("click", function (e) { var t = $(this).attr("name"), r = $(this).hasClass("waschecked"); $("input[name='" + t + "']").each(function () { $(this).prop("checked", !1).removeClass("waschecked"), $(this).parent().removeClass("sl-box chksl"), $(this).siblings("label").children(".bechk-in").children().hide() }), r || ($(this).prop("checked", !0).addClass("waschecked"), $(this).parent().siblings(".oth_bx").children("input").val(""), $(this).parent().addClass("sl-box chksl"), $(this).siblings("label").children(".bechk-in").children().show()) }) } function CheckBoxClick() { $(".CheckboxClick").off("click").on("click", function () { var e = $(this); e.siblings("input").prop("checked") ? (e.children(".bechk-in").children().hide(), e.parent().removeClass("chksl")) : (e.children(".bechk-in").children().show(), e.parent().addClass("chksl")) }) } function radCheck(e) { if (isSet(e)) { var t = $(e).children("span").attr("id"), r = t.slice(0, 5), o = r + "_enrich_city", a = ""; if ("Anywhere in India" != $("#" + t).html() && "Local Only" != $("#" + t).html() && "Specific City" != $("#" + t).text() || $("#spcity").html(""), "Specific City" == $("#" + t).text()) { var s = ""; for (i = 1; i < 4; i++)s = "", s = o + i, a += "<div class='bepr beW15 belft text_bx'><label class='be-lbl'>City " + i + "</label><input type='text' id=" + s + " name=" + s + " autocomplete='off'  class='be-slbox' onblur='chckval(" + s + ",this.value);'><input type='hidden' id='" + s + "specificcity_hidden'></div>"; $("#spcity").length > 0 || $("#" + t).parent().parent().parent().append("<div id='spcity' class='be-row bemt5' style='height:54px;'></div>"), $("#spcity").html(a) } if ("Local Only" == $("#" + t).text() || "Anywhere in India" == $("#" + t).text()) $("#spcity").remove(); else if ("Specific City" == $("#" + t).text()) { $("#" + t).parent().siblings("input").hasClass("waschecked") && $("#spcity").remove() } enrichCityMultiple(r) } } function enrichCityMultiple(e) { for (var t = 1; t <= 3; t++)null != document.getElementById(e + "_enrich_city" + t) && (window[e + "city_sugg_" + t] = new Suggester({ element: e + "_enrich_city" + t, onSelect: selecttext_city_enrich, type: "city", fields: "std,state,id,stateid", placeholder: "", minStringLengthToDisplaySuggestion: 1, autocompleteClass: "be-sugg", displayFields: "value,state", displaySeparator: " >> ", filters: "iso:IN", recentData: !1 })) } function selecttext_city_enrich(e, t) { isSet(t) && (this.value = t.item.value, $("#" + this.id + "specificcity_hidden").val(t.item.data.id)) } function chckval(e, t) { } function blkerr(e) { } LoginFlag.prototype.returnLoginFlag = function (e) { return "glusrupdate" === e && "" !== e ? 2 : "verifyusr" === e && "" !== e ? 5 : "login" === e && "" !== e ? 1 : "blurlogin" === e && "" !== e ? 3 : void 0 }, LoginMode.prototype.getLoginMode = function () { var e = usercookie.getCookie("v4iilex"), t = usercookie.getCookie("imEqGl"), r = usercookie.getCookie("ImeshVisitor"); return "" === r && "" !== e && (usercookie.deleteCookie("v4iilex"), e = ""), "" === r && "" !== t && usercookie.deleteCookie("imEqGl"), isSet(e) && "" !== e ? 1 : isSet(r) && "" !== r ? 2 : 3 }, SetUserDetails(), loadOverlay(), IpLoc.prototype.getIp = function () { var e = this, t = location.hostname.match(/^dev/) ? "//stg-geoip.imimg.com/" : location.hostname.match(/^stg/) ? "//stg-geoip.imimg.com/" : "//geoip.imimg.com/"; isSet(glmodid) && $.ajax({ cache: !1, url: t + "api/location.php", data: { modid: glmodid, token: "imobile@15061981" }, type: "POST", dataType: "json", success: function (t) { if (isSet(t) && isSet(t.Response)) if (200 === parseInt(t.Response.Code) && "Success" === t.Response.Status) { var r = t.Response.Data; isSet(r) && (r.geoip_cityname = isSet(r.geoip_cityname) ? r.geoip_cityname : "", r.geoip_cityid = isSet(r.geoip_cityid) ? r.geoip_cityid : "", r.geoip_countryiso = isSet(r.geoip_countryiso) ? r.geoip_countryiso : "", r.geoip_countryname = isSet(r.geoip_countryname) ? r.geoip_countryname : "", r.geoip_accuracy = isSet(r.geoip_accuracy) ? r.geoip_accuracy : "", r.geoip_ipaddress = isSet(r.geoip_ipaddress) ? r.geoip_ipaddress : "", r.geoip_statename = isSet(r.geoip_statename) ? r.geoip_statename : "", e.setIpLoc(r, glmodid)) } else blenqGATracking("iploc", "service:location:failure", t.Response, 1, 0); else blenqGATracking("iploc", "service:location:failure", "response undefined", 1, 0) }, error: function (e) { e = isSet(e) ? e : "response undefined", blenqGATracking("iploc", "service:location:failure", JSON.stringify(e), 1, 0) } }) }, IpLoc.prototype.setIpLoc = function (e, t) { var r = "gcniso=" + e.geoip_countryiso + "|gcnnm=" + e.geoip_countryname + "|gctnm=" + e.geoip_cityname + "|gctid=" + e.geoip_cityid + "|gacrcy=" + e.geoip_accuracy + "|gip=" + e.geoip_ipaddress + "|gstnm=" + e.geoip_statename; usercookie.setCookie("iploc", r, .125, t), this.captureDetailsOfIploc(), reloadFlagSuggestor("iploc") }, IpLoc.prototype.captureDetailsOfIploc = function () { var e = usercookie.getCookie("iploc"); ReqObj.UserDetail.ipctid = usercookie.getParameterValue(e, "gctid"), ReqObj.UserDetail.ipcityname = usercookie.getParameterValue(e, "gctnm") }, new IpLoc; var webAddressLocation; appsServerName = (webAddressLocation = location.hostname).match(/^dev/) ? "//dev-apps.imimg.com/" : webAddressLocation.match(/^stg/) ? "//stg-apps.imimg.com/" : "//apps.imimg.com/"; function ProductName(e) { this.ProductNameHTML = "", this.onselect = 0, this.tmpId = "", ReqObj.Form[e].productObject = this, $("#t" + e + "_prodtitle").html(""), this.className = "ProductName", this.isProdNameChanged = !1, this.ProductNameHtmlObj = { Label: "", UserInput: "", OuterWrapper: "", ClosingWrapper: "" }, this.ProductNameHtmlObjArray = [] } function Callblur(e) { if (13 === (e.keyCode ? e.keyCode : e.which) && e.target.id === "t" + e.data.param1 + "prodtitle" && isSet($("#t" + e.data.param1 + "prodtitle")[0])) { for (var t = $._data($("#t" + e.data.param1 + "prodtitle")[0], "events"), r = isSet(t.blur) ? t.blur : [], o = 0; o < r.length; o++)r[o].handler(r[o]); HideSuggester() } } function IsBlEnqProdNameChanged(e) { if (isSet(e)) return !(!$("#t" + e + "prodtitle").length || "" === $("#t" + e + "prodtitle").val() || "Enter product/service name" === $("#t" + e + "prodtitle").val() || ReqObj.Form[e].prodName === $("#t" + e + "prodtitle").val()) } function RequirementDtl(e, t) { this.className = "RequirementDtl", this.RequirementDtlObj = { OuterWrapper: "", UserInput: "", ClosingWrapper: "", Label: "" }, this.Rdbox = "", this.setValue = "", this.countclick = 0, this.QuestionsToRemove = ["Why do you need this", "Any Preferred Brand", "I am interested in", "Is this a sample order", "Is It Customized", "Currency"], this.QuestionArray = [], this.type = t } function ThankYou(e) { this.payxImgUrl = "https://paywith.indiamart.com?bannerid=EN_Form", this.payxAdvUrl = "https://paywith.indiamart.com?bannerid=EN_Form_ADV_", this.ThankYouHtml = "", this.AfterThankYouHtml = "", this.className = "ThankYou", "chatbl" !== ReqObj.Form[e].formType.toLowerCase() && (this.idToAppend = "#t" + e + "_thankDiv", this.idToHide = "#t" + e + "_mcont") } ProductName.prototype.addHtmlObjToArray = function (e) { this.ProductNameHtmlObjArray.push(e) }, ProductName.prototype.displayAnswer = function (e) { var t = chatBlClass(e, "right"), r = "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : ""; return [ConversationRightWrapper(e, returnAnswer(e, "ProductName"), { classtotest: t, leftright: r })] }, ProductName.prototype.hasHtml = function (e) { if (isSet(e)) { this.tmpId = e.tmpId; var t = e.tmpId; this.addHtmlObjToArray(this.getProductHtml(t)); var r = { SuffixOuterHtml: "<div  id='t" + t + "_prodtitle'>", SuffixClosingHtml: "</div>", suffix: "_prodtitle" }; this.ProductNameHTML = MakeWrapper([this.ProductNameHtmlObjArray], t, r), "" !== this.ProductNameHTML ? this.ifHtmlPresent(e, t) : this.ifHtmlNotPresent(e, t) } }, ProductName.prototype.ifHtmlPresent = function (e, t) { if (e.that.NumberofClassCalled -= 1, AttachObject(e.object, t), isSet(e.AfterService)) for (var r = 0; r < e.AfterService.length; r++)e.that.MakeSeq(e.AfterService[r], t); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, t) }, ProductName.prototype.ifHtmlNotPresent = function (e, t) { e.hasFallback ? CreateSeq(e.FallbackObj) : e.that.NumberofClassCalled -= 1 }, ProductName.prototype.returnProductInput = function (e, t) { return '<input templateId="' + e + '" class="' + t + '" type="text" name="q_title" id="t' + e + 'prodtitle" onblur="" maxlength="100" placeholder="Enter product / service name" autocomplete="off" spellcheck="true" role="textbox" aria-autocomplete="list" aria-haspopup="true">' }, ProductName.prototype.returnProductError = function (e, t, r) { return IsChatbl(e) ? '<div class="' + r + '" id="t' + e + '_error_title">Enter product/service name' : '<div class="' + r + '" id="t' + e + '_error_title"><div data-role="content">Enter product/service name</div>' }, ProductName.prototype.getInput = function (e, t) { this.ProductNameHtmlObj.UserInput = IsChatbl(e) ? this.getChatBlInputHtml(e, t) : this.getBlEnqInputHtml(e, t) }, ProductName.prototype.getChatBlInputHtml = function (e, t) { var r = "inline" === chatBlPopupInline(e) || "popup" === chatBlPopupInline(e) ? "be-slbox inpt_errorbx chatpdg" : "", o = ""; o += this.returnProductInput(e, r); var i = returnContainer("", "", "chat-arrow", "", ""); return o += returnButton("t" + e, "_submit", i += "</div>", "inline" === chatBlPopupInline(e) ? "chat-arowicon1" : "popup" === chatBlPopupInline(e) ? "chat-arowicon1" : ""), o += this.returnProductError(e, t, "redc bltperor"), o += "</div>" }, ProductName.prototype.getBlEnqInputHtml = function (e, t) { var r = ""; return r += this.returnProductInput(e, "be-slbox inpt_errorbx be-row"), r += this.returnProductError(e, t, "beerrp4 bedsnone be-erbx"), r += '<a class="be-erarw" data-role="arrow"></a></div>' }, ProductName.prototype.getLabel = function (e, t) { this.ProductNameHtmlObj.Label = IsChatbl(e) ? this.getChatBlLabelHtml(e, t) : this.getBlEnqLabelHtml(e, t) }, ProductName.prototype.getChatBlLabelHtml = function (e, t) { return returnLabel("t" + e, "Please enter Product/Service name", "_name-l", "") }, ProductName.prototype.getBlEnqLabelHtml = function (e, t) { return returnLabel("t" + e, "Enter Product/Service name", "_name-l", "be-lbl") }, ProductName.prototype.getProductHtml = function (e) { return this.getLabel(e, ReqObj.Form[e].formType.toLowerCase()), this.getInput(e, ReqObj.Form[e].formType.toLowerCase()), this.ProductNameHtmlObj.ClosingWrapper = "", this.ProductNameHtmlObj.OuterWrapper = "", this.ProductNameHtmlObj }, ProductName.prototype.displayHtml = function () { return [this.ProductNameHTML] }, ProductName.prototype.handleUI = function (e) { var t = e.data.tmpId; "default" === e.data.todo && (this.setTitleSuggester(t), $("#t" + t + "_error_title").addClass("bedsnone"), $("#t" + t + "prodtitle").removeClass("highlight-err"), $("#t" + t + "_name-l").removeClass("redc"), this.showMcatFilled(t)) }, ProductName.prototype.defaultEvents = function (e) { this.handleUI({ data: { tmpId: e, todo: "default" } }), this.handleEvents(e), $(document).off("click.prodName keypress.prodName keydown.prodName").on("click.prodName keypress.prodName keydown.prodName", ".inpt_errorbx", function () { $("#t" + e + "_error_title").addClass("bedsnone"), $("#t" + e + "prodtitle").removeClass("highlight-err"), $("#t" + e + "_name-l").removeClass("redc") }) }, ProductName.prototype.AddBlur = function (e) { $("#t" + e + "prodtitle").off("blur.blEnqProdNameBlur").on("blur.blEnqProdNameBlur", { param1: e, param2: "blur", pnObject: this }, this.checkMcatIDJquery) }, ProductName.prototype.RemoveBlur = function (e) { $("#t" + e + "prodtitle").off("blur.blEnqProdNameBlur") }, ProductName.prototype.handleEvents = function (e) { this.IsEnterPressed = !1; var t = this; $(document).ready(function () { if (ReqObj.Form[e].flags.autofocusPName && $("#t" + e + "prodtitle").focus(), "chatbl" !== ReqObj.Form[e].formType) { t.AddBlur(e), $("#t" + e + "prodtitle").off("mouseleave.BlEnqEvent").on("mouseleave.BlEnqEvent", function () { $("#t" + e + "_cls").each(function () { "block" !== $(this).css("display") && "inline-block" !== $(this).css("display") || ($(this).off("mouseenter.BlEnqEvent").on("mouseenter.BlEnqEvent", function (r) { t.RemoveBlur(e) }), $(this).off("mouseleave.BlEnqEvent").on("mouseleave.BlEnqEvent", function () { t.AddBlur(e) })) }) }), $(document).off("mouseenter.BlEnqEvent").on("mouseenter.BlEnqEvent", ".t" + e + "_prodName", function (r) { "block" !== $(this).css("display") && "inline-block" !== $(this).css("display") || t.RemoveBlur(e) }), $(document).off("mouseleave.BlEnqEvent").on("mouseleave.BlEnqEvent", ".t" + e + "_prodName", function () { "block" !== $(this).css("display") && "inline-block" !== $(this).css("display") || t.AddBlur(e) }); var r = $("#t" + e + "_submit").css("display"); "block" !== r && "inline-block" !== r || ($("#t" + e + "_submit").off("mouseenter.BlEnqEvent").on("mouseenter.BlEnqEvent", function () { t.RemoveBlur(e) }), $("#t" + e + "_submit").off("mouseleave.SubmitBtn").on("mouseleave.SubmitBtn", function () { t.AddBlur(e) })) } $("#t" + e + "prodtitle").off("keypress.BlEnqEvent").on("keypress.BlEnqEvent", function (r) { 13 === (r.keyCode ? r.keyCode : r.which) && ($("#t" + e + "_submit").is(":disabled") || (t.IsEnterPressed = !0, $("#t" + e + "prodtitle").off("blur"), HideSuggester())) }) }) }, ProductName.prototype.setTitleSuggester = function (e) { var t = this, r = "sugg_title_" + e, o = setInterval(function () { if ("undefined" != typeof Suggester) { $(".t" + e + "_prodName").each(function () { $(this).remove() }); var i = SetAutoCompleteClass(e, "_prodName"), a = BlAutoSuggRowNum(e); window[r] = new Suggester({ element: "t" + e + "prodtitle", getQuotation: !1, onSelect: t.selectTitle, fields: "", type: "product", module: "BL-FORM", rowsToDisplay: a, recentData: 1, autocompleteClass: i }), JSON.stringify(r) && (isSet(e) && isSet(ReqObj.Form[e]) && isSet(ReqObj.Form[e].flags) && (ReqObj.Form[e].flags.isTitleSuggSet = !0), clearInterval(o)) } }, 1e3) }, ProductName.prototype.selectTitle = function (e, t) { var r = ReqObj.Form[$(this).attr("templateId")].productObject; isSet(r) && $("#t" + r.tmpId + "prodtitle").length && ReqObj.Form[r.tmpId].prodName !== $("#t" + r.tmpId + "prodtitle").val() && (isSet(t) && isSet(t.item) ? (t.item.value && ($("#t" + r.tmpId + "prodtitle").val(t.item.value), IsChatbl(r.tmpId) && (ReqObj.Form[r.tmpId].UserInputs.ProductName = t.item.value), ReqObj.Form[r.tmpId].prodName = t.item.value, ReqObj.Form[r.tmpId].prodDispName = "", ReqObj.Form[r.tmpId].mcatName = ""), isSet(t.item.mcat_id) && isSet(t.item.mcat_id[0]) && isSet(t.item.cat_id) && isSet(t.item.cat_id[0]) ? (ReqObj.Form[r.tmpId].mcatId = t.item.mcat_id[0], ReqObj.Form[r.tmpId].catId = t.item.cat_id[0], ReqObj.Form[r.tmpId].callLeftSide = !1, r.getMcatImage(r.tmpId, "select"), isSet(r.tmpId) && "09" === r.tmpId.substring(0, 2) && AfterFormDefaults(r.tmpId), $("#t" + r.tmpId + "prodtitle").focus()) : r.getMcatDetail($("#t" + r.tmpId + "prodtitle").val(), r.tmpId, "select")) : r.getMcatDetail($("#t" + r.tmpId + "prodtitle").val(), r.tmpId, "select")) }, ProductName.prototype.SaveDetails = function (e, t) { IsChatbl(e) && (ReqObj.Form[e].UserInputs.ProductName = $("#t" + e + "prodtitle").val()) }, ProductName.prototype.getMcatImage = function (e) { if (isSet(e) && isSet(ReqObj.Form[e]) && isSet(ReqObj.Form[e].formType) && ("chatbl" !== ReqObj.Form[e].formType.toLowerCase() || "popup" === chatBlPopupInline(e))) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"; $("#t" + e + "_imglodr").removeClass("bedsnone"), ReqObj.Form[e].mcatImage = "", isSet(ReqObj.Form[e].mcatId) && -1 !== parseInt(ReqObj.Form[e].mcatId) ? $.ajax({ cache: !1, url: appsServerName + "index.php?r=postblenq/McatDtl", type: "GET", crossOrigin: !0, crossDomain: !0, timeout: 3e3, data: { modid: ReqObj.Form[e].modId, mcatid: ReqObj.Form[e].mcatId }, dataType: "json", success: function (r) { if (isSet(r) && isSet(r.Response) && 200 === parseInt(r.Response.Code) && isSet(r.Response.Data)) { if (isSet(r.Response.Data.glcat_mcat_img1_250x250)) { var o = r.Response.Data.glcat_mcat_img1_250x250; o = o.replace("http:", ""), ReqObj.Form[e].displayImage = o, ReqObj.Form[e].zoomImage = o, ReqObj.Form[e].vidUrl = "", ReqObj.ImageKey[ReqObj.Form[e].mcatId] = o } } else blenqGATracking(t, "service:McatDtl:failure", r, 1, e) }, error: function (r) { var o = isSet(r) ? r : "response undefined"; blenqGATracking(t, "service:McatDtl:failure", o, 1, e) }, complete: function () { $("#t" + e + "_imglodr").addClass("bedsnone"), leftSideTransition(0, e) } }) : -1 === parseInt(ReqObj.Form[e].mcatId, 10) && (ReqObj.Form[e].displayImage = "", ReqObj.Form[e].zoomImage = "", $("#t" + e + "_imglodr").addClass("bedsnone"), leftSideTransition(0, e)) } }, ProductName.prototype.getMcatDetail = function (e, t, r, o) { var i = this, a = appsServerName + "models/mcatid-suggestion.php?search_param=" + e; isSet(e) && (addBlLoader(t, "center"), ReqObj.Form[t].mcatId = -2, IsChatbl(t) && $("#t" + t + "prodtitle").prop("disabled", !0).addClass("chatblur"), IsChatbl(t) && $("#t" + t + "_submit").prop("disabled", !0).addClass("chatblur"), $.ajax({ cache: !1, url: a, type: "GET", dataType: "json", success: function (e) { isSet(e) && e.mcatid && e.catid ? (ReqObj.Form[t].mcatId = e.mcatid, ReqObj.Form[t].catId = e.catid, ReqObj.Form[t].mcatType = e.type, ReqObj.Form[t].prodDispName = "", ReqObj.Form[t].mcatName = "") : (ReqObj.Form[t].mcatId = -1, ReqObj.Form[t].catId = -1, ReqObj.Form[t].mcatType = "") }, error: function (e, r, o) { ReqObj.Form[t].mcatId = -1, ReqObj.Form[t].catId = -1, ReqObj.Form[t].mcatType = "" }, complete: function (a) { IsChatbl(t) && $("#t" + t + "prodtitle").prop("disabled", !1).removeClass("chatblur"), IsChatbl(t) && $("#t" + t + "_submit").prop("disabled", !1).removeClass("chatblur"), StaticQuesForeignUser(t) && ("p" === ReqObj.Form[t].mcatType.toLowerCase() ? ReqObj.Form[t].modrefType = "product" : ReqObj.Form[t].modrefType = "company"), removeBLLoader(t, "center"), i.isProdNameChanged && DirectSubmitWithoutBlur(t), ReqObj.Form[t].prodName = e, ReqObj.Form[t].callLeftSide = !1, i.getMcatImage(t), isSet(o) && PostAjax(o, t), !isSet(r) || "blur" !== r && "select" !== r || (ReqObj.Form[t].flags.autofocusPName = !0, $("#t" + t + "prodtitle").length > 0 && $("#t" + t + "prodtitle").val() === e && ("chatbl" !== ReqObj.Form[t].formType.toLowerCase() ? AfterFormDefaults(t) : GetIsqFromService(t)), IsChatbl(t)) } })) }, ProductName.prototype.showMcatFilled = function (e) { var t = ""; "" !== ReqObj.Form[e].prodName && (void 0 !== ReqObj.Form[e].prodServ && "C" !== ReqObj.Form[e].prodServ ? t = ReqObj.Form[e].prodName : "C" === ReqObj.Form[e].prodServ && "BL" === ReqObj.Form[e].formType && (t = ReqObj.Form[e].prodName)), $("#t" + e + "prodtitle").val(t) }, ProductName.prototype.onSubmit = function (e) { var t = PreAjax("ProductName", e); IsBlEnqProdNameChanged(e) && (this.isProdNameChanged = !0), this.checkMcatID({ param1: e, param2: "submit" }, t) }, ProductName.prototype.validate = function (e, t) { var r = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads", o = $("#t" + e + "prodtitle").val(); isSet(validation) || createGlobalObject(); var i = validation.isProductNameValid(o), a = ReqObj.Form[e].FormSequence.StepCounter + 1; return !1 !== i.type || (blenqGATracking(r, "Validation_Error_Prd_Title|" + a + "|ProductName", getEventLabel(), 1, e), $("#t" + e + "_error_title").removeClass("bedsnone").focus(), $("#t" + e + "prodtitle").addClass("highlight-err"), "chatbl" !== ReqObj.Form[e].formType && $("#t" + e + "_name-l").addClass("redc"), !1) }, ProductName.prototype.checkMcatIDJquery = function (e) { e.data.pnObject.checkMcatID(e.data) }, ProductName.prototype.checkMcatID = function (e, t) { var r = e.param1, o = e.param2; IsBlEnqProdNameChanged(r) ? this.getMcatDetail($("#t" + r + "prodtitle").val(), r, o, t) : isSet(t) && PostAjax(t, r) }, RequirementDtl.prototype.hasHtml = function (e) { isSet(e) && ("isq" === this.type ? (ReqObj.Form[e.tmpId].ReqDtl.HasHtmlCalled = !0, "" === ReqObj.Form[e.tmpId].IsqArray ? ReqObj.Form[e.tmpId].GlobalRdObj.RdObj = e : isSet(ReqObj.Form[e.tmpId].GlobalRdObj) && "function" == typeof ReqObj.Form[e.tmpId].GlobalRdObj.AttachingObject && ReqObj.Form[e.tmpId].GlobalRdObj.AttachingObject(e)) : "" !== this.getHtml(e.tmpId) ? this.ifHtmlPresent(e) : this.ifHtmlNotPresent(e)) }, RequirementDtl.prototype.displayHtml = function (e) { if (isSet(e)) { ReqObj.Form[e].flags.isDescDivShown = !0, this.getHtml(e); var t = { SuffixOuterHtml: "<div  id='t" + e + "_reqbox' class='bepdpreq bemt15'>", SuffixClosingHtml: "</div>", suffix: "_reqbox" }; return this.Rdbox = MakeWrapper([[this.RequirementDtlObj]], e, t), [this.Rdbox] } }, RequirementDtl.prototype.ifHtmlPresent = function (e) { if (e.that.NumberofClassCalled -= 1, AttachObject(e.object, e.tmpId), isSet(e.AfterService)) for (var t = 0; t < e.AfterService.length; t++)e.that.MakeSeq(e.AfterService[t], e.tmpId); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, e.tmpId) }, RequirementDtl.prototype.ifHtmlNotPresent = function (e) { e.hasFallback && CreateSeq(e.FallbackObj) }, RequirementDtl.prototype.getHtml = function (e) { var t = "isq" === this.type ? 0 : 1; this.getInput(e, t), this.getLabel(e) }, RequirementDtl.prototype.getPrefilledText = function (e) { var t = "Hi,\n"; return "product" === ReqObj.Form[e].modrefType.toLowerCase() ? t += "I am interested in buying " + ReqObj.Form[e].prodName : t += "I am looking for service provider for " + ReqObj.Form[e].prodName, t += "\nKindly send me quotations." }, RequirementDtl.prototype.getInput = function (e, t) { var r = ""; if (r += returnContainer("", "", "betarea", "", ""), 0 === t) { var o = this.returnIsqAsButton(e); if (isSet(o) && "" !== o) this.setValue = "yes", r += "<textarea class='be-slbox be-txtarea' id='t" + e + "_reqBoxTemplates' placeholder='" + "Mention more details about your requirement." + "' value = '' style='font-size:13px' isqattr = 'true'></textarea><div class='New-Fld'><p>Add more details</p>", r += o; else r += "<textarea class='be-slbox be-txtarea' id='t" + e + "_reqBoxTemplates' placeholder='" + this.getPlaceHolderText(e) + "'></textarea>"; r += "</div>" } else { r += "<textarea class='be-slbox be-txtarea' id='t" + e + "_reqBoxTemplates' placeholder='" + this.getPlaceHolderText(e) + "'></textarea>" } r += "</div>", this.RequirementDtlObj.UserInput = r }, RequirementDtl.prototype.getPlaceHolderText = function (e) { return "popup" === chatBlPopupInline(e) ? "Enter other details..." : "IN" === currentISO() || "IN" !== currentISO && "09" !== e.substring(0, 2) ? "" : "IN" !== currentISO() && "09" === e.substring(0, 2) ? "Mention additional details about your requirement." : "inline" === chatBlPopupInline(e) ? "" : void 0 }, RequirementDtl.prototype.getLabel = function (e) { "chatbl" !== ReqObj.Form[e].formType.toLowerCase() && (this.RequirementDtlObj.Label = "<div class='be-erbx beerrp6 bedsnone' id='t" + e + "_textarea_error'><div id='t" + e + "_textarear_cont' data-role='content'>Please enter your requirement in Detail</div><a class='be-erarw' data-role='arrow'></a></div>"); var t = { lblClass: "be-lbl", labelId: "t" + e + "_textarea", QuestionDesc: "Requirement Details" }; this.RequirementDtlObj.Label = MakeLabel(t, "", e) }, RequirementDtl.prototype.returnIsqAsButton = function (e) { if (isSet(ReqObj.Form[e].IsqArray)) { var t = "", r = this.getIsqAsQuestions(e); this.QuestionArray = r; for (var o = r.length, i = 0; i < o; i++)t += returnInput("t" + e, "isqtypebtn" + i, "button", "isqtypebtn" + i, "", "button", r[i], "", "", ""); return t } }, RequirementDtl.prototype.getIsqAsQuestions = function (e) { ReqObj.Form[e].toGetQuestionsOnly = !0; for (var t = ReqObj.Form[e].IsqArray, r = ReqObj.Form[e].IsqArray.length, o = [], i = 0; i < r; i++)FindIsqObjectQuestions(t[i], e, 0, !1, o); var a = ReqObj.Form[e].Isq.getIsqQuestionString; this.modifyQuestionArray(ReqObj.Form[e].Isq.currentQuestionString, a); return this.modifyQuestionArray(this.QuestionsToRemove, a) }, RequirementDtl.prototype.modifyQuestionArray = function (e, t) { for (var r = e.length, o = 0; o < r; o++)if (-1 !== $.inArray(e[o], t)) { var i = t.indexOf(e[o]); t.splice(i, 1) } return t }, RequirementDtl.prototype.AttachingObject = function (e) { if (isSet(e)) if (null !== ReqObj.Form[e.tmpId].IsqArray) { if (e.that.NumberofClassCalled -= 1, AttachObject(e.object, e.tmpId), isSet(e.AfterService)) for (var t = 0; t < e.AfterService.length; t++)e.that.MakeSeq(e.AfterService[t], e.tmpId); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, e.tmpId) } else e.hasFallback && CreateSeq(e.FallbackObj) }, RequirementDtl.prototype.resetClass = function (e) { ReqObj.Form[e].flags.isDescDivShown = !1, ReqObj.Form[e].flags.isDescDivShown ? ReqObj.Form[e].prevCount -= ReqObj.Form[e].IsqStepN : ReqObj.Form[e].prevCount -= ReqObj.Form[e].IsqStep1 }, RequirementDtl.prototype.defaultEvents = function (e) { if (isSet(e)) { var t = "isq" === this.type ? "isqasbutton" : ""; this.handleEvents({ data: { tmpId: e, todo: t, obj: this } }), this.handleUI({ data: { tmpId: e, todo: "defaults", obj: this } }); var r = $("#t" + e + "_reqBoxTemplates"); if (StaticQuesForeignUser(e) && !IsChatbl(e)) "true" === $("#t" + e + "_reqBoxTemplates").attr("isqattr") ? (r.height(100), r.css("line-height", "16px")) : r.height(80); isSet(ReqObj.Form[e].ReqDtlBox) ? r.text(ReqObj.Form[e].ReqDtlBox) : ReqObj.Form[e].ReqDtlBox = "", r.off("blur").on("blur", function (t) { ReqObj.Form[e].ReqDtlBox = $("#t" + e + "_reqBoxTemplates").val() }), "-126" === ReqObj.Form[e].afflId && r.attr("placeholder", "Type your message here..."), r.on("focus", function () { r.removeClass("highlight-err"), $("#t" + e + "_textarea").removeClass("redc"), $("#t" + e + "_textarea_error").addClass("bedsnone") }), IsChatbl(e) && r.focus() } }, RequirementDtl.prototype.handleEvents = function (e) { var t = e.data.tmpId, r = e.data.todo, o = e.data.obj; if ("isqasbutton" === r) for (var i = this.QuestionArray.length, a = 0; a < i; a++)$("#t" + t + "isqtypebtn" + a).off("click").on("click", { text: $("#t" + t + "isqtypebtn" + a).val(), obj: o, tmpId: t, todo: r, element: "#t" + t + "isqtypebtn" + a }, o.handleUI) }, RequirementDtl.prototype.handleUI = function (e) { var t = e.data.tmpId, r = e.data.todo, o = e.data.obj; if ("defaults" === r && "yes" === o.setValue && $("#t" + t + "_reqBoxTemplates").val(), "isqasbutton" === r) { o.countclick++; var i = e.data.text, a = e.data.element; $(a).css("background-color", "#ededed"), o.fireTracking({ data: { tmpId: t, todo: "onsuggselect", text: i } }); var s = $("#t" + t + "_reqBoxTemplates").val(); i = 1 === o.countclick ? s + i + " : " : s + "\n" + i + " : ", $("#t" + t + "_reqBoxTemplates").focus().val(i), scrollSmoothToBottom("t" + t + "_reqBoxTemplates") } }, RequirementDtl.prototype.validate = function (e) { if (isSet(e) && isSet(ReqObj.Form[e]) && 1 === parseInt(ReqObj.Form[e].rdMend)) { var t = $("#t" + e + "_reqBoxTemplates"); return isSet(validation) || createGlobalObject(), !1 !== validation.isDescriptionFilled(t.val()).type || (this.fireTracking({ data: { tmpId: e, todo: "default" } }), t.addClass("highlight-err").parent().siblings("label").addClass("redc"), t.parent().siblings(".be-erbx").removeClass("bedsnone"), !1) } return !0 }, RequirementDtl.prototype.fireTracking = function (e) { var t = e.data.todo, r = e.data.tmpId, o = "Enq" === ReqObj.Form[r].formType ? "Send Enquiry" : "Post Buy Leads"; "default" === t && blenqGATracking(o, "Validation_Error_Desc|" + (ReqObj.Form[r].FormSequence.StepCounter + 1) + "|RequirementDetail", getEventLabel(), 0, r); "onsuggselect" === t && blenqGATracking(o, "|Suggselected-" + e.data.text + "|mcat-" + ("product" === ReqObj.Form[r].modrefType.toLowerCase() ? ReqObj.Form[r].prodName : ReqObj.Form[r].mcatName), getEventLabel(), 0, r) }, RequirementDtl.prototype.SaveDetails = function (e) { isSet(e) && (ReqObj.Form[e].ReqDtlBox = $("#t" + e + "_reqBoxTemplates").val(), isSet(ReqObj.Form[e].ReqDtlBox) && ReqObj.Form[e].ReqDtlBox && (ReqObj.Form[e].ReqDtlBox = ReqObj.Form[e].ReqDtlBox.trim())) }, RequirementDtl.prototype.displayAnswer = function (e) { var t = NotFilled; return isSet(ReqObj.Form[e].ReqDtlBox) && ReqObj.Form[e].ReqDtlBox && (t = ReqObj.Form[e].ReqDtlBox), [ConversationRightWrapper(e, t, { classtotest: chatBlClass(e, "right"), leftright: "inline" === chatBlPopupInline(e) ? "message-right" : "popup" === chatBlPopupInline(e) ? "message-right1" : "" })] }, RequirementDtl.prototype.onSubmit = function (e) { if (isSet(e)) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads", r = PreAjax("RequirementDtl", e), o = location.hostname, i = o.match(/^dev/) ? "//dev-apps.imimg.com/" : o.match(/^stg/) ? "//stg-apps.imimg.com/" : "//apps.imimg.com/", a = ""; if (a = IsChatbl(e) ? "BL" : ReqObj.Form[e].formType, ReqObj.Form[e].ReqDtlBox && ValidGenId(ReqObj.Form[e].generationId)) { var s = { enrichDesc: ReqObj.Form[e].ReqDtlBox + ", " + ReqObj.Form[e].EnrichmentVal, offer_id: ReqObj.Form[e].generationId, s_glusrid: usercookie.getParameterValue(usercookie.getCookie("ImeshVisitor"), "glid"), modid: ReqObj.Form[e].modId, blEnqFlag: a }; isSet(ReqObj.Form[e].formType) && "enq" === ReqObj.Form[e].formType.toLowerCase() && (s.r_glusrid = ReqObj.Form[e].rcvGlid, s.q_dest = ReqObj.Form[e].query_destination), $.ajax({ cache: !1, url: i + "index.php?r=Newreqform/saveEnrichment", type: "GET", dataType: "json", crossOrigin: !0, crossDomain: !0, data: s, success: function (o) { isSet(o) ? 200 === parseInt(o.CODE) ? (blenqGATracking(t, "service:saveEnrichment:success", getEventLabel(), 1, e), PostAjax(r, e)) : (blenqGATracking(t, "service:saveEnrichment:failure", o, 1, e), Ajaxfailure(r, e)) : (blenqGATracking(t, "service:saveEnrichment:failure", "response undefined", 1, e), Ajaxfailure(r, e)) }, error: function (o) { o = isSet(o) ? JSON.stringify(o) : "response undefined", blenqGATracking(t, "service:saveEnrichment:failure", o, 1, e), Ajaxfailure(r, e) } }) } else PostAjax(r, e) } }, ThankYou.prototype.displayHtml = function (e) { if (isSet(e)) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"; if (isSet(ReqObj.Form[e].FormSequence)) var r = ReqObj.Form[e].FormSequence.StepCounter + 1 + ReqObj.Form[e].FormSequence.OnCloseCounter + 1; else r = 2; var o = currentISO(); return "enq" === ReqObj.Form[e].formType.toLowerCase() && FinishEnquiryService(e), "IN" !== o || IsChatbl(e) || blenqGATracking(t, "Displayed_PayX|" + r + "|Thank You", getEventLabel(), 0, e), this.showThankYou(e), [this.ThankYouHtml] } }, ThankYou.prototype.SaveDetails = function (e) { }, ThankYou.prototype.defaultEvents = function (e) { var t = "Enq" === ReqObj.Form[e].formType ? "Send Enquiry" : "Post Buy Leads"; if (isSet(ReqObj.Form[e].FormSequence)) var r = ReqObj.Form[e].FormSequence.StepCounter + 1 + ReqObj.Form[e].FormSequence.OnCloseCounter + 1; else r = 2; $("#t" + e + "_cls").off("click").on("click", function () { FormCloseStep(e) }), $("#payxbanner").on("click", function () { blenqGATracking(t, "PayX_Banner|" + r + "|Thank You", getEventLabel(), 0, e) }), $("#payxknowmore").on("click", function () { blenqGATracking(t, "PayX_KnowMore|" + r + "|Thank You", getEventLabel(), 0, e) }), $("#manage_rqt").on("click", function () { blenqGATracking(t, "Manage Your Requirement|" + r + "|Thank You", getEventLabel(), 0, e) }), setTimeout(function () { OpenCloseChatbl(e, !0) }, 2e4) }, ThankYou.prototype.hasHtml = function (e) { if (isSet(e)) { this.showThankYou(e.tmpId); this.ThankYouHtml; if (e.that.NumberofClassCalled -= 1, "" !== this.ThankYouHtml) { if (AttachObject(e.object, e.tmpId), isSet(e.AfterService)) for (var t = 0; t < e.AfterService.length; t++)e.that.MakeSeq(e.AfterService[t], e.tmpId); 0 === e.that.NumberofClassCalled && makeFinalSeq(e, e.tmpId) } else e.hasFallback && CreateSeq(e.FallbackObj) } }, ThankYou.prototype.setPayxUrl = function (e) { var t = ReqObj.Form[e].R_glusr_id, r = ReqObj.Form[e].R_title, o = ReqObj.Form[e].company; if ("Enq" === ReqObj.Form[e].formType) { var i = isSet(t) || "" === t ? btoa(-1) : btoa(t), a = isSet(o) || "" === o ? btoa(-1) : btoa(o), s = isSet(r) || "" === r ? btoa(-1) : btoa(r); this.payxImgUrl = this.payxImgUrl + "&S_name=" + a + "&s_glid=" + i + "&p_name=" + s, this.payxAdvUrl = this.payxAdvUrl + "&S_name=" + a + "&s_glid=" + i + "&p_name=" + s } }, ThankYou.prototype.showThankYou = function (e) { var t, r = usercookie.getCookie("ImeshVisitor"), o = ReturnCorrectVal(usercookie.getParameterValue(r, "em"), ""), i = ReturnCorrectVal(usercookie.getParameterValue(r, "ev"), ""), a = ReturnCorrectVal(usercookie.getParameterValue(r, "utyp"), ""), s = ReturnCorrectVal(usercookie.getParameterValue(r, "iso"), ""), n = webAddressLocation.match(/^dev/) ? "https://dev-" : webAddressLocation.match(/^stg/) ? "https://stg-" : "https://", l = "", c = "", u = "", m = "", p = "", b = "", d = ""; d = "P" === a.toUpperCase() || "P" !== a.toUpperCase() && window.location.href.match(/seller.indiamart.com/) ? n + "seller.indiamart.com/blgen/managebl/" : n + "my.indiamart.com/buyertools/managebl/"; var h = n + "my.indiamart.com/enquiry/messagecentre/"; (r.indexOf("ev") >= 0 && "V" !== i && "" !== o && (c = "<div class='be-grbg'>Suppliers are more likely to contact verified buyers.<br><b>Check your email " + o + " to verify.</b></div>"), isSet(ReqObj.Form[e].formType) && "enq" === ReqObj.Form[e].formType.toLowerCase() ? (this.payxImgUrl += "1", this.payxAdvUrl += "1") : (this.payxImgUrl += "2", this.payxAdvUrl += "2"), isSet(ReqObj.Form[e].formType) && "bl" === ReqObj.Form[e].formType.toLowerCase() ? (p = "<a href=" + this.payxImgUrl + ' target="_blank"><img src="' + n + 'apps.imimg.com/gifs/paywith-bannerLeft2.jpg" class="be-db" id="payxbanner"></a>', b = '<div class="befs16 txt-cnt" style="margin-top:50px;">Have an urgent requirement? <span class="befwt">Call us at 81-8181-8181</span></div>', u = '<div class="txt-cnt befs16 "><div class="bethhdg befwt bemt30 bemb5">Thank You!</div><div class="befwt">Your requirement has been received.</div> ' + c + '<div class="befs14 bemt15">Want to add/edit your details to your requirement? Do it here:</div><div id="manage_rqt" class="bemt15 bedblk"><a href=' + d + ' target="_blank" class="form-btn bepdglr">Manage Your Requirement</a></div></div>', m = "<a href=" + this.payxAdvUrl + ' target="_blank"><span class="kMr" id="payxknowmore">Know More></span></a>') : (p = "<a href=" + this.payxImgUrl + ' class ="be_payXurl" target="_blank"><img src="' + n + 'apps.imimg.com/gifs/paywith-bannerLeft2.jpg" class="be-db" id="payxbanner"></a>', u = '<div class="txt-cnt befs16 "><div class="bethhdg befwt bemt30 bemb5">Thank You!</div><div class="befwt">Your enquiry has been sent successfully. You will be contacted soon.</div>' + c + '<div class="clr-b"></div></div>', m = "<a href=" + this.payxAdvUrl + ' class = "be_payXurlADV" target="_blank"><span class="kMr" id="payxknowmore">Know More></span></a>'), t = '<div class="be-w237 bevT bedtc">' + p + "</div>", "chatbl" !== ReqObj.Form[e].formType.toLowerCase()) ? l = "IN" === s ? t + "<div class='bevT be-w710 bedtc'><div class='be-cross' id=t" + e + "_cls>X</div> " + u + b + "<div class='be-payxbg'><i class='pyxic'></i><br>We recommend using <span class='f_bold'>Pay With IndiaMart</span> <br>while paying to seller online. " + m + "<br></div></div>" : "<div class='dtc bevT be-w98'><div class='be-cross' id=t" + e + "_cls>X</div>" + u : (l = ConversationLeftWrapper('<span class="chat-tickbx"></span><span class="befwt">We have received your requirement</span>. We will soon connect you to relevant suppliers', { classtotest: chatBlClass(e, "left"), leftright: "inline" === chatBlPopupInline(e) ? "message-left" : "popup" === chatBlPopupInline(e) ? "message-left1" : "" }), this.AfterThankYouHtml = "<div class='chat-thak'>Connected Suppliers will appear in your  <a href='" + h + "' target='_blank'><span class='chat-blH'>Messages</span></a></div>"); this.ThankYouHtml = l };